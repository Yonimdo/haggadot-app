!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var i=[],n=e.document,o=Object.getPrototypeOf,r=i.slice,a=i.concat,s=i.push,l=i.indexOf,u={},c=u.toString,h=u.hasOwnProperty,d=h.toString,p=d.call(Object),f={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},v=function(e){return null!=e&&e===e.window},m={type:!0,src:!0,noModule:!0};function y(e,t,i){var o,r=(t=t||n).createElement("script");if(r.text=e,i)for(o in m)i[o]&&(r[o]=i[o]);t.head.appendChild(r).parentNode.removeChild(r)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[c.call(e)]||"object":typeof e}var w=function(e,t){return new w.fn.init(e,t)},_=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function x(e){var t=!!e&&"length"in e&&e.length,i=b(e);return!g(e)&&!v(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return r.call(this)},get:function(e){return null==e?r.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:i.sort,splice:i.splice},w.extend=w.fn.extend=function(){var e,t,i,n,o,r,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=a[t],a!==(n=e[t])&&(u&&n&&(w.isPlainObject(n)||(o=Array.isArray(n)))?(o?(o=!1,r=i&&Array.isArray(i)?i:[]):r=i&&w.isPlainObject(i)?i:{},a[t]=w.extend(u,r,n)):void 0!==n&&(a[t]=n));return a},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==c.call(e)||(t=o(e))&&("function"!=typeof(i=h.call(t,"constructor")&&t.constructor)||d.call(i)!==p))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){y(e)},each:function(e,t){var i,n=0;if(x(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(_,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(x(Object(e))?w.merge(i,"string"==typeof e?[e]:e):s.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:l.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;n<i;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,i){for(var n=[],o=0,r=e.length,a=!i;o<r;o++)!t(e[o],o)!==a&&n.push(e[o]);return n},map:function(e,t,i){var n,o,r=0,s=[];if(x(e))for(n=e.length;r<n;r++)null!=(o=t(e[r],r,i))&&s.push(o);else for(r in e)null!=(o=t(e[r],r,i))&&s.push(o);return a.apply([],s)},guid:1,support:f}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=i[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var P=function(e){var t,i,n,o,r,a,s,l,u,c,h,d,p,f,g,v,m,y,b,w="sizzle"+1*new Date,_=e.document,x=0,P=0,j=ae(),C=ae(),k=ae(),S=function(e,t){return e===t&&(h=!0),0},T={}.hasOwnProperty,E=[],L=E.pop,O=E.push,D=E.push,I=E.slice,A=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",q="\\["+M+"*("+F+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+M+"*\\]",N=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",H=new RegExp(M+"+","g"),z=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),V=new RegExp("^"+M+"*,"+M+"*"),B=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),W=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),U=new RegExp(N),Z=new RegExp("^"+F+"$"),G={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},$=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Q=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ee=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ne=function(){d()},oe=ye(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{D.apply(E=I.call(_.childNodes),_.childNodes)}catch(e){D={apply:E.length?function(e,t){O.apply(e,I.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function re(e,t,n,o){var r,s,u,c,h,f,m,y=t&&t.ownerDocument,x=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return n;if(!o&&((t?t.ownerDocument||t:_)!==p&&d(t),t=t||p,g)){if(11!==x&&(h=K.exec(e)))if(r=h[1]){if(9===x){if(!(u=t.getElementById(r)))return n;if(u.id===r)return n.push(u),n}else if(y&&(u=y.getElementById(r))&&b(t,u)&&u.id===r)return n.push(u),n}else{if(h[2])return D.apply(n,t.getElementsByTagName(e)),n;if((r=h[3])&&i.getElementsByClassName&&t.getElementsByClassName)return D.apply(n,t.getElementsByClassName(r)),n}if(i.qsa&&!k[e+" "]&&(!v||!v.test(e))){if(1!==x)y=t,m=e;else if("object"!==t.nodeName.toLowerCase()){for((c=t.getAttribute("id"))?c=c.replace(te,ie):t.setAttribute("id",c=w),s=(f=a(e)).length;s--;)f[s]="#"+c+" "+me(f[s]);m=f.join(","),y=J.test(e)&&ge(t.parentNode)||t}if(m)try{return D.apply(n,y.querySelectorAll(m)),n}catch(e){}finally{c===w&&t.removeAttribute("id")}}}return l(e.replace(z,"$1"),t,n,o)}function ae(){var e=[];return function t(i,o){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=o}}function se(e){return e[w]=!0,e}function le(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var i=e.split("|"),o=i.length;o--;)n.attrHandle[i[o]]=t}function ce(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function he(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function pe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function fe(e){return se(function(t){return t=+t,se(function(i,n){for(var o,r=e([],i.length,t),a=r.length;a--;)i[o=r[a]]&&(i[o]=!(n[o]=i[o]))})})}function ge(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}i=re.support={},r=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},d=re.setDocument=function(e){var t,o,a=e?e.ownerDocument||e:_;return a!==p&&9===a.nodeType&&a.documentElement?(f=(p=a).documentElement,g=!r(p),_!==p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ne,!1):o.attachEvent&&o.attachEvent("onunload",ne)),i.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=le(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=X.test(p.getElementsByClassName),i.getById=le(function(e){return f.appendChild(e).id=w,!p.getElementsByName||!p.getElementsByName(w).length}),i.getById?(n.filter.ID=function(e){var t=e.replace(Q,ee);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(Q,ee);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var i,n,o,r=t.getElementById(e);if(r){if((i=r.getAttributeNode("id"))&&i.value===e)return[r];for(o=t.getElementsByName(e),n=0;r=o[n++];)if((i=r.getAttributeNode("id"))&&i.value===e)return[r]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},n.find.CLASS=i.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},m=[],v=[],(i.qsa=X.test(p.querySelectorAll))&&(le(function(e){f.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+w+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||v.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(i.matchesSelector=X.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&le(function(e){i.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),m.push("!=",N)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),t=X.test(f.compareDocumentPosition),b=t||X.test(f.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},S=t?function(e,t){if(e===t)return h=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===p||e.ownerDocument===_&&b(_,e)?-1:t===p||t.ownerDocument===_&&b(_,t)?1:c?A(c,e)-A(c,t):0:4&n?-1:1)}:function(e,t){if(e===t)return h=!0,0;var i,n=0,o=e.parentNode,r=t.parentNode,a=[e],s=[t];if(!o||!r)return e===p?-1:t===p?1:o?-1:r?1:c?A(c,e)-A(c,t):0;if(o===r)return ce(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?ce(a[n],s[n]):a[n]===_?-1:s[n]===_?1:0},p):p},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&d(e),t=t.replace(W,"='$1']"),i.matchesSelector&&g&&!k[t+" "]&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var n=y.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return re(t,p,null,[e]).length>0},re.contains=function(e,t){return(e.ownerDocument||e)!==p&&d(e),b(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==p&&d(e);var o=n.attrHandle[t.toLowerCase()],r=o&&T.call(n.attrHandle,t.toLowerCase())?o(e,t,!g):void 0;return void 0!==r?r:i.attributes||!g?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},re.escape=function(e){return(e+"").replace(te,ie)},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],o=0,r=0;if(h=!i.detectDuplicates,c=!i.sortStable&&e.slice(0),e.sort(S),h){for(;t=e[r++];)t===e[r]&&(o=n.push(r));for(;o--;)e.splice(n[o],1)}return c=null,e},o=re.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=o(t);return i},(n=re.selectors={cacheLength:50,createPseudo:se,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Q,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Q,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&U.test(i)&&(t=a(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Q,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var o=re.attr(n,e);return null==o?"!="===t:!t||(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.slice(-i.length)===i:"~="===t?(" "+o.replace(H," ")+" ").indexOf(i)>-1:"|="===t&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var u,c,h,d,p,f,g=r!==a?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(v){if(r){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?v.firstChild:v.lastChild],a&&y){for(b=(p=(u=(c=(h=(d=v)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===x&&u[1])&&u[2],d=p&&v.childNodes[p];d=++p&&d&&d[g]||(b=p=0)||f.pop();)if(1===d.nodeType&&++b&&d===t){c[e]=[x,p,b];break}}else if(y&&(b=p=(u=(c=(h=(d=t)[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===x&&u[1]),!1===b)for(;(d=++p&&d&&d[g]||(b=p=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++b||(y&&((c=(h=d[w]||(d[w]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]=[x,b]),d!==t)););return(b-=o)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,t){var i,o=n.pseudos[e]||n.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return o[w]?o(t):o.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,i){for(var n,r=o(e,t),a=r.length;a--;)e[n=A(e,r[a])]=!(i[n]=r[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:se(function(e){var t=[],i=[],n=s(e.replace(z,"$1"));return n[w]?se(function(e,t,i,o){for(var r,a=n(e,null,o,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,o,r){return t[0]=e,n(t,null,r,i),t[0]=null,!i.pop()}}),has:se(function(e){return function(t){return re(e,t).length>0}}),contains:se(function(e){return e=e.replace(Q,ee),function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:se(function(e){return Z.test(e||"")||re.error("unsupported lang: "+e),e=e.replace(Q,ee).toLowerCase(),function(t){var i;do{if(i=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:pe(!1),disabled:pe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return $.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,i){return[i<0?i+t:i]}),even:fe(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:fe(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:fe(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:fe(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=n.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=he(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=de(t);function ve(){}function me(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function ye(e,t,i){var n=t.dir,o=t.next,r=o||n,a=i&&"parentNode"===r,s=P++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||a)return e(t,i,o);return!1}:function(t,i,l){var u,c,h,d=[x,s];if(l){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||a)if(c=(h=t[w]||(t[w]={}))[t.uniqueID]||(h[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[n]||t;else{if((u=c[r])&&u[0]===x&&u[1]===s)return d[2]=u[2];if(c[r]=d,d[2]=e(t,i,l))return!0}return!1}}function be(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function we(e,t,i,n,o){for(var r,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(r=e[s])&&(i&&!i(r,n,o)||(a.push(r),u&&t.push(s)));return a}function _e(e,t,i,n,o,r){return n&&!n[w]&&(n=_e(n)),o&&!o[w]&&(o=_e(o,r)),se(function(r,a,s,l){var u,c,h,d=[],p=[],f=a.length,g=r||function(e,t,i){for(var n=0,o=t.length;n<o;n++)re(e,t[n],i);return i}(t||"*",s.nodeType?[s]:s,[]),v=!e||!r&&t?g:we(g,d,e,s,l),m=i?o||(r?e:f||n)?[]:a:v;if(i&&i(v,m,s,l),n)for(u=we(m,p),n(u,[],s,l),c=u.length;c--;)(h=u[c])&&(m[p[c]]=!(v[p[c]]=h));if(r){if(o||e){if(o){for(u=[],c=m.length;c--;)(h=m[c])&&u.push(v[c]=h);o(null,m=[],u,l)}for(c=m.length;c--;)(h=m[c])&&(u=o?A(r,h):d[c])>-1&&(r[u]=!(a[u]=h))}}else m=we(m===a?m.splice(f,m.length):m),o?o(null,a,m,l):D.apply(a,m)})}function xe(e){for(var t,i,o,r=e.length,a=n.relative[e[0].type],s=a||n.relative[" "],l=a?1:0,c=ye(function(e){return e===t},s,!0),h=ye(function(e){return A(t,e)>-1},s,!0),d=[function(e,i,n){var o=!a&&(n||i!==u)||((t=i).nodeType?c(e,i,n):h(e,i,n));return t=null,o}];l<r;l++)if(i=n.relative[e[l].type])d=[ye(be(d),i)];else{if((i=n.filter[e[l].type].apply(null,e[l].matches))[w]){for(o=++l;o<r&&!n.relative[e[o].type];o++);return _e(l>1&&be(d),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),i,l<o&&xe(e.slice(l,o)),o<r&&xe(e=e.slice(o)),o<r&&me(e))}d.push(i)}return be(d)}return ve.prototype=n.filters=n.pseudos,n.setFilters=new ve,a=re.tokenize=function(e,t){var i,o,r,a,s,l,u,c=C[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=n.preFilter;s;){i&&!(o=V.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),i=!1,(o=B.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(z," ")}),s=s.slice(i.length));for(a in n.filter)!(o=G[a].exec(s))||u[a]&&!(o=u[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return t?s.length:s?re.error(e):C(e,l).slice(0)},s=re.compile=function(e,t){var i,o,r,s,l,c,h=[],f=[],v=k[e+" "];if(!v){for(t||(t=a(e)),i=t.length;i--;)(v=xe(t[i]))[w]?h.push(v):f.push(v);(v=k(e,(l=(o=f).length>0,c=function(e,t,i,a,c){var h,f,v,m=0,y="0",b=e&&[],w=[],_=u,P=e||l&&n.find.TAG("*",c),j=x+=null==_?1:Math.random()||.1,C=P.length;for(c&&(u=t===p||t||c);y!==C&&null!=(h=P[y]);y++){if(l&&h){for(f=0,t||h.ownerDocument===p||(d(h),i=!g);v=o[f++];)if(v(h,t||p,i)){a.push(h);break}c&&(x=j)}s&&((h=!v&&h)&&m--,e&&b.push(h))}if(m+=y,s&&y!==m){for(f=0;v=r[f++];)v(b,w,t,i);if(e){if(m>0)for(;y--;)b[y]||w[y]||(w[y]=L.call(a));w=we(w)}D.apply(a,w),c&&!e&&w.length>0&&m+r.length>1&&re.uniqueSort(a)}return c&&(x=j,u=_),b},(s=(r=h).length>0)?se(c):c))).selector=e}return v},l=re.select=function(e,t,i,o){var r,l,u,c,h,d="function"==typeof e&&e,p=!o&&a(e=d.selector||e);if(i=i||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===t.nodeType&&g&&n.relative[l[1].type]){if(!(t=(n.find.ID(u.matches[0].replace(Q,ee),t)||[])[0]))return i;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(r=G.needsContext.test(e)?0:l.length;r--&&!n.relative[c=(u=l[r]).type];)if((h=n.find[c])&&(o=h(u.matches[0].replace(Q,ee),J.test(l[0].type)&&ge(t.parentNode)||t))){if(l.splice(r,1),!(e=o.length&&me(l)))return D.apply(i,o),i;break}}return(d||s(e,p))(o,t,!g,i,!t||J.test(e)&&ge(t.parentNode)||t),i},i.sortStable=w.split("").sort(S).join("")===w,i.detectDuplicates=!!h,d(),i.sortDetached=le(function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),i.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ue(R,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),re}(e);w.find=P,w.expr=P.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=P.uniqueSort,w.text=P.getText,w.isXMLDoc=P.isXML,w.contains=P.contains,w.escapeSelector=P.escape;var j=function(e,t,i){for(var n=[],o=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&w(e).is(i))break;n.push(e)}return n},C=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},k=w.expr.match.needsContext;function S(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var T=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function E(e,t,i){return g(t)?w.grep(e,function(e,n){return!!t.call(e,n,e)!==i}):t.nodeType?w.grep(e,function(e){return e===t!==i}):"string"!=typeof t?w.grep(e,function(e){return l.call(t,e)>-1!==i}):w.filter(t,e,i)}w.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?w.find.matchesSelector(n,e)?[n]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,i,n=this.length,o=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<n;t++)if(w.contains(o[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)w.find(e,o[t],i);return n>1?w.uniqueSort(i):i},filter:function(e){return this.pushStack(E(this,e||[],!1))},not:function(e){return this.pushStack(E(this,e||[],!0))},is:function(e){return!!E(this,"string"==typeof e&&k.test(e)?w(e):e||[],!1).length}});var L,O=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,i){var o,r;if(!e)return this;if(i=i||L,"string"==typeof e){if(!(o="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:O.exec(e))||!o[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(o[1]){if(w.merge(this,w.parseHTML(o[1],(t=t instanceof w?t[0]:t)&&t.nodeType?t.ownerDocument||t:n,!0)),T.test(o[1])&&w.isPlainObject(t))for(o in t)g(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}return(r=n.getElementById(o[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==i.ready?i.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,L=w(n);var D=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,o=this.length,r=[],a="string"!=typeof e&&w(e);if(!k.test(e))for(;n<o;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&w.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?w.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?l.call(w(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return j(e,"parentNode")},parentsUntil:function(e,t,i){return j(e,"parentNode",i)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return j(e,"nextSibling")},prevAll:function(e){return j(e,"previousSibling")},nextUntil:function(e,t,i){return j(e,"nextSibling",i)},prevUntil:function(e,t,i){return j(e,"previousSibling",i)},siblings:function(e){return C((e.parentNode||{}).firstChild,e)},children:function(e){return C(e.firstChild)},contents:function(e){return S(e,"iframe")?e.contentDocument:(S(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(i,n){var o=w.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=w.filter(n,o)),this.length>1&&(I[e]||w.uniqueSort(o),D.test(e)&&o.reverse()),this.pushStack(o)}});var R=/[^\x20\t\r\n\f]+/g;function M(e){return e}function F(e){throw e}function q(e,t,i,n){var o;try{e&&g(o=e.promise)?o.call(e).done(t).fail(i):e&&g(o=e.then)?o.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}w.Callbacks=function(e){var t;e="string"==typeof e?(t={},w.each(e.match(R)||[],function(e,i){t[i]=!0}),t):w.extend({},e);var i,n,o,r,a=[],s=[],l=-1,u=function(){for(r=r||e.once,o=i=!0;s.length;l=-1)for(n=s.shift();++l<a.length;)!1===a[l].apply(n[0],n[1])&&e.stopOnFalse&&(l=a.length,n=!1);e.memory||(n=!1),i=!1,r&&(a=n?[]:"")},c={add:function(){return a&&(n&&!i&&(l=a.length-1,s.push(n)),function t(i){w.each(i,function(i,n){g(n)?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==b(n)&&t(n)})}(arguments),n&&!i&&u()),this},remove:function(){return w.each(arguments,function(e,t){for(var i;(i=w.inArray(t,a,i))>-1;)a.splice(i,1),i<=l&&l--}),this},has:function(e){return e?w.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return r=s=[],n||i||(a=n=""),this},locked:function(){return!!r},fireWith:function(e,t){return r||(t=[e,(t=t||[]).slice?t.slice():t],s.push(t),i||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!o}};return c},w.extend({Deferred:function(t){var i=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(i,function(i,n){var o=g(e[n[4]])&&e[n[4]];r[n[1]](function(){var e=o&&o.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(t,n,o){var r=0;function a(t,i,n,o){return function(){var s=this,l=arguments,u=function(){var e,u;if(!(t<r)){if((e=n.apply(s,l))===i.promise())throw new TypeError("Thenable self-resolution");g(u=e&&("object"==typeof e||"function"==typeof e)&&e.then)?o?u.call(e,a(r,i,M,o),a(r,i,F,o)):u.call(e,a(++r,i,M,o),a(r,i,F,o),a(r,i,M,i.notifyWith)):(n!==M&&(s=void 0,l=[e]),(o||i.resolveWith)(s,l))}},c=o?u:function(){try{u()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,c.stackTrace),t+1>=r&&(n!==F&&(s=void 0,l=[e]),i.rejectWith(s,l))}};t?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),e.setTimeout(c))}}return w.Deferred(function(e){i[0][3].add(a(0,e,g(o)?o:M,e.notifyWith)),i[1][3].add(a(0,e,g(t)?t:M)),i[2][3].add(a(0,e,g(n)?n:F))}).promise()},promise:function(e){return null!=e?w.extend(e,o):o}},r={};return w.each(i,function(e,t){var a=t[2],s=t[5];o[t[1]]=a.add,s&&a.add(function(){n=s},i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),a.add(t[3].fire),r[t[0]]=function(){return r[t[0]+"With"](this===r?void 0:this,arguments),this},r[t[0]+"With"]=a.fireWith}),o.promise(r),t&&t.call(r,r),r},when:function(e){var t=arguments.length,i=t,n=Array(i),o=r.call(arguments),a=w.Deferred(),s=function(e){return function(i){n[e]=this,o[e]=arguments.length>1?r.call(arguments):i,--t||a.resolveWith(n,o)}};if(t<=1&&(q(e,a.done(s(i)).resolve,a.reject,!t),"pending"===a.state()||g(o[i]&&o[i].then)))return a.then();for(;i--;)q(o[i],s(i),a.reject);return a.promise()}});var N=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&N.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},w.readyException=function(t){e.setTimeout(function(){throw t})};var H=w.Deferred();function z(){n.removeEventListener("DOMContentLoaded",z),e.removeEventListener("load",z),w.ready()}w.fn.ready=function(e){return H.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||H.resolveWith(n,[w]))}}),w.ready.then=H.then,"complete"===n.readyState||"loading"!==n.readyState&&!n.documentElement.doScroll?e.setTimeout(w.ready):(n.addEventListener("DOMContentLoaded",z),e.addEventListener("load",z));var V=function(e,t,i,n,o,r,a){var s=0,l=e.length,u=null==i;if("object"===b(i)){o=!0;for(s in i)V(e,t,s,i[s],!0,r,a)}else if(void 0!==n&&(o=!0,g(n)||(a=!0),u&&(a?(t.call(e,n),t=null):(u=t,t=function(e,t,i){return u.call(w(e),i)})),t))for(;s<l;s++)t(e[s],i,a?n:n.call(e[s],s,t(e[s],i)));return o?e:u?t.call(e):l?t(e[0],i):r},B=/^-ms-/,W=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function Z(e){return e.replace(B,"ms-").replace(W,U)}var G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function $(){this.expando=w.expando+$.uid++}$.uid=1,$.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,o=this.cache(e);if("string"==typeof t)o[Z(t)]=i;else for(n in t)o[Z(n)]=t[n];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Z(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(Z):(t=Z(t))in n?[t]:t.match(R)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||w.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var Y=new $,X=new $,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function Q(e,t,i){var n,o;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===(o=i)||"false"!==o&&("null"===o?null:o===+o+""?+o:K.test(o)?JSON.parse(o):o)}catch(e){}X.set(e,t,i)}else i=void 0;return i}w.extend({hasData:function(e){return X.hasData(e)||Y.hasData(e)},data:function(e,t,i){return X.access(e,t,i)},removeData:function(e,t){X.remove(e,t)},_data:function(e,t,i){return Y.access(e,t,i)},_removeData:function(e,t){Y.remove(e,t)}}),w.fn.extend({data:function(e,t){var i,n,o,r=this[0],a=r&&r.attributes;if(void 0===e){if(this.length&&(o=X.get(r),1===r.nodeType&&!Y.get(r,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&0===(n=a[i].name).indexOf("data-")&&(n=Z(n.slice(5)),Q(r,n,o[n]));Y.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){X.set(this,e)}):V(this,function(t){var i;if(r&&void 0===t)return void 0!==(i=X.get(r,e))?i:void 0!==(i=Q(r,e))?i:void 0;this.each(function(){X.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){X.remove(this,e)})}}),w.extend({queue:function(e,t,i){var n;if(e)return n=Y.get(e,t=(t||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=Y.access(e,t,w.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){var i=w.queue(e,t=t||"fx"),n=i.length,o=i.shift(),r=w._queueHooks(e,t);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete r.stop,o.call(e,function(){w.dequeue(e,t)},r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Y.get(e,i)||Y.access(e,i,{empty:w.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",i])})})}}),w.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?w.queue(this[0],e):void 0===t?this:this.each(function(){var i=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=w.Deferred(),r=this,a=this.length,s=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(i=Y.get(r[a],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),o.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],ne=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&w.contains(e.ownerDocument,e)&&"none"===w.css(e,"display")},oe=function(e,t,i,n){var o,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];o=i.apply(e,n||[]);for(r in t)e.style[r]=a[r];return o};function re(e,t,i,n){var o,r,a=20,s=n?function(){return n.cur()}:function(){return w.css(e,t,"")},l=s(),u=i&&i[3]||(w.cssNumber[t]?"":"px"),c=(w.cssNumber[t]||"px"!==u&&+l)&&te.exec(w.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;a--;)w.style(e,t,c+u),(1-r)*(1-(r=s()/l||.5))<=0&&(a=0),c/=r;w.style(e,t,(c*=2)+u),i=i||[]}return i&&(c=+c||+l||0,o=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=u,n.start=c,n.end=o)),o}var ae={};function se(e,t){for(var i,n,o,r,a,s,l,u=[],c=0,h=e.length;c<h;c++)(n=e[c]).style&&(i=n.style.display,t?("none"===i&&(u[c]=Y.get(n,"display")||null,u[c]||(n.style.display="")),""===n.style.display&&ne(n)&&(u[c]=(r=void 0,a=void 0,l=void 0,a=(o=n).ownerDocument,(l=ae[s=o.nodeName])||(r=a.body.appendChild(a.createElement(s)),l=w.css(r,"display"),r.parentNode.removeChild(r),"none"===l&&(l="block"),ae[s]=l,l)))):"none"!==i&&(u[c]="none",Y.set(n,"display",i)));for(c=0;c<h;c++)null!=u[c]&&(e[c].style.display=u[c]);return e}w.fn.extend({show:function(){return se(this,!0)},hide:function(){return se(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ne(this)?w(this).show():w(this).hide()})}});var le=/^(?:checkbox|radio)$/i,ue=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ce=/^$|^module$|\/(?:java|ecma)script/i,he={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function de(e,t){var i;return i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&S(e,t)?w.merge([e],i):i}function pe(e,t){for(var i=0,n=e.length;i<n;i++)Y.set(e[i],"globalEval",!t||Y.get(t[i],"globalEval"))}he.optgroup=he.option,he.tbody=he.tfoot=he.colgroup=he.caption=he.thead,he.th=he.td;var fe,ge,ve=/<|&#?\w+;/;function me(e,t,i,n,o){for(var r,a,s,l,u,c,h=t.createDocumentFragment(),d=[],p=0,f=e.length;p<f;p++)if((r=e[p])||0===r)if("object"===b(r))w.merge(d,r.nodeType?[r]:r);else if(ve.test(r)){for(a=a||h.appendChild(t.createElement("div")),s=(ue.exec(r)||["",""])[1].toLowerCase(),a.innerHTML=(l=he[s]||he._default)[1]+w.htmlPrefilter(r)+l[2],c=l[0];c--;)a=a.lastChild;w.merge(d,a.childNodes),(a=h.firstChild).textContent=""}else d.push(t.createTextNode(r));for(h.textContent="",p=0;r=d[p++];)if(n&&w.inArray(r,n)>-1)o&&o.push(r);else if(u=w.contains(r.ownerDocument,r),a=de(h.appendChild(r),"script"),u&&pe(a),i)for(c=0;r=a[c++];)ce.test(r.type||"")&&i.push(r);return h}fe=n.createDocumentFragment().appendChild(n.createElement("div")),(ge=n.createElement("input")).setAttribute("type","radio"),ge.setAttribute("checked","checked"),ge.setAttribute("name","t"),fe.appendChild(ge),f.checkClone=fe.cloneNode(!0).cloneNode(!0).lastChild.checked,fe.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!fe.cloneNode(!0).lastChild.defaultValue;var ye=n.documentElement,be=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_e=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function Pe(){return!1}function je(){try{return n.activeElement}catch(e){}}function Ce(e,t,i,n,o,r){var a,s;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=void 0);for(s in t)Ce(e,s,i,n,t[s],r);return e}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=Pe;else if(!o)return e;return 1===r&&(a=o,(o=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,o,n,i)})}w.event={global:{},add:function(e,t,i,n,o){var r,a,s,l,u,c,h,d,p,f,g,v=Y.get(e);if(v)for(i.handler&&(i=(r=i).handler,o=r.selector),o&&w.find.matchesSelector(ye,o),i.guid||(i.guid=w.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return"undefined"!=typeof w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(R)||[""]).length;u--;)p=g=(s=_e.exec(t[u])||[])[1],f=(s[2]||"").split(".").sort(),p&&(h=w.event.special[p]||{},h=w.event.special[p=(o?h.delegateType:h.bindType)||p]||{},c=w.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&w.expr.match.needsContext.test(o),namespace:f.join(".")},r),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,f,a)||e.addEventListener&&e.addEventListener(p,a)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),o?d.splice(d.delegateCount++,0,c):d.push(c),w.event.global[p]=!0)},remove:function(e,t,i,n,o){var r,a,s,l,u,c,h,d,p,f,g,v=Y.hasData(e)&&Y.get(e);if(v&&(l=v.events)){for(u=(t=(t||"").match(R)||[""]).length;u--;)if(p=g=(s=_e.exec(t[u])||[])[1],f=(s[2]||"").split(".").sort(),p){for(h=w.event.special[p]||{},d=l[p=(n?h.delegateType:h.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=d.length;r--;)c=d[r],!o&&g!==c.origType||i&&i.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(r,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));a&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,f,v.handle)||w.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)w.event.remove(e,p+t[u],i,n,!0);w.isEmptyObject(l)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,i,n,o,r,a,s=w.event.fix(e),l=new Array(arguments.length),u=(Y.get(this,"events")||{})[s.type]||[],c=w.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=w.event.handlers.call(this,s,u),t=0;(o=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(r.namespace)||(s.handleObj=r,s.data=r.data,void 0!==(n=((w.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var i,n,o,r,a,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(r=[],a={},i=0;i<l;i++)void 0===a[o=(n=t[i]).selector+" "]&&(a[o]=n.needsContext?w(o,this).index(u)>-1:w.find(o,this,null,[u]).length),a[o]&&r.push(n);r.length&&s.push({elem:u,handlers:r})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==je()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===je()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&S(this,"input"))return this.click(),!1},_default:function(e){return S(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:Pe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Pe,isPropagationStopped:Pe,isImmediatePropagationStopped:Pe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,o=e.handleObj;return n&&(n===this||w.contains(this,n))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),w.fn.extend({on:function(e,t,i,n){return Ce(this,e,t,i,n)},one:function(e,t,i,n){return Ce(this,e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,w(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=Pe),this.each(function(){w.event.remove(this,e,i,t)})}});var ke=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Se=/<script|<style|<link/i,Te=/checked\s*(?:[^=]|=\s*.checked.)/i,Ee=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return S(e,"table")&&S(11!==t.nodeType?t:t.firstChild,"tr")?w(e).children("tbody")[0]||e:e}function Oe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function De(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ie(e,t){var i,n,o,r,a,s,l,u;if(1===t.nodeType){if(Y.hasData(e)&&(r=Y.access(e),a=Y.set(t,r),u=r.events)){delete a.handle,a.events={};for(o in u)for(i=0,n=u[o].length;i<n;i++)w.event.add(t,o,u[o][i])}X.hasData(e)&&(s=X.access(e),l=w.extend({},s),X.set(t,l))}}function Ae(e,t,i,n){t=a.apply([],t);var o,r,s,l,u,c,h=0,d=e.length,p=d-1,v=t[0],m=g(v);if(m||d>1&&"string"==typeof v&&!f.checkClone&&Te.test(v))return e.each(function(o){var r=e.eq(o);m&&(t[0]=v.call(this,o,r.html())),Ae(r,t,i,n)});if(d&&(r=(o=me(t,e[0].ownerDocument,!1,e,n)).firstChild,1===o.childNodes.length&&(o=r),r||n)){for(l=(s=w.map(de(o,"script"),Oe)).length;h<d;h++)u=o,h!==p&&(u=w.clone(u,!0,!0),l&&w.merge(s,de(u,"script"))),i.call(e[h],u,h);if(l)for(c=s[s.length-1].ownerDocument,w.map(s,De),h=0;h<l;h++)ce.test((u=s[h]).type||"")&&!Y.access(u,"globalEval")&&w.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(u.src):y(u.textContent.replace(Ee,""),c,u))}return e}function Re(e,t,i){for(var n,o=t?w.filter(t,e):e,r=0;null!=(n=o[r]);r++)i||1!==n.nodeType||w.cleanData(de(n)),n.parentNode&&(i&&w.contains(n.ownerDocument,n)&&pe(de(n,"script")),n.parentNode.removeChild(n));return e}w.extend({htmlPrefilter:function(e){return e.replace(ke,"<$1></$2>")},clone:function(e,t,i){var n,o,r,a,s,l,u,c=e.cloneNode(!0),h=w.contains(e.ownerDocument,e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(a=de(c),n=0,o=(r=de(e)).length;n<o;n++)s=r[n],"input"===(u=(l=a[n]).nodeName.toLowerCase())&&le.test(s.type)?l.checked=s.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=s.defaultValue);if(t)if(i)for(r=r||de(e),a=a||de(c),n=0,o=r.length;n<o;n++)Ie(r[n],a[n]);else Ie(e,c);return(a=de(c,"script")).length>0&&pe(a,!h&&de(e,"script")),c},cleanData:function(e){for(var t,i,n,o=w.event.special,r=0;void 0!==(i=e[r]);r++)if(G(i)){if(t=i[Y.expando]){if(t.events)for(n in t.events)o[n]?w.event.remove(i,n):w.removeEvent(i,n,t.handle);i[Y.expando]=void 0}i[X.expando]&&(i[X.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return V(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ae(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Ae(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ae(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ae(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(de(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return V(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Se.test(e)&&!he[(ue.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(w.cleanData(de(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ae(this,arguments,function(t){var i=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(de(this)),i&&i.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var i,n=[],o=w(e),r=o.length-1,a=0;a<=r;a++)i=a===r?this:this.clone(!0),w(o[a])[t](i),s.apply(n,i.get());return this.pushStack(n)}});var Me=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Fe=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},qe=new RegExp(ie.join("|"),"i");function Ne(e,t,i){var n,o,r,a,s=e.style;return(i=i||Fe(e))&&(""!==(a=i.getPropertyValue(t)||i[t])||w.contains(e.ownerDocument,e)||(a=w.style(e,t)),!f.pixelBoxStyles()&&Me.test(a)&&qe.test(t)&&(n=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=o,s.maxWidth=r)),void 0!==a?a+"":a}function He(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ye.appendChild(u).appendChild(c);var t=e.getComputedStyle(c);o="1%"!==t.top,l=12===i(t.marginLeft),c.style.right="60%",s=36===i(t.right),r=36===i(t.width),c.style.position="absolute",a=36===c.offsetWidth||"absolute",ye.removeChild(u),c=null}}function i(e){return Math.round(parseFloat(e))}var o,r,a,s,l,u=n.createElement("div"),c=n.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(f,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),o},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),a}}))}();var ze=/^(none|table(?!-c[ea]).+)/,Ve=/^--/,Be={position:"absolute",visibility:"hidden",display:"block"},We={letterSpacing:"0",fontWeight:"400"},Ue=["Webkit","Moz","ms"],Ze=n.createElement("div").style;function Ge(e){var t=w.cssProps[e];return t||(t=w.cssProps[e]=function(e){if(e in Ze)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=Ue.length;i--;)if((e=Ue[i]+t)in Ze)return e}(e)||e),t}function $e(e,t,i){var n=te.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function Ye(e,t,i,n,o,r){var a="width"===t?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=w.css(e,i+ie[a],!0,o)),n?("content"===i&&(l-=w.css(e,"padding"+ie[a],!0,o)),"margin"!==i&&(l-=w.css(e,"border"+ie[a]+"Width",!0,o))):(l+=w.css(e,"padding"+ie[a],!0,o),"padding"!==i?l+=w.css(e,"border"+ie[a]+"Width",!0,o):s+=w.css(e,"border"+ie[a]+"Width",!0,o));return!n&&r>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-l-s-.5))),l}function Xe(e,t,i){var n=Fe(e),o=Ne(e,t,n),r="border-box"===w.css(e,"boxSizing",!1,n),a=r;if(Me.test(o)){if(!i)return o;o="auto"}return a=a&&(f.boxSizingReliable()||o===e.style[t]),("auto"===o||!parseFloat(o)&&"inline"===w.css(e,"display",!1,n))&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(o=parseFloat(o)||0)+Ye(e,t,i||(r?"border":"content"),a,n,o)+"px"}function Ke(e,t,i,n,o){return new Ke.prototype.init(e,t,i,n,o)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ne(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,a,s=Z(t),l=Ve.test(t),u=e.style;if(l||(t=Ge(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(o=a.get(e,!1,n))?o:u[t];"string"==(r=typeof i)&&(o=te.exec(i))&&o[1]&&(i=re(e,t,o),r="number"),null!=i&&i==i&&("number"===r&&(i+=o&&o[3]||(w.cssNumber[s]?"":"px")),f.clearCloneStyle||""!==i||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(l?u.setProperty(t,i):u[t]=i))}},css:function(e,t,i,n){var o,r,a,s=Z(t);return Ve.test(t)||(t=Ge(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,i)),void 0===o&&(o=Ne(e,t,n)),"normal"===o&&t in We&&(o=We[t]),""===i||i?(r=parseFloat(o),!0===i||isFinite(r)?r||0:o):o}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,i,n){if(i)return!ze.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Xe(e,t,n):oe(e,Be,function(){return Xe(e,t,n)})},set:function(e,i,n){var o,r=Fe(e),a="border-box"===w.css(e,"boxSizing",!1,r),s=n&&Ye(e,t,n,a,r);return a&&f.scrollboxSize()===r.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-Ye(e,t,"border",!1,r)-.5)),s&&(o=te.exec(i))&&"px"!==(o[3]||"px")&&(e.style[t]=i,i=w.css(e,t)),$e(0,i,s)}}}),w.cssHooks.marginLeft=He(f.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ne(e,"marginLeft"))||e.getBoundingClientRect().left-oe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];n<4;n++)o[e+ie[n]+t]=r[n]||r[n-2]||r[0];return o}},"margin"!==e&&(w.cssHooks[e+t].set=$e)}),w.fn.extend({css:function(e,t){return V(this,function(e,t,i){var n,o,r={},a=0;if(Array.isArray(t)){for(n=Fe(e),o=t.length;a<o;a++)r[t[a]]=w.css(e,t[a],!1,n);return r}return void 0!==i?w.style(e,t,i):w.css(e,t)},e,t,arguments.length>1)}}),w.Tween=Ke,(Ke.prototype={constructor:Ke,init:function(e,t,i,n,o,r){this.elem=e,this.prop=i,this.easing=o||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(w.cssNumber[i]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,i=Ke.propHooks[this.prop];return this.pos=t=this.options.duration?w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[w.cssProps[e.prop]]&&!w.cssHooks[e.prop]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=Ke.prototype.init,w.fx.step={};var Je,Qe,et,tt,it=/^(?:toggle|show|hide)$/,nt=/queueHooks$/;function ot(){Qe&&(!1===n.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(ot):e.setTimeout(ot,w.fx.interval),w.fx.tick())}function rt(){return e.setTimeout(function(){Je=void 0}),Je=Date.now()}function at(e,t){var i,n=0,o={height:e};for(t=t?1:0;n<4;n+=2-t)o["margin"+(i=ie[n])]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function st(e,t,i){for(var n,o=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),r=0,a=o.length;r<a;r++)if(n=o[r].call(i,t,e))return n}function lt(e,t,i){var n,o,r=0,a=lt.prefilters.length,s=w.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Je||rt(),i=Math.max(0,u.startTime+u.duration-t),n=1-(i/u.duration||0),r=0,a=u.tweens.length;r<a;r++)u.tweens[r].run(n);return s.notifyWith(e,[u,n,i]),n<1&&a?i:(a||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},i),originalProperties:t,originalOptions:i,startTime:Je||rt(),duration:i.duration,tweens:[],createTween:function(t,i){var n=w.Tween(e,u.opts,t,i,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var i=0,n=t?u.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)u.tweens[i].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(function(e,t){var i,n,o,r,a;for(i in e)if(o=t[n=Z(i)],r=e[i],Array.isArray(r)&&(o=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),(a=w.cssHooks[n])&&"expand"in a){r=a.expand(r),delete e[n];for(i in r)i in e||(e[i]=r[i],t[i]=o)}else t[n]=o}(c,u.opts.specialEasing);r<a;r++)if(n=lt.prefilters[r].call(u,e,c,u.opts))return g(n.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return w.map(c,st,u),g(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(lt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return re(i.elem,e,te.exec(t),i),i}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(R);for(var i,n=0,o=e.length;n<o;n++)(lt.tweeners[i=e[n]]=lt.tweeners[i]||[]).unshift(t)},prefilters:[function(e,t,i){var n,o,r,a,s,l,u,c,h="width"in t||"height"in t,d=this,p={},f=e.style,g=e.nodeType&&ne(e),v=Y.get(e,"fxshow");i.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})}));for(n in t)if(it.test(o=t[n])){if(delete t[n],r=r||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!v||void 0===v[n])continue;g=!0}p[n]=v&&v[n]||w.style(e,n)}if((l=!w.isEmptyObject(t))||!w.isEmptyObject(p)){h&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=v&&v.display)&&(u=Y.get(e,"display")),"none"===(c=w.css(e,"display"))&&(u?c=u:(se([e],!0),u=e.style.display||u,c=w.css(e,"display"),se([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===w.css(e,"float")&&(l||(d.done(function(){f.display=u}),null==u&&(u="none"===(c=f.display)?"":c)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1;for(n in p)l||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:u}),r&&(v.hidden=!g),g&&se([e],!0),d.done(function(){g||se([e]),Y.remove(e,"fxshow");for(n in p)w.style(e,n,p[n])})),l=st(g?v[n]:0,n,d),n in v||(v[n]=l.start,g&&(l.end=l.start,l.start=0))}}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),w.speed=function(e,t,i){var n=e&&"object"==typeof e?w.extend({},e):{complete:i||!i&&t||g(e)&&e,duration:e,easing:i&&t||t&&!g(t)&&t};return w.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration=n.duration in w.fx.speeds?w.fx.speeds[n.duration]:w.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){g(n.old)&&n.old.call(this),n.queue&&w.dequeue(this,n.queue)},n},w.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ne).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=w.isEmptyObject(e),r=w.speed(t,i,n),a=function(){var t=lt(this,w.extend({},e),r);(o||Y.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=w.timers,a=Y.get(this);if(o)a[o]&&a[o].stop&&n(a[o]);else for(o in a)a[o]&&a[o].stop&&nt.test(o)&&n(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(i),t=!1,r.splice(o,1));!t&&i||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=Y.get(this),n=i[e+"queue"],o=i[e+"queueHooks"],r=w.timers,a=n?n.length:0;for(i.finish=!0,w.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),w.each(["toggle","show","hide"],function(e,t){var i=w.fn[t];w.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(at(t,!0),e,n,o)}}),w.each({slideDown:at("show"),slideUp:at("hide"),slideToggle:at("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),w.timers=[],w.fx.tick=function(){var e,t=0,i=w.timers;for(Je=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||w.fx.stop(),Je=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){Qe||(Qe=!0,ot())},w.fx.stop=function(){Qe=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,i){return t=w.fx?w.fx.speeds[t]||t:t,this.queue(i=i||"fx",function(i,n){var o=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(o)}})},et=n.createElement("input"),tt=n.createElement("select").appendChild(n.createElement("option")),et.type="checkbox",f.checkOn=""!==et.value,f.optSelected=tt.selected,(et=n.createElement("input")).value="t",et.type="radio",f.radioValue="t"===et.value;var ut,ct=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return V(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return"undefined"==typeof e.getAttribute?w.prop(e,t,i):(1===r&&w.isXMLDoc(e)||(o=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?ut:void 0)),void 0!==i?null===i?void w.removeAttr(e,t):o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:(e.setAttribute(t,i+""),i):o&&"get"in o&&null!==(n=o.get(e,t))?n:null==(n=w.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&S(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,o=t&&t.match(R);if(o&&1===e.nodeType)for(;i=o[n++];)e.removeAttribute(i)}}),ut={set:function(e,t,i){return!1===t?w.removeAttr(e,i):e.setAttribute(i,i),i}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var i=ct[t]||w.find.attr;ct[t]=function(e,t,n){var o,r,a=t.toLowerCase();return n||(r=ct[a],ct[a]=o,o=null!=i(e,t,n)?a:null,ct[a]=r),o}});var ht=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function pt(e){return(e.match(R)||[]).join(" ")}function ft(e){return e.getAttribute&&e.getAttribute("class")||""}function gt(e){return Array.isArray(e)?e:"string"==typeof e?e.match(R)||[]:[]}w.fn.extend({prop:function(e,t){return V(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&w.isXMLDoc(e)||(o=w.propHooks[t=w.propFix[t]||t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(w.propHooks.selected={get:function(e){return null},set:function(e){}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,i,n,o,r,a,s,l=0;if(g(e))return this.each(function(t){w(this).addClass(e.call(this,t,ft(this)))});if((t=gt(e)).length)for(;i=this[l++];)if(o=ft(i),n=1===i.nodeType&&" "+pt(o)+" "){for(a=0;r=t[a++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o!==(s=pt(n))&&i.setAttribute("class",s)}return this},removeClass:function(e){var t,i,n,o,r,a,s,l=0;if(g(e))return this.each(function(t){w(this).removeClass(e.call(this,t,ft(this)))});if(!arguments.length)return this.attr("class","");if((t=gt(e)).length)for(;i=this[l++];)if(o=ft(i),n=1===i.nodeType&&" "+pt(o)+" "){for(a=0;r=t[a++];)for(;n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");o!==(s=pt(n))&&i.setAttribute("class",s)}return this},toggleClass:function(e,t){var i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(i){w(this).toggleClass(e.call(this,i,ft(this),t),t)}):this.each(function(){var t,o,r,a;if(n)for(o=0,r=w(this),a=gt(e);t=a[o++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==i||((t=ft(this))&&Y.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+pt(ft(i))+" ").indexOf(t)>-1)return!0;return!1}});var vt=/\r/g;w.fn.extend({val:function(e){var t,i,n,o=this[0];return arguments.length?(n=g(e),this.each(function(i){var o;1===this.nodeType&&(null==(o=n?e.call(this,i,w(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=w.map(o,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=w.valHooks[o.type]||w.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(o,"value"))?i:"string"==typeof(i=o.value)?i.replace(vt,""):null==i?"":i:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:pt(w.text(e))}},select:{get:function(e){var t,i,n,o=e.options,r=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?r+1:o.length;for(n=r<0?l:a?r:0;n<l;n++)if(((i=o[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!S(i.parentNode,"optgroup"))){if(t=w(i).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var i,n,o=e.options,r=w.makeArray(t),a=o.length;a--;)((n=o[a]).selected=w.inArray(w.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},f.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),f.focusin="onfocusin"in e;var mt=/^(?:focusinfocus|focusoutblur)$/,yt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,i,o,r){var a,s,l,u,c,d,p,f,m=[o||n],y=h.call(t,"type")?t.type:t,b=h.call(t,"namespace")?t.namespace.split("."):[];if(s=f=l=o=o||n,3!==o.nodeType&&8!==o.nodeType&&!mt.test(y+w.event.triggered)&&(y.indexOf(".")>-1&&(y=(b=y.split(".")).shift(),b.sort()),c=y.indexOf(":")<0&&"on"+y,(t=t[w.expando]?t:new w.Event(y,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),i=null==i?[t]:w.makeArray(i,[t]),p=w.event.special[y]||{},r||!p.trigger||!1!==p.trigger.apply(o,i))){if(!r&&!p.noBubble&&!v(o)){for(mt.test((u=p.delegateType||y)+y)||(s=s.parentNode);s;s=s.parentNode)m.push(s),l=s;l===(o.ownerDocument||n)&&m.push(l.defaultView||l.parentWindow||e)}for(a=0;(s=m[a++])&&!t.isPropagationStopped();)f=s,t.type=a>1?u:p.bindType||y,(d=(Y.get(s,"events")||{})[t.type]&&Y.get(s,"handle"))&&d.apply(s,i),(d=c&&s[c])&&d.apply&&G(s)&&(t.result=d.apply(s,i),!1===t.result&&t.preventDefault());return t.type=y,r||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(m.pop(),i)||!G(o)||c&&g(o[y])&&!v(o)&&((l=o[c])&&(o[c]=null),w.event.triggered=y,t.isPropagationStopped()&&f.addEventListener(y,yt),o[y](),t.isPropagationStopped()&&f.removeEventListener(y,yt),w.event.triggered=void 0,l&&(o[c]=l)),t.result}},simulate:function(e,t,i){var n=w.extend(new w.Event,i,{type:e,isSimulated:!0});w.event.trigger(n,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return w.event.trigger(e,t,i,!0)}}),f.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=Y.access(n,t);o||n.addEventListener(e,i,!0),Y.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=Y.access(n,t)-1;o?Y.access(n,t,o):(n.removeEventListener(e,i,!0),Y.remove(n,t))}}});var bt=e.location,wt=Date.now(),_t=/\?/;w.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),i};var xt=/\[\]$/,Pt=/\r?\n/g,jt=/^(?:submit|button|image|reset|file)$/i,Ct=/^(?:input|select|textarea|keygen)/i;function kt(e,t,i,n){var o;if(Array.isArray(t))w.each(t,function(t,o){i||xt.test(e)?n(e,o):kt(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,i,n)});else if(i||"object"!==b(t))n(e,t);else for(o in t)kt(e+"["+o+"]",t[o],i,n)}w.param=function(e,t){var i,n=[],o=function(e,t){var i=g(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){o(this.name,this.value)});else for(i in e)kt(i,e[i],t,o);return n.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&Ct.test(this.nodeName)&&!jt.test(e)&&(this.checked||!le.test(e))}).map(function(e,t){var i=w(this).val();return null==i?null:Array.isArray(i)?w.map(i,function(e){return{name:t.name,value:e.replace(Pt,"\r\n")}}):{name:t.name,value:i.replace(Pt,"\r\n")}}).get()}});var St=/%20/g,Tt=/#.*$/,Et=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Dt=/^\/\//,It={},At={},Rt="*/".concat("*"),Mt=n.createElement("a");function Ft(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,r=t.toLowerCase().match(R)||[];if(g(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function qt(e,t,i,n){var o={},r=e===At;function a(s){var l;return o[s]=!0,w.each(e[s]||[],function(e,s){var u=s(t,i,n);return"string"!=typeof u||r||o[u]?r?!(l=u):void 0:(t.dataTypes.unshift(u),a(u),!1)}),l}return a(t.dataTypes[0])||!o["*"]&&a("*")}function Nt(e,t){var i,n,o=w.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&w.extend(!0,e,n),e}Mt.href=bt.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Nt(Nt(e,w.ajaxSettings),t):Nt(w.ajaxSettings,e)},ajaxPrefilter:Ft(It),ajaxTransport:Ft(At),ajax:function(t,i){"object"==typeof t&&(i=t,t=void 0);var o,r,a,s,l,u,c,h,d,p,f=w.ajaxSetup({},i=i||{}),g=f.context||f,v=f.context&&(g.nodeType||g.jquery)?w(g):w.event,m=w.Deferred(),y=w.Callbacks("once memory"),b=f.statusCode||{},_={},x={},P="canceled",j={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Lt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,_[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)j.always(e[j.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||P;return o&&o.abort(t),C(0,t),this}};if(m.promise(j),f.url=((t||f.url||bt.href)+"").replace(Dt,bt.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(R)||[""],null==f.crossDomain){u=n.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=Mt.protocol+"//"+Mt.host!=u.protocol+"//"+u.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=w.param(f.data,f.traditional)),qt(It,f,i,j),c)return j;(h=w.event&&f.global)&&0==w.active++&&w.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ot.test(f.type),r=f.url.replace(Tt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(St,"+")):(p=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(_t.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(Et,"$1"),p=(_t.test(r)?"&":"?")+"_="+wt+++p),f.url=r+p),f.ifModified&&(w.lastModified[r]&&j.setRequestHeader("If-Modified-Since",w.lastModified[r]),w.etag[r]&&j.setRequestHeader("If-None-Match",w.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&j.setRequestHeader("Content-Type",f.contentType),j.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Rt+"; q=0.01":""):f.accepts["*"]);for(d in f.headers)j.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(g,j,f)||c))return j.abort();if(P="abort",y.add(f.complete),j.done(f.success),j.fail(f.error),o=qt(At,f,i,j)){if(j.readyState=1,h&&v.trigger("ajaxSend",[j,f]),c)return j;f.async&&f.timeout>0&&(l=e.setTimeout(function(){j.abort("timeout")},f.timeout));try{c=!1,o.send(_,C)}catch(e){if(c)throw e;C(-1,e)}}else C(-1,"No Transport");function C(t,i,n,s){var u,d,p,_,x,P=i;c||(c=!0,l&&e.clearTimeout(l),o=void 0,a=s||"",j.readyState=t>0?4:0,u=t>=200&&t<300||304===t,n&&(_=function(e,t,i){for(var n,o,r,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in s)if(s[o]&&s[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}a||(a=o)}r=r||a}if(r)return r!==l[0]&&l.unshift(r),i[r]}(f,j,n)),_=function(e,t,i,n){var o,r,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(r=c.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=c.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=u[l+" "+r]||u["* "+r]))for(o in u)if((s=o.split(" "))[1]===r&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[o]:!0!==u[o]&&(r=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}(f,_,j,u),u?(f.ifModified&&((x=j.getResponseHeader("Last-Modified"))&&(w.lastModified[r]=x),(x=j.getResponseHeader("etag"))&&(w.etag[r]=x)),204===t||"HEAD"===f.type?P="nocontent":304===t?P="notmodified":(P=_.state,d=_.data,u=!(p=_.error))):(p=P,!t&&P||(P="error",t<0&&(t=0))),j.status=t,j.statusText=(i||P)+"",u?m.resolveWith(g,[d,P,j]):m.rejectWith(g,[j,P,p]),j.statusCode(b),b=void 0,h&&v.trigger(u?"ajaxSuccess":"ajaxError",[j,f,u?d:p]),y.fireWith(g,[j,P]),h&&(v.trigger("ajaxComplete",[j,f]),--w.active||w.event.trigger("ajaxStop")))}return j},getJSON:function(e,t,i){return w.get(e,t,i,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,i,n,o){return g(i)&&(o=o||n,n=i,i=void 0),w.ajax(w.extend({url:e,type:t,dataType:o,data:i,success:n},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(i){w(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},zt=w.ajaxSettings.xhr();f.cors=!!zt&&"withCredentials"in zt,f.ajax=zt=!!zt,w.ajaxTransport(function(t){var i,n;if(f.cors||zt&&!t.crossDomain)return{send:function(o,r){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(a in o)s.setRequestHeader(a,o[a]);i=function(e){return function(){i&&(i=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(Ht[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=i(),n=s.onerror=s.ontimeout=i("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){i&&n()})},i=i("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){var t,i;if(e.crossDomain)return{send:function(o,r){t=w("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),n.head.appendChild(t[0])},abort:function(){i&&i()}}});var Vt,Bt=[],Wt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Bt.pop()||w.expando+"_"+wt++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,i,n){var o,r,a,s=!1!==t.jsonp&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Wt,"$1"+o):!1!==t.jsonp&&(t.url+=(_t.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||w.error(o+" was not called"),a[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){a=arguments},n.always(function(){void 0===r?w(e).removeProp(o):e[o]=r,t[o]&&(t.jsonpCallback=i.jsonpCallback,Bt.push(o)),a&&g(r)&&r(a[0]),a=r=void 0}),"script"}),f.createHTMLDocument=((Vt=n.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),w.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(f.createHTMLDocument?((o=(t=n.implementation.createHTMLDocument("")).createElement("base")).href=n.location.href,t.head.appendChild(o)):t=n),r=T.exec(e),a=!i&&[],r?[t.createElement(r[1])]:(r=me([e],t,a),a&&a.length&&w(a).remove(),w.merge([],r.childNodes)));var o,r,a},w.fn.load=function(e,t,i){var n,o,r,a=this,s=e.indexOf(" ");return s>-1&&(n=pt(e.slice(s)),e=e.slice(0,s)),g(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&w.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,a.html(n?w("<div>").append(w.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,r||[e.responseText,t,e])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,i){var n,o,r,a,s,l,u=w.css(e,"position"),c=w(e),h={};"static"===u&&(e.style.position="relative"),s=c.offset(),r=w.css(e,"top"),l=w.css(e,"left"),("absolute"===u||"fixed"===u)&&(r+l).indexOf("auto")>-1?(a=(n=c.position()).top,o=n.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),g(t)&&(t=t.call(e,i,w.extend({},s))),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+o),"using"in t?t.using.call(e,h):c.css(h)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,i,n=this[0];return n?n.getClientRects().length?{top:(t=n.getBoundingClientRect()).top+(i=n.ownerDocument.defaultView).pageYOffset,left:t.left+i.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],o={top:0,left:0};if("fixed"===w.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((o=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),o.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-w.css(n,"marginTop",!0),left:t.left-o.left-w.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||ye})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;w.fn[e]=function(n){return V(this,function(e,n,o){var r;if(v(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===o)return r?r[t]:e[n];r?r.scrollTo(i?r.pageXOffset:o,i?o:r.pageYOffset):e[n]=o},e,n,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=He(f.pixelPosition,function(e,i){if(i)return i=Ne(e,t),Me.test(i)?w(e).position()[t]+"px":i})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){w.fn[n]=function(o,r){var a=arguments.length&&(i||"boolean"!=typeof o),s=i||(!0===o||!0===r?"margin":"border");return V(this,function(t,i,o){var r;return v(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?w.css(t,i,s):w.style(t,i,o,s)},t,a?o:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),w.proxy=function(e,t){var i,n,o;if("string"==typeof t&&(i=e[t],t=e,e=i),g(e))return n=r.call(arguments,2),(o=function(){return e.apply(t||this,n.concat(r.call(arguments)))}).guid=e.guid=e.guid||w.guid++,o},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=S,w.isFunction=g,w.isWindow=v,w.camelCase=Z,w.type=b,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Ut=e.jQuery,Zt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Zt),t&&e.jQuery===w&&(e.jQuery=Ut),w},t||(e.jQuery=e.$=w),w}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?exports.diva=t(require("jquery")):e.diva=t(e.jQuery)}(this,function(e){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}return i.m=e,i.c=t,i.p="",i(0)}([function(e,t,i){i(1),e.exports=i(7)},function(e,t,i){var n=i(2);n.registerPlugin(i(6)),n.registerPlugin(i(42)),n.registerPlugin(i(43)),n.registerPlugin(i(44)),n.registerPlugin(i(45)),n.registerPlugin(i(46))},function(e,t,i){var n=i(3),o=i(4),r=i(5),a=e.exports={Events:new o,registerPlugin:function(e){r.register(e)},create:function(e,t){if(a.find(e))throw new Error("Diva is already initialized on "+(i=e,o=i.id?"#"+i.id:i.id,r=i.className?"."+i.className.split(/\s+/g).join("."):"",(o||i.tagName.toLowerCase())+r));var i,o,r,s=n(e);return s.diva(t),s.data("diva")},find:function(e){return n(e).data("diva")||null}}},function(t,i){t.exports=e},function(e,t){function i(){this._cache={}}e.exports=i,i.prototype.publish=function(e,t,i){if(this._cache[e]){var n=this._cache[e];if("undefined"!=typeof n.global)for(var o=n.global,r=o.length,a=0;a<r;a++)o[a].apply(i||null,t||[]);if(i&&"undefined"!=typeof i.getInstanceId){var s=i.getInstanceId();if(this._cache[e][s])for(var l=this._cache[e][s],u=l.length,c=0;c<u;c++)l[c].apply(i,t||[])}}},i.prototype.subscribe=function(e,t,i){return this._cache[e]||(this._cache[e]={}),"string"==typeof i?(this._cache[e][i]||(this._cache[e][i]=[]),this._cache[e][i].push(t)):(this._cache[e].global||(this._cache[e].global=[]),this._cache[e].global.push(t)),i?[e,t,i]:[e,t]},i.prototype.unsubscribe=function(e,t){var i=e[0];if(this._cache[i]){var n,o=3===e.length?e[2]:"global";if(!(n=this._cache[i][o]))return!1;if(t)return delete this._cache[i][o],n.length>0;for(var r=n.length;r--;)if(n[r]===e[1])return this._cache[i][o].splice(r,1),!0}return!1},i.prototype.unsubscribeAll=function(e){if(e)for(var t,i=Object.keys(this._cache),n=i.length;n--;)"undefined"!=typeof this._cache[t=i[n]][e]&&delete this._cache[t][e];else this._cache={}}},function(e,t){var i=[];e.exports={register:function(e){i.push(e)},getAll:function(){return i}}},function(e,t,i){var n,o,r=i(3),a=i(7);n=r,e.exports=(o={},{init:function(e,t){var i,r,s,l,u;function c(e){return Math.log(e)/Math.log(10)}t.startScrolling=function(){e.currentlyAutoScrolling?console.warn("You are trying to start autoscrolling, but it is already scrolling."):(n("#"+e.ID+"autoscroll-toggle").text("Turn off"),r&&t.disableScrollable(),e.currentlyAutoScrolling=!0,h())};var h=function(){clearInterval(e.autoScrollInterval),e.autoScrollInterval=e.verticallyOriented?setInterval(function(){e.viewportObject.scrollTop(e.viewportObject.scrollTop()+i)},s):setInterval(function(){e.viewportObject.scrollLeft(e.viewportObject.scrollLeft()+i)},s)};t.stopScrolling=function(){e.currentlyAutoScrolling?(n("#"+e.ID+"autoscroll-toggle").text("Turn on"),r&&t.enableScrollable(),e.currentlyAutoScrolling=!1,clearInterval(e.autoScrollInterval)):console.warn("You are trying to stop autoscrolling, but it is not currently active.")},t.toggleScrolling=function(){e.currentlyAutoScrolling?t.stopScrolling():t.startScrolling()},t.changeRefresh=function(e){s=e,d()},t.changeScrollSpeed=function(t){u=t,d(),n("#"+e.ID+"autoscroll-pps").val(c(u)),e.currentlyAutoScrolling&&h()};var d=function(){(i=u/(1e3/(s=l)))<1&&(i=u/(1e3/(s*=1/i)))};if(t.disableManualScroll=function(){r=!0,e.currentlyAutoScrolling&&t.disableScrollable()},t.enableManualScroll=function(){r=!1,e.currentlyAutoScrolling&&t.enableScrollable()},e.currentlyAutoScrolling=!1,e.autoScrollInterval="",r=e.disableManualScroll||!1,l=s=e.autoScrollRefresh||50,t.changeScrollSpeed(e.scrollSpeed||10),n(window).on("keyup",function(e){e.shiftKey&&32===e.keyCode&&t.toggleScrolling()}),!e.disableAutoscrollPrefs){var p=function(t){if(e.inFullscreen){var i=n(e.selector+"tools"),r=i.css("right");o.jqObj.css({right:r,"margin-right":0,top:i.offset().top+i.outerHeight()+15})}else o.jqObj.css({right:n(window).width()-(e.viewportObject.offset().left+e.viewportObject.outerWidth())+e.scrollbarWidth,"margin-right":".6em"}),o.jqObj.offset({top:e.viewportObject.offset().top+1})};a.Events.subscribe("ModeDidSwitch",p,e.ID),a.Events.subscribe("ViewerDidLoad",function(i){var r="<div id='"+e.ID+"autoscroll-prefs' class='diva-autoscroll-prefs diva-popup'><b>Autoscrolling options:</b><br><span class='diva-autoscroll-prefs-text'>Speed:</span><input type='range' id='"+e.ID+"autoscroll-pps' class='diva-autoscroll-pps diva-autoscroll-prefs-input' value='"+c(u)+"' min='0' max='3' step='0.1'><br><span class='diva-autoscroll-prefs-text'>Allow manual scroll:</span><input type='checkbox' id='"+e.ID+"autoscroll-manual' class='diva-autoscroll-manual diva-autoscroll-prefs-input' checked='checked'><br><button id='"+e.ID+"autoscroll-toggle' class='diva-autoscroll-prefs-toggle diva-autoscroll-prefs-input'> Turn on </button></div>";n("#"+e.ID+"page-nav").before("<div id='"+e.ID+"autoscroll-icon' class='diva-button diva-autoscroll-icon' title='Expand autoscroll options'></div>"),n("body").prepend(r),n("#"+e.ID+"autoscroll-pps").on("change",function(e){t.changeScrollSpeed(Math.pow(10,e.target.value))}),n("#"+e.ID+"autoscroll-manual").on("change",function(e){e.target.checked?t.enableManualScroll():t.disableManualScroll()}),n("#"+e.ID+"autoscroll-toggle").on("click",t.toggleScrolling),n("#"+e.ID+"autoscroll-icon").on("click",function(t){o.jqObj=n("#"+e.ID+"autoscroll-prefs"),"none"===o.jqObj.css("display")?(o.jqObj.css({display:"block"}),p()):o.jqObj.css("display","none")})},e.ID)}},pluginName:"autoscroll",titleText:"Automatically scrolls page along primary axis"})},function(e,t,i){var n,o,r=i(3),a=i(8),s=i(9),l=i(10),u=i(2),c=i(11),h=i(13),d=i(14);new l,e.exports=u,o=function(e,t){var i,o,r,l=this;t=n.extend({adaptivePadding:.05,arrowScrollAmount:40,blockMobileMove:!1,objectData:"",enableAutoTitle:!0,enableFilename:!0,enableFullscreen:!0,enableGotoPage:!0,enableGotoSuggestions:!0,enableGridIcon:!0,enableGridControls:"buttons",enableImageTitles:!0,enableKeyScroll:!0,enableLinkIcon:!0,enableNonPagedVisibilityIcon:!0,enableSpaceScroll:!1,enableToolbar:!0,enableZoomControls:"buttons",fillParentHeight:!0,fixedPadding:10,fixedHeightGrid:!0,goDirectlyTo:0,hashParamSuffix:null,iipServerURL:"",inFullscreen:!1,inBookLayout:!1,inGrid:!1,imageDir:"",maxPagesPerRow:8,maxZoomLevel:-1,minPagesPerRow:2,minZoomLevel:0,onGotoSubmit:null,pageAliases:{},pageAliasFunction:function(){return!1},pageLoadTimeout:200,pagesPerRow:5,showNonPagedPages:!1,throbberTimeout:100,tileHeight:256,tileWidth:256,toolbarParentObject:null,verticallyOriented:!0,viewportMargin:200,zoomLevel:1},t);var p=function(e){return f(i.manifest,e)},f=function(e,t){var i,n=e.pages.length;for(i=0;i<n;i++){if(!e.pages[i])return-1;if(e.pages[i].f===t)return i}return-1},g=function(e){return i.manifest.isPageValid(e,i.showNonPagedPages)},v=function(e){return r.viewerCore.reload(e)},m=function(e){switch(e){case"document":return v({inGrid:!1,inBookLayout:!1});case"book":return v({inGrid:!1,inBookLayout:!0});case"grid":return v({inGrid:!0});default:return!1}},y=function(){v({inFullscreen:!i.inFullscreen})},b=function(){var e;e=i.inGrid?"g":i.inBookLayout?"b":"d";var t=r.viewerCore.getCurrentLayout().getPageToViewportCenterOffset(i.currentPageIndex,o.viewport);return{f:i.inFullscreen,v:e,z:i.zoomLevel,n:i.pagesPerRow,i:!!i.enableFilename&&i.manifest.pages[i.currentPageIndex].f,p:!i.enableFilename&&i.currentPageIndex+1,y:!!t&&t.y,x:!!t&&t.x}},w=function(e,t){t=t||i.manifest;var n="v"in e?x(e.v):{};"f"in e&&(n.inFullscreen=e.f),"z"in e&&(n.zoomLevel=e.z),"n"in e&&(n.pagesPerRow=e.n);var o=f(t,e.i);if(o>=0&&o<t.pages.length||(o=e.p-1)>=0&&o<t.pages.length||(o=null),null!==o){var r=parseInt(e.x,10),a=parseInt(e.y,10);n.goDirectlyTo=o,n.horizontalOffset=r,n.verticalOffset=a}return n},_=function(){var e,t=b(),n=[];for(e in t)!1!==t[e]&&n.push(e+i.hashParamSuffix+"="+encodeURIComponent(t[e]));return n.join("&")},x=function(e){switch(e){case"d":return{inGrid:!1,inBookLayout:!1};case"b":return{inGrid:!1,inBookLayout:!0};case"g":return{inGrid:!0,inBookLayout:!1};default:return null}},P=function(e,t,n){var o=["Invalid objectData setting. Error code: "+e.status+" "+n];if(0===i.objectData.lastIndexOf("http",0)&&""===n){var s=i.objectData.replace(/https?:\/\//i,"").split(/[/?#]/)[0];location.hostname!==s&&o.push(a("p","Attempted to access cross-origin data without CORS."),a("p","You may need to update your server configuration to support CORS. For help, see the ",a("a",{href:"https://github.com/DDMAL/diva.js/wiki/Installation#a-note-about-cross-site-requests",target:"_blank"},"cross-site request documentation.")))}r.viewerCore.showError(o)},j=function(e,t){var n,o;!e.hasOwnProperty("@context")||-1===e["@context"].indexOf("iiif")&&-1===e["@context"].indexOf("shared-canvas")?(console.warn("Usage of IIP manifests is deprecated. Consider switching to IIIF manifests. Visit http://iiif.io/ for more information."),n=!1,o=c.fromLegacyManifest(e,{iipServerURL:i.iipServerURL,imageDir:i.imageDir})):(n=!0,u.Events.publish("ManifestDidLoad",[e],l),o=c.fromIIIF(e));var a=t?w(t,o):{};r.viewerCore.setManifest(o,n,a)},C=function(){return!!o.loaded||(console.warn("The viewer is not completely initialized. This is likely because it is still downloading data. To fix this, only call this function if the isReady() method returns true."),!1)};this.getItemTitle=function(){return i.manifest.itemTitle},this.gotoPageByNumber=function(e,t,i){console.warn("This method is deprecated. Consider using gotoPageByIndex(pageIndex, xAnchor, yAnchor) instead.");var n=parseInt(e,10)-1;return this.gotoPageByIndex(n,t,i)},this.gotoPageByIndex=function(e,t,i){if(e=parseInt(e,10),g(e)){var n=r.viewerCore.getXOffset(e,t),a=r.viewerCore.getYOffset(e,i);return o.renderer.goto(e,a,n),!0}return!1},this.getNumberOfPages=function(){return!!C()&&i.numPages},this.getPageDimensions=function(e){return C()?r.viewerCore.getCurrentLayout().getPageDimensions(e):null},this.getPageDimensionsAtZoomLevel=function(e,t){if(!C())return!1;t>i.maxZoomLevel&&(t=i.maxZoomLevel);var n=i.manifest.pages[parseInt(e,10)].d[parseInt(t,10)];return{width:n.w,height:n.h}},this.getPageDimensionsAtCurrentZoomLevel=function(e){if(e=g(e)?e:i.currentPageIndex,!g(e))throw new Error("Invalid Page Index");return r.viewerCore.getCurrentLayout().getPageDimensions(e)},this.getCurrentPageDimensionsAtCurrentZoomLevel=function(){return this.getPageDimensionsAtCurrentZoomLevel(i.currentPageIndex)},this.isReady=function(){return o.loaded},this.getCurrentPageIndex=function(){return i.currentPageIndex},this.getCurrentPageFilename=function(){return i.manifest.pages[i.currentPageIndex].f},this.getCurrentPageNumber=function(){return console.warn("This method is deprecated. Consider using getCurrentPageIndex() instead."),i.currentPageIndex+1},this.getFilenames=function(){for(var e=[],t=0;t<i.numPages;t++)e[t]=i.manifest.pages[t].f;return e},this.getZoomLevel=function(){return i.zoomLevel},this.getMaxZoomLevel=function(){return i.maxZoomLevel},this.getMaxZoomLevelForPage=function(e){return!!C&&i.manifest.pages[e].m},this.getMinZoomLevel=function(){return i.minZoomLevel},this.setZoomLevel=function(e){return i.inGrid&&v({inGrid:!1}),r.viewerCore.zoom(e)},this.getGridPagesPerRow=function(){return this.pagesPerRow},this.setGridPagesPerRow=function(e){return!!r.viewerCore.isValidOption("pagesPerRow",e)&&v({inGrid:!0,pagesPerRow:e})},this.zoomIn=function(){return this.setZoomLevel(i.zoomLevel+1)},this.zoomOut=function(){return this.setZoomLevel(i.zoomLevel-1)},this.isRegionInViewport=function(e,t,i,n,a){var s=r.viewerCore.getCurrentLayout();if(!s)return!1;var l=s.getPageOffset(e),u=l.top+i,c=l.left+t;return o.viewport.intersectsRegion({top:u,bottom:u+a,left:c,right:c+n})},this.isPageInViewport=function(e){return o.renderer.isPageVisible(e)},this.isPageLoaded=function(e){return console.warn("This method is deprecated. Consider using isPageInViewport(pageIndex) instead."),this.isPageInViewport(e)},this.toggleFullscreenMode=function(){y()},this.toggleNonPagedPagesVisibility=function(){v({showNonPagedPages:!i.showNonPagedPages})},this.showNonPagedPages=function(){v({showNonPagedPages:!0})},this.hideNonPagedPages=function(){v({showNonPagedPages:!1})},this.closePopups=function(){r.toolbar.closePopups()},this.enterFullscreenMode=function(){return!i.inFullscreen&&(y(),!0)},this.leaveFullscreenMode=function(){return!!i.inFullscreen&&(y(),!0)},this.isInFullscreen=function(){return i.inFullscreen},this.changeView=function(e){return m(e)},this.enterGridView=function(){return!i.inGrid&&(m("grid"),!0)},this.leaveGridView=function(){return!!i.inGrid&&(v({inGrid:!1}),!0)},this.gotoPageByName=function(e,t,i){var n=p(e);return this.gotoPageByIndex(n,t,i)},this.gotoPageByLabel=function(e,t,n){for(var o=i.manifest.pages,r=0,a=o.length;r<a;r++)if(o[r].l.toLowerCase().indexOf(e.toLowerCase())>-1)return this.gotoPageByIndex(r,t,n);var s=parseInt(e,10)-1;return this.gotoPageByIndex(s,t,n)},this.getPageIndex=function(e){return p(e)},this.getCurrentURL=function(){return location.protocol+"//"+location.host+location.pathname+location.search+"#"+_()},this.isPageIndexValid=function(e){return g(e)},this.getURLHash=function(){return _()},this.getState=function(){return b()},this.setState=function(e){v(w(e))},this.getInstanceSelector=function(){return i.selector},this.getInstanceId=function(){return i.ID},this.getSettings=function(){return i},this.translateFromMaxZoomLevel=function(e){return e/Math.pow(2,i.maxZoomLevel-i.zoomLevel)},this.translateToMaxZoomLevel=function(e){var t=i.maxZoomLevel-i.zoomLevel;return 0===t?e:e*Math.pow(2,t)},this.enableScrollable=function(){r.viewerCore.enableScrollable()},this.disableScrollable=function(){r.viewerCore.disableScrollable()},this.toggleOrientation=function(){return v({inGrid:!1,verticallyOriented:e=!i.verticallyOriented,goDirectlyTo:i.currentPageIndex,verticalOffset:r.viewerCore.getYOffset(),horizontalOffset:r.viewerCore.getXOffset()}),e;var e},this.getPageOffset=function(e,t){var i=r.viewerCore.getPageRegion(e,t);return{top:i.top,left:i.left}},this.getCurrentPageOffset=function(){return this.getPageOffset(i.currentPageIndex)},this.getPageDimensionsAtCurrentGridLevel=function(e){return console.warn("This method is deprecated. Consider using getPageDimensionsAtCurrentZoomLevel(pageIndex) instead."),this.getPageDimensionsAtCurrentZoomLevel(e)},this.getPageIndexForPageXYValues=function(e,t){var i=o.outerElement.getBoundingClientRect(),n=i.top,r=i.bottom;if(e<i.left||e>i.right)return-1;if(t<n||t>r)return-1;for(var a=document.getElementsByClassName("diva-page"),s=a.length;s--;){var l=a[s],u=l.getBoundingClientRect();if(!(e<u.left||e>u.right||t<u.top||t>u.bottom))return l.getAttribute("data-index")}return-1},this.getPageImageURL=function(e,t){return i.manifest.getPageImageURL(e,t)},this.isVerticallyOriented=function(){return i.verticallyOriented},this.changeObject=function(e){o.loaded=!1,r.viewerCore.clear(),o.renderer&&o.renderer.destroy(),o.options.objectData=e,"object"!=typeof e?(o.throbberTimeoutID=setTimeout(function(){n(i.selector+"throbber").show()},i.throbberTimeout),n.ajax({url:i.objectData,cache:!0,dataType:"json",error:P,success:function(e){j(e)}})):setTimeout(function(){j(e)})},this.activate=function(){o.isActiveDiva=!0},this.deactivate=function(){o.isActiveDiva=!1},this.destroy=function(){r.viewerCore.destroy()},this.__addPageOverlay=function(e){r.viewerCore.addPageOverlay(e)},this.__removePageOverlay=function(e){r.viewerCore.removePageOverlay(e)},this.getAliasForPageIndex=function(e){var t=parseInt(e,10);return i.pageAliases[t]||i.pageAliasFunction(t)||t+1},this.getPageIndexForAlias=function(e){for(var t=0;t<i.numPages;t++)if(this.getAliasForPageIndex(t)===e)return t;return!1},this.getPageIndicesForAlias=function(e){for(var t=[],n=0;n<i.numPages;n++)this.getAliasForPageIndex(n)===e&&t.push(n);return t},this.getCurrentAliasedPageIndex=function(){return this.getAliasForPageIndex(i.currentPageIndex)},this.gotoPageByAliasedNumber=function(e,t,i){return this.gotoPageByIndex(this.getPageIndexForAlias(e),t,i)},function(){var u=a("div",{class:"diva-wrapper"+(t.fillParentHeight?" diva-wrapper-flexbox":"")});e.appendChild(u),t.toolbarParentObject=t.toolbarParentObject||n(u);var c=new d(u,t,l);o=c.getInternalState(),i=c.getSettings(),u.id=i.ID+"wrapper",r={viewerCore:c,toolbar:i.enableToolbar?h(l):null};var p,f=(p={},["f","v","z","n","i","p","y","x"].forEach(function(e){var t=s.get(e+i.hashParamSuffix);!1!==t&&(p[e]=t)}),"true"===p.f?p.f=!0:"false"===p.f&&(p.f=!1),["z","n","p","x","y"].forEach(function(e){e in p&&(p[e]=parseInt(p[e],10))}),p);if("object"==typeof i.objectData)setTimeout(function(){j(i.objectData,f)},0);else{var g=n.ajax({url:i.objectData,cache:!0,dataType:"json",error:P,success:function(e){j(e,f)}});c.setPendingManifestRequest(g)}}()},(n=r).fn.diva=function(e){return this.each(function(){var t=n(this);if(!t.data("diva")){if(!document.body.contains(this))throw new Error("Diva could not be initialized because this element is not attached to the DOM");var i=new o(this,e);t.data("diva",i)}})}},function(e,t){function i(e,t){if(null!=t)if("object"!=typeof t&&"function"!=typeof t)e.appendChild(document.createTextNode(t));else if(t instanceof window.Node)e.appendChild(t);else if(t instanceof Array)for(var o=t.length,r=0;r<o;r++)i(e,t[r]);else n(e,t)}function n(e,t){for(var i in t)t.hasOwnProperty(i)&&("style"===i?o(e,t.style):e.setAttribute(i,t[i]))}function o(e,t){if(t)if("object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i]);else e.style.cssText=t}e.exports=function(e){for(var t=document.createElement(e),n=Array.prototype.slice.call(arguments,1);n.length;)i(t,n.shift());return t},e.exports.setAttributes=n},function(e,t){function i(e){var t=window.location.hash;if(""!==t){var i=t.indexOf("&"+e+"=")>0?t.indexOf("&"+e+"="):t.indexOf("#"+e+"=");if(i>=0){var n=t.indexOf("&",i+=e.length+2);return n>i?decodeURIComponent(t.substring(i,n)):n<0?decodeURIComponent(t.substring(i)):""}return!1}return!1}e.exports.get=i,e.exports.update=function(e,t){var n=i(e),o=window.location.hash;if(n!==t)if("string"==typeof n){var r=o.indexOf("&"+e+"=")>0?o.indexOf("&"+e+"="):o.indexOf("#"+e+"="),a=r+e.length+2+n.length,s=0===r?"#":"&";window.location.replace(o.substring(0,r)+s+e+"="+t+o.substring(a))}else 0===o.length?window.location.replace("#"+e+"="+t):window.location.replace(o+"&"+e+"="+t)}},function(e,t,i){var n,o=i(3),r=(n=o,function(){var e;n(document).on("click",function(e){t(n(e.target))});var t=function(t){var i,o,r=t.find(".diva-outer"),a=t.closest(".diva-outer"),s=document.getElementsByClassName("diva-outer"),l=s.length;if(r.length>0)i=r;else{if(!(a.length>0)){for(o=0;o<l;o++)n(s[o].parentElement.parentElement).data("diva").deactivate();return}i=a}for(i.parent().parent().data("diva").activate(),e=i.parent(),s=document.getElementsByClassName("diva-outer"),o=0;o<l;o++)s[o].getAttribute("id")!=i.attr("id")&&n(s[o].parentElement.parentElement).data("diva").deactivate()};this.getActive=function(){return e}});e.exports=r},function(e,t,i){var n=i(12);function o(e,t){this.pages=e.pgs,this.maxZoom=e.max_zoom,this.maxRatio=e.dims.max_ratio,this.minRatio=e.dims.min_ratio,this.itemTitle=e.item_title,this.paged=!!e.paged,this._maxWidths=e.dims.max_w,this._maxHeights=e.dims.max_h,this._averageWidths=e.dims.a_wid,this._averageHeights=e.dims.a_hei,this._totalHeights=e.dims.t_hei,this._totalWidths=e.dims.t_wid,this._urlAdapter=t}function r(e){return function(t){return this[e][t]}}function a(){}function s(e){this._config=e}e.exports=o,o.fromIIIF=function(e){return new o(n(e),new a)},o.fromLegacyManifest=function(e,t){for(var i=0,n=e.pgs.length;i<n;i++)e.pgs[i].l=(i+1).toString();return new o(e,new s(t))},o.prototype.isPageValid=function(e,t){return!(!t&&this.paged&&!this.pages[e].paged)&&e>=0&&e<this.pages.length},o.prototype.getMaxPageDimensions=function(e){var t=this.pages[e].d[this.maxZoom];return{height:t.h,width:t.w}},o.prototype.getPageDimensionsAtZoomLevel=function(e,t){var i=this.pages[e].d[this.maxZoom],n=1/Math.pow(2,this.maxZoom-t);return{height:i.h*n,width:i.w*n}},o.prototype.getPageImageURL=function(e,t){return this._urlAdapter.getPageImageURL(this,e,t)},o.prototype.getPageImageTiles=function(e,t,i){var n=this.pages[e];if(!isFinite(t)||t%1!=0)throw new TypeError("Zoom level must be an integer: "+t);var o,r,a,s=Math.ceil(n.d[t].h/i.height),l=Math.ceil(n.d[t].w/i.width),u=[];for(o=0;o<s;o++)for(r=0;r<l;r++)a=this._urlAdapter.getTileImageURL(this,e,{row:o,col:r,rowCount:s,colCount:l,zoomLevel:t,tileDimensions:i}),u.push({row:o,col:r,zoomLevel:t,dimensions:{height:i.height,width:i.width},offset:{top:o*i.height,left:r*i.width},url:a});return{zoomLevel:t,rows:s,cols:l,tiles:u}},o.prototype.getMaxWidth=r("_maxWidths"),o.prototype.getMaxHeight=r("_maxHeights"),o.prototype.getAverageWidth=r("_averageWidths"),o.prototype.getAverageHeight=r("_averageHeights"),o.prototype.getTotalWidth=r("_totalWidths"),o.prototype.getTotalHeight=r("_totalHeights"),a.prototype.getPageImageURL=function(e,t,i){var n=e.pages[t];return encodeURI(n.url+"full/"+(!i||null==i.width&&null==i.height?"full":(null==i.width?"":i.width)+","+(null==i.height?"":i.height))+"/0/"+(n.api>1.1?"default":"native")+".jpg")},a.prototype.getTileImageURL=function(e,t,i){var n,o,r=e.pages[t];n=i.row===i.rowCount-1?r.d[i.zoomLevel].h-(i.rowCount-1)*i.tileDimensions.height:i.tileDimensions.height,o=i.col===i.colCount-1?r.d[i.zoomLevel].w-(i.colCount-1)*i.tileDimensions.width:i.tileDimensions.width;var a=Math.pow(2,e.maxZoom-i.zoomLevel),s=i.col*i.tileDimensions.width*a,l=i.row*i.tileDimensions.height*a;r.hasOwnProperty("xoffset")&&(s+=r.xoffset,l+=r.yoffset);var u=[s,l,o*a,n*a].join(",");return encodeURI(r.url+u+"/"+o+","+n+"/0/"+(r.api>1.1?"default":"native")+".jpg")},s.prototype.getPageImageURL=function(e,t,i){var n="";return i&&(null!=i.width&&(n+="&WID="+i.width),null!=i.height&&(n+="&HEI="+i.height)),this._config.iipServerURL+"?FIF="+this._config.imageDir+"/"+e.pages[t].f+n+"&CVT=JPEG"},s.prototype.getTileImageURL=function(e,t,i){var n=e.pages[t];return encodeURI(this._config.iipServerURL+"?FIF="+this._config.imageDir+"/"+n.f+"&JTL="+(i.zoomLevel+n.m-e.maxZoom)+","+(i.row*i.colCount+i.col)+"&CVT=JPEG")}},function(e,t){"use strict";e.exports=function(e){for(var t,a,s,l,u,c,h,d,p,f,g,v,m,y,b,w,_,x=e.sequences[0],P=x.canvases,j=P.length,C=new Array(P.length),k=100,S=0,T=100,E=0;E<j;E++){var L=P[E];if(0!==L.width&&0!==L.height){var O=L.width,D=L.height,I=i(O,D),A=O/D;S=Math.max(A,S),T=Math.min(A,T),k=Math.min(k,I)}}for(var R=new Array(k+1).fill(0),M=new Array(k+1).fill(0),F=new Array(k+1).fill(0),q=new Array(k+1).fill(0),N=0;N<j;N++)if(v=(t=P[N])["@id"],t.images&&0!==t.images.length){m=t.label,s="oa:Choice"===(a=t.images[0].resource)["@type"]?a.default:a,g=i(p=t.width||s.width,f=t.height||s.height),a.item&&(l=o(a.item,k,p,f)),y=s.label||null,c="/"!==(h=r(s)).url.slice(-1)?h.url+"/":h.url,d="http://iiif.io/api/image/2/context.json"===(u=s.service["@context"])?2:"http://library.stanford.edu/iiif/image-api/1.1/context.json"===u?1.1:1,b=new Array(k+1);for(var H=0;H<k+1;H++){w=Math.floor(n(p,k-H)),_=Math.floor(n(f,k-H)),b[H]={h:_,w:w};var z=M[H]+_;R[H]=R[H]+w,M[H]=z,F[H]=Math.max(w,F[H]),q[H]=Math.max(_,q[H])}C[N]={d:b,m:g,l:m,il:y,f:c,url:c,api:d,paged:"non-paged"!==t.viewingHint,facingPages:"facing-pages"===t.viewingHint,canvas:v,otherImages:l,xoffset:h.x||null,yoffset:h.y||null}}else console.warn("An empty canvas was found: "+v);for(var V=new Array(k+1).fill(0),B=new Array(k+1).fill(0),W=0;W<k+1;W++)V[W]=R[W]/j,B[W]=M[W]/j;return{item_title:e.label,dims:{a_wid:V,a_hei:B,max_w:F,max_h:q,max_ratio:S,min_ratio:T,t_hei:M,t_wid:R},max_zoom:k,pgs:C,pages:"paged"===e.viewingHint||"paged"===x.viewingHint}};var i=function(e,t){var i=Math.max(e,t);return Math.ceil(Math.log((i+1)/257)/Math.log(2))},n=function(e,t){return e/Math.pow(2,t)},o=function(e,t,i,o){return e.map(function(e){for(var r=e.width||i,a=e.height||o,s=new Array(t+1),l=0;l<t+1;l++)s[l]={h:Math.floor(n(a,t-l)),w:Math.floor(n(r,t-l))};return{label:e.label||"",dims:s}})};function r(e){var t=e["@id"],i=/#xywh=([0-9]+,[0-9]+,[0-9]+,[0-9]+)/,n="",o=!0;if(/\/([0-9]+,[0-9]+,[0-9]+,[0-9]+)\//.test(t)){var r=t.split("/");n=r[r.length-4]}else i.test(t)?n=i.exec(t)[1]:e.service&&e.service["@id"]&&(t=e.service["@id"],o=!1);o&&(t=t.split("/").slice(0,-4).join("/"));var a={url:t};if(n.length){var s=n.split(",");a.x=parseInt(s[0],10),a.y=parseInt(s[1],10),a.w=parseInt(s[2],10),a.h=parseInt(s[3],10)}return a}},function(e,t,i){var n=i(3),o=i(2),r=i(8);e.exports=function(e){var t=e.getSettings(),i=function(e,i){var o={id:t.ID+e,class:"diva-"+e};return i?n.extend(o,i):o},a=function(e,i){o.Events.subscribe(e,i,t.ID)},s=function(e,i,n){var o=r("button",{type:"button",id:t.ID+e,class:"diva-"+e+" diva-button",title:i});return n&&o.addEventListener("click",n,!1),o},l=function(e){return function(){var i;switch(t[e.controllerSetting]){case"slider":i=e.createSlider();break;case"buttons":i=e.createButtons();break;default:return null}var n=r("span",i,e.createLabel()),o=function(){n.style.display=t.inGrid===e.showInGrid?"inline":"none"};return a("ViewDidSwitch",o),a("ObjectDidLoad",o),o(),n}},u=l({controllerSetting:"enableZoomControls",showInGrid:!1,createSlider:function(){var i=h("zoom-slider",{step:.1,value:t.zoomLevel,min:t.minZoomLevel,max:t.maxZoomLevel}),o=n(i);o.on("input",function(){var t=parseFloat(this.value);e.setZoomLevel(t)}),o.on("change",function(){var i=parseFloat(this.value);i!==t.zoomLevel&&e.setZoomLevel(i)});var s=function(){t.zoomLevel!==o.val()&&o.val(t.zoomLevel)};return a("ZoomLevelDidChange",s),a("ViewerDidLoad",function(){r.setAttributes(i,{min:t.minZoomLevel,max:t.maxZoomLevel}),s()}),i},createButtons:function(){return r("span",s("zoom-out-button","Zoom Out",function(){e.setZoomLevel(t.zoomLevel-1)}),s("zoom-in-button","Zoom In",function(){e.setZoomLevel(t.zoomLevel+1)}))},createLabel:function(){var e=d("diva-zoom-label","zoom-label","","zoom-level",t.zoomLevel),i=n(e).find(t.selector+"zoom-level")[0],o=function(){i.textContent=t.zoomLevel.toFixed(2)};return a("ZoomLevelDidChange",o),a("ViewerDidLoad",o),e}}),c=l({controllerSetting:"enableGridControls",showInGrid:!0,createSlider:function(){var i=h("grid-slider",{value:t.pagesPerRow,min:t.minPagesPerRow,max:t.maxPagesPerRow}),o=n(i);return o.on("input",function(){var t=parseInt(i.value,10);e.setGridPagesPerRow(t)}),o.on("change",function(){var n=parseInt(i.value,10);n!==t.pagesPerRow&&e.setGridPagesPerRow(n)}),a("GridRowNumberDidChange",function(){t.pagesPerRow!==o.val()&&o.val(t.pagesPerRow)}),i},createButtons:function(){return r("span",s("grid-out-button","Zoom Out",function(){e.setGridPagesPerRow(t.pagesPerRow-1)}),s("grid-in-button","Zoom In",function(){e.setGridPagesPerRow(t.pagesPerRow+1)}))},createLabel:function(){var e=d("diva-grid-label","grid-label","Pages per row: ","pages-per-row",t.pagesPerRow),i=n(e).find(t.selector+"pages-per-row")[0];return a("GridRowNumberDidChange",function(){i.textContent=t.pagesPerRow}),e}}),h=function(e,i){return r("input",i,{id:t.ID+e,class:"diva-"+e+" diva-slider",type:"range"})},d=function(e,i,n,o,a){return r("div",{id:t.ID+i,class:e+" diva-label"},[n,r("span",{id:t.ID+o},a)])};return function(){var o,l,h,d,p,f,g,v,m,y,b=[u(),c()],w=[(o=t.enableGotoPage?(h=r("input",{id:t.ID+"goto-page-input",class:"diva-input diva-goto-page-input",autocomplete:"off",type:"text"}),d=r("input",{id:t.ID+"goto-page-submit",class:"diva-button diva-button-text",type:"submit",value:"Go"}),p=r("div",{id:t.ID+"input-suggestions",class:"diva-input-suggestions"}),f=r("form",{id:t.ID+"goto-page",class:"diva-goto-form"},h,d,p),n(f).on("submit",function(){var i=h.value;if(t.onGotoSubmit&&"function"==typeof t.onGotoSubmit){var n=t.onGotoSubmit(i);e.gotoPageByIndex(n)||alert("No page could be found with that label or page number")}else e.gotoPageByLabel(i)||alert("No page could be found with that label or page number");return p.style.display="none",!1}),n(h).on("input focus",function(){p.innerHTML="";var e=h.value,i=0;if(t.enableGotoSuggestions&&e){for(var n=t.manifest.pages,o=0,a=n.length;o<a&&i<10;o++)if(n[o].l.toLowerCase().indexOf(e.toLowerCase())>-1){var s=r("div",{class:"diva-input-suggestion"},n[o].l);p.appendChild(s),i++}i>0&&(p.style.display="block")}else p.style.display="none"}),n(h).on("keydown",function(e){var t;if(13===e.keyCode){var i=n(".active",p);i.length&&(h.value=i.text())}if(38===e.keyCode){var o=(t=n(".active",p)).prev();o.length?(t.removeClass("active"),o.addClass("active")):(t.removeClass("active"),n(".diva-input-suggestion:last",p).addClass("active"))}else if(40===e.keyCode){var r=(t=n(".active",p)).next();r.length?(t.removeClass("active"),r.addClass("active")):(t.removeClass("active"),n(".diva-input-suggestion:first",p).addClass("active"))}}),n(p).on("mousedown",".diva-input-suggestion",function(){h.value=this.textContent,p.style.display="none",n(h).trigger("submit")}),n(h).on("blur",function(){p.style.display="none"}),f):null,r("span",i("page-nav"),function(){var i=r("span",{id:t.ID+"current-page"}),n=function(){i.textContent=e.getCurrentAliasedPageIndex()};a("VisiblePageDidChange",n),a("ViewerDidLoad",n);var o=r("span",{id:t.ID+"num-pages"}),s=function(){o.textContent=t.numPages};return a("NumberOfPagesDidChange",s),a("ObjectDidLoad",s),r("span",{class:"diva-page-label diva-label"},i," of ",o)}(),o)),(l=[function(){var o=r("div",i("view-options")),l=s("view-icon","Change view",function(){n(o).toggle()});n(document).mouseup(function(e){var i=n(o);i.is(e.target)||0!==i.has(e.target).length||e.target.id===t.ID+"view-icon"||i.hide()});var u=function(t){e.changeView(t),n(o).hide()},c=function(){var e=" diva-view-icon diva-button";l.className=t.inGrid?"diva-grid-icon"+e:t.inBookLayout?"diva-book-icon"+e:"diva-document-icon"+e;var i=document.createDocumentFragment();for((t.inGrid||t.inBookLayout)&&i.appendChild(s("document-icon","Document View",u.bind(null,"document"))),!t.inGrid&&t.inBookLayout||i.appendChild(s("book-icon","Book View",u.bind(null,"book"))),t.inGrid||i.appendChild(s("grid-icon","Grid View",u.bind(null,"grid")));o.firstChild;)o.removeChild(o.firstChild);o.appendChild(i)};return a("ViewDidSwitch",c),a("ObjectDidLoad",c),r("div",i("view-menu"),l,o)}()],t.enableLinkIcon&&l.push((m=s("link-icon","Link to this page"),y=n(m),y.on("click",function(){if(n("body").prepend(r("div",{id:t.ID+"link-popup",class:"diva-popup diva-link-popup"},[r("input",{id:t.ID+"link-popup-input",class:"diva-input",type:"text",value:e.getCurrentURL()})])),t.inFullscreen)n(t.selector+"link-popup").addClass("in-fullscreen");else{var i=y.offset().left-222+y.outerWidth(),o=y.offset().top+y.outerHeight()-1;n(t.selector+"link-popup").css({top:o+"px",left:i+"px"})}return n("body").mouseup(function(e){var i=e.target.id;i!==t.ID+"link-popup"&&i!==t.ID+"link-popup-input"&&n(t.selector+"link-popup").remove()}),t.viewportObject.scroll(function(){n(t.selector+"link-popup").remove()}),n(t.selector+"link-popup input").click(function(){n(this).focus().select()}),!1}),m)),t.enableNonPagedVisibilityIcon&&l.push((g=function(){return"toggle-nonpaged-icon"+(e.getSettings().showNonPagedPages?"-active":"")},v=s(g(),"Toggle visibility of non-paged pages",function(){e.toggleNonPagedPagesVisibility();var t="diva-"+g();this.className=this.className.replace(/diva-toggle-nonpaged-icon(-active)?/,t)}),a("ObjectDidLoad",function(){for(var e=t.manifest.pages,i=0;i<e.length;i++)if(t.manifest.paged&&!e[i].paged)return void(v.style.display="inline-block");v.style.display="none"}),v)),t.enableFullscreen&&l.push(s("fullscreen-icon","Toggle fullscreen mode",function(){e.toggleFullscreenMode()})),r("span",i("toolbar-button-group"),l))],_=r("div",i("tools"),r("div",i("tools-left"),b),r("div",i("tools-right"),w));t.toolbarParentObject.prepend(_);var x=function(){var e=document.getElementById(t.ID+"tools-right"),i=document.getElementById(t.ID+"page-nav");t.inFullscreen?(n(_).addClass("diva-fullscreen-tools"),e.removeChild(i),e.appendChild(i)):(n(_).removeClass("diva-fullscreen-tools"),e.removeChild(i),e.insertBefore(i,e.firstChild))};return a("ModeDidSwitch",x),a("ViewerDidLoad",x),{element:_,closePopups:function(){n(".diva-popup").css("display","none")}}}()}},function(e,t,i){var n=i(3);i(15);var o=i(8),r=i(16),a=i(17),s=i(2),l=i(18),u=i(22),c=i(23),h=i(5),d=i(24),p=i(34),f=i(39),g=i(40),v=i(41),m=i(25)("diva:ViewerCore");e.exports=function(e,t,i){var w=this,_=n(e),x={currentPageIndex:0,horizontalOffset:0,horizontalPadding:0,ID:null,initialKeyScroll:!1,initialSpaceScroll:!1,innerElement:null,innerObject:{},isActiveDiva:!0,isIIIF:!1,isScrollable:!0,isZooming:!1,loaded:!1,manifest:null,mobileWebkit:!1,numPages:0,oldZoomLevel:-1,options:t,outerElement:null,outerObject:{},pageOverlays:new c,pageTools:[],parentObject:_,pendingManifestRequest:null,plugins:[],renderer:null,resizeTimer:-1,scrollbarWidth:0,selector:"",throbberTimeoutID:-1,toolbar:null,verticalOffset:0,verticalPadding:0,viewHandler:null,viewport:null,viewportElement:null,viewportObject:null},P=f([t,x]);Object.defineProperties(P,{panelHeight:{get:function(){return x.viewport.height}},panelWidth:{get:function(){return x.viewport.width}}});var j=new g({additionalProperties:[{key:"manifest",get:function(){return x.manifest}}],validations:y}),C=function(e,t){return j.isValid(e,t,x.options)},k=function(e,t){var i={id:P.ID+e,class:"diva-"+e};return t?n.extend(i,t):i},S=function(e,t){return P.manifest.pages[e].d[P.zoomLevel][t]},T=function(){x.viewport.top=0,clearTimeout(x.resizeTimer)},E=function(e){var t=[];if(e=j.getValidatedOptions(P,e),L(e,"zoomLevel")&&(x.oldZoomLevel=P.zoomLevel,x.options.zoomLevel=e.zoomLevel,t.push(["ZoomLevelDidChange",e.zoomLevel])),L(e,"pagesPerRow")&&(x.options.pagesPerRow=e.pagesPerRow,t.push(["GridRowNumberDidChange",e.pagesPerRow])),L(e,"verticallyOriented")&&(x.options.verticallyOriented=e.verticallyOriented),L(e,"showNonPagedPages")&&(x.options.showNonPagedPages=e.showNonPagedPages),"goDirectlyTo"in e?(x.options.goDirectlyTo=e.goDirectlyTo,"verticalOffset"in e&&(x.verticalOffset=e.verticalOffset),"horizontalOffset"in e&&(x.horizontalOffset=e.horizontalOffset)):x.options.goDirectlyTo=P.currentPageIndex,(L(e,"inGrid")||L(e,"inBookLayout"))&&("inGrid"in e&&(x.options.inGrid=e.inGrid),"inBookLayout"in e&&(x.options.inBookLayout=e.inBookLayout),t.push(["ViewDidSwitch",P.inGrid])),L(e,"inFullscreen")&&(x.options.inFullscreen=e.inFullscreen,O(e),t.push(["ModeDidSwitch",P.inFullscreen])),T(),D(),x.renderer){var i={pageLayouts:p(P),padding:R(),maxZoomLevel:P.inGrid?null:x.manifest.maxZoom,verticallyOriented:P.verticallyOriented||P.inGrid},n={zoomLevel:P.inGrid?null:P.zoomLevel,anchorPage:P.goDirectlyTo,verticalOffset:x.verticalOffset,horizontalOffset:x.horizontalOffset},o=A();if(m.enabled){var r=Object.keys(i).filter(function(e){return"pageLayouts"!==e&&"padding"!==e}).map(function(e){return e+": "+JSON.stringify(i[e])}).join(", ");m("reload with %s",r)}x.renderer.load(i,n,o)}return t.forEach(function(e){G.apply(null,e)}),!0},L=function(e,t){return t in e&&e[t]!==P[t]},O=function(e){var t=e.inFullscreen?"addClass":"removeClass";x.outerObject[t]("diva-fullscreen"),n("body")[t]("diva-hide-scrollbar"),P.parentObject[t]("diva-full-width");var i=P.panelHeight,o=P.panelWidth;if(x.viewport.invalidate(),!(x.loaded||P.inGrid||"verticalOffset"in e)){var r=P.panelWidth;x.verticalOffset+=(i-P.panelHeight)/2,x.horizontalOffset+=(o-r)/2}e.inFullscreen?n(document).on("keyup",F):n(document).off("keyup",F)},D=function(){var e=P.inGrid?u:l;!x.viewHandler||x.viewHandler instanceof e||(x.viewHandler.destroy(),x.viewHandler=null),x.viewHandler||(x.viewHandler=new e(w)),x.renderer||I()},I=function(){var e=d.getCompatibilityErrors();e?Z(e):x.renderer=new d({viewport:x.viewport,outerElement:x.outerElement,innerElement:x.innerElement},{onViewWillLoad:function(){x.viewHandler.onViewWillLoad()},onViewDidLoad:function(){M(),x.viewHandler.onViewDidLoad()},onViewDidUpdate:function(e,t){M(),x.viewHandler.onViewDidUpdate(e,t)},onViewDidTransition:function(){M()},onPageWillLoad:function(e){G("PageWillLoad",e)}})},A=function(){if(P.inGrid){var e={getAllZoomLevelsForPage:function(t){return[e.getBestZoomLevelForPage(t)]},getBestZoomLevelForPage:function(e){return{zoomLevel:1,rows:1,cols:1,tiles:[{url:P.manifest.getPageImageURL(e.index,{width:e.dimensions.width}),zoomLevel:1,row:0,col:0,dimensions:e.dimensions,offset:{top:0,left:0}}]}}};return e}var t={width:P.tileWidth,height:P.tileHeight};return{getBestZoomLevelForPage:function(e){return P.manifest.getPageImageTiles(e.index,Math.ceil(P.zoomLevel),t)},getAllZoomLevelsForPage:function(e){for(var i=[],n=x.manifest.maxZoom,o=0;o<=n;o++)i.push(P.manifest.getPageImageTiles(e.index,o,t));return i.reverse(),i}}},R=function(){var e,t,i,n;return P.inGrid?(i=P.fixedPadding,e=t=n=0):(e=P.verticallyOriented?x.verticalPadding:0,t=P.verticallyOriented?0:x.horizontalPadding,i=P.verticallyOriented?0:x.verticalPadding,n=P.verticallyOriented?x.horizontalPadding:0),{document:{top:i,bottom:i,left:n,right:n},page:{top:e,bottom:0,left:t,right:0}}},M=function(){x.pageOverlays.updateOverlays(x.renderer.getRenderedPages())},F=function(e){27==e.keyCode&&E({inFullscreen:!P.inFullscreen})},q=function(e,t){return e="undefined"==typeof e?P.currentPageIndex:e,"center"===t||"centre"===t?parseInt(S(e,"h")/2,10):"bottom"===t?parseInt(S(e,"h")-P.panelHeight/2,10):parseInt(P.panelHeight/2,10)},N=function(e,t){return e="undefined"==typeof e?P.currentPageIndex:e,"left"===t?parseInt(P.panelWidth/2,10):"right"===t?parseInt(S(e,"w")-P.panelWidth/2,10):parseInt(S(e,"w")/2,10)},H=function(){return x.viewport.invalidate(),x.renderer&&(z(),x.renderer.goto(P.currentPageIndex,x.verticalOffset,x.horizontalOffset)),!0},z=function(){var e=x.renderer.layout.getPageToViewportCenterOffset(P.currentPageIndex,x.viewport);e&&(x.horizontalOffset=e.x,x.verticalOffset=e.y)},V=function(){x.viewportObject.dragscrollable({dragSelector:".diva-dragger",acceptPropagatedEvent:!0}),x.innerObject.dragscrollable({dragSelector:".diva-dragger",acceptPropagatedEvent:!0}),a.onDoubleClick(x.viewportObject,function(e,t){m("Double click at %s, %s",t.left,t.top),x.viewHandler.onDoubleClick(e,t)})},B=function(){H(),clearTimeout(x.resizeTimer),x.resizeTimer=setTimeout(function(){var e=x.renderer.layout.getPageToViewportCenterOffset(P.currentPageIndex,x.viewport);E(e?{goDirectlyTo:P.currentPageIndex,verticalOffset:e.y,horizontalOffset:e.x}:{goDirectlyTo:P.currentPageIndex})},200)},W=function(){var e,t=x.viewport.top,i=x.viewport.left;x.viewport.invalidate();var n=x.viewport.top,o=x.viewport.left;x.renderer.adjust(e=P.verticallyOriented||P.inGrid?n-t:o-i);var r=P.verticallyOriented||P.inGrid?n:o;G("ViewerDidScroll",r),e>0?G("ViewerDidScrollDown",r):e<0&&G("ViewerDidScrollUp",r),z()},U=function(){clearTimeout(x.throbberTimeoutID),n(P.selector+"throbber").hide()},Z=function(e){var t=o("div",k("error"),[o("button",k("error-close",{"aria-label":"Close dialog"})),o("p",o("strong","Error")),o("div",e)]);x.outerObject.append(t),n(P.selector+"error-close").on("click",function(){t.parentNode.removeChild(t)})},G=function(e){var t=Array.prototype.slice.call(arguments,1);s.Events.publish(e,t,i)};this.getSettings=function(){return P},this.getInternalState=function(){return x},this.getPublicInstance=function(){return i},this.getPageTools=function(){return x.pageTools},this.getCurrentLayout=function(){return x.renderer?x.renderer.layout:null},this.getViewport=function(){var e=x.viewport;return{top:e.top,left:e.left,bottom:e.bottom,right:e.right,width:e.width,height:e.height}},this.addPageOverlay=function(e){x.pageOverlays.addOverlay(e)},this.removePageOverlay=function(e){x.pageOverlays.removeOverlay(e)},this.getPageRegion=function(e,t){var i=x.renderer.layout,n=i.getPageRegion(e,t);if(t&&t.incorporateViewport){var o=P.verticallyOriented?"width":"height";if(x.viewport[o]>i.dimensions[o]){var r=(x.viewport[o]-i.dimensions[o])/2;return P.verticallyOriented?{top:n.top,bottom:n.bottom,left:n.left+r,right:n.right+r}:{top:n.top+r,bottom:n.bottom+r,left:n.left,right:n.right}}}return n},this.getPagePositionAtViewportOffset=function(e){for(var t={left:e.left+x.viewport.left,top:e.top+x.viewport.top},i=x.renderer.getRenderedPages(),n=i.length,o=0;o<n;o++){var r=i[o],a=x.renderer.layout.getPageRegion(r);if(a.left<=t.left&&a.right>=t.left&&a.top<=t.top&&a.bottom>=t.top)return{anchorPage:r,offset:{left:t.left-a.left,top:t.top-a.top}}}var s=x.renderer.layout.getPageRegion(P.currentPageIndex);return{anchorPage:P.currentPageIndex,offset:{left:t.left-s.left,top:t.top-s.top}}},this.setManifest=function(e,t,i){!function(t,i,r){if(x.manifest=e,x.isIIIF=i,U(),x.numPages=P.manifest.pages.length,j.validate(x.options),G("NumberOfPagesDidChange",P.numPages),P.enableAutoTitle&&(n(P.selector+"title").length?n(P.selector+"title").html(P.manifest.itemTitle):P.parentObject.prepend(o("div",k("title"),[P.manifest.itemTitle]))),P.adaptivePadding>0){var a=Math.floor((P.minZoomLevel+P.maxZoomLevel)/2);x.horizontalPadding=parseInt(P.manifest.getAverageWidth(a)*P.adaptivePadding,10),x.verticalPadding=parseInt(P.manifest.getAverageHeight(a)*P.adaptivePadding,10)}else x.horizontalPadding=P.fixedPadding,x.verticalPadding=P.fixedPadding;var s,l;x.pageTools.length&&(x.verticalPadding=Math.max(40,x.verticalPadding)),P.manifest.paged&&(x.options.inBookLayout=!0),G("ObjectDidLoad",P),H();var u=!1,c=!1;null==r.goDirectlyTo?(r.goDirectlyTo=P.goDirectlyTo,s=l=!0):(s=null==r.horizontalOffset||isNaN(r.horizontalOffset),l=null==r.verticalOffset||isNaN(r.verticalOffset)),s&&(0===r.goDirectlyTo&&P.inBookLayout&&P.verticallyOriented?r.horizontalOffset=x.horizontalPadding:(c=!0,r.horizontalOffset=N(r.goDirectlyTo,"center"))),l&&(u=!0,r.verticalOffset=q(r.goDirectlyTo,"top")),E(r),H(),P.verticallyOriented?x.innerElement.style.minWidth=P.panelWidth+"px":x.innerElement.style.minHeight=P.panelHeight+"px",(u||c)&&(u&&(x.verticalOffset=q(P.currentPageIndex,"top")),c&&(x.horizontalOffset=N(P.currentPageIndex,"center")),x.renderer.goto(P.currentPageIndex,x.verticalOffset,x.horizontalOffset)),x.loaded=!0,G("ViewerDidLoad",P)}(0,t,i||{})},this.setCurrentPage=function(e){x.currentPageIndex!==e&&(x.currentPageIndex=e,G("VisiblePageDidChange",e,this.getPageName(e)))},this.getPageName=function(e){return x.manifest.pages[e].f},this.reload=function(e){E(e)},this.zoom=function(e,t){return function(e,t){if(!C("zoomLevel",e))return!1;if(null==t){var i=x.viewport,n=x.renderer.layout.getPageRegion(P.currentPageIndex);t={anchorPage:P.currentPageIndex,offset:{left:i.width/2-(n.left-i.left),top:i.height/2-(n.top-i.top)}}}var o=x.renderer.layout.getPageRegion(t.anchorPage),r=o.left+t.offset.left-(P.viewport.left+P.viewport.width/2),a=o.top+t.offset.top-(P.viewport.top+P.viewport.height/2);function s(e){var i=Math.pow(2,e-l);return{zoomLevel:e,anchorPage:t.anchorPage,verticalOffset:t.offset.top*i-a,horizontalOffset:t.offset.left*i-r}}var l=x.oldZoomLevel=P.zoomLevel;x.options.zoomLevel=e;var u=s(e);return x.options.goDirectlyTo=u.anchorPage,x.verticalOffset=u.verticalOffset,x.horizontalOffset=u.horizontalOffset,x.renderer.transitionViewportPosition({duration:300,parameters:{zoomLevel:{from:l,to:e}},getPosition:function(e){return s(e.zoomLevel)},onEnd:function(t){x.viewportObject.scroll(W),t.interrupted&&(x.oldZoomLevel=e)}}),G("ZoomLevelDidChange",e),x.viewportObject.off("scroll"),!0}(e,t)},this.enableScrollable=function(){x.isScrollable||(V(),x.options.enableKeyScroll=x.initialKeyScroll,x.options.enableSpaceScroll=x.initialSpaceScroll,x.viewportElement.style.overflow="auto",x.isScrollable=!0)},this.disableScrollable=function(){x.isScrollable&&(x.innerObject.hasClass("diva-dragger")&&x.innerObject.unbind("mousedown"),x.outerObject.unbind("dblclick"),x.outerObject.unbind("contextmenu"),x.viewportElement.style.overflow="hidden",x.initialKeyScroll=P.enableKeyScroll,x.initialSpaceScroll=P.enableSpaceScroll,x.options.enableKeyScroll=!1,x.options.enableSpaceScroll=!1,x.isScrollable=!1)},this.isValidOption=function(e,t){return C(e,t)},this.showError=function(e){U();var t=o("div",k("error"),[o("button",k("error-close",{"aria-label":"Close dialog"})),o("p",o("strong","Error")),o("div",e)]);x.outerObject.append(t),n(P.selector+"error-close").on("click",function(){t.parentNode.removeChild(t)})},this.getXOffset=function(e,t){return N(e,t)},this.getYOffset=function(e,t){return q(e,t)},this.publish=G,this.clear=function(){T()},this.setPendingManifestRequest=function(e){x.pendingManifestRequest=e},this.destroy=function(){G("ViewerWillTerminate",P),P.pendingManifestRequest&&P.pendingManifestRequest.abort(),n("body").removeClass("diva-hide-scrollbar"),P.parentObject.parent().empty().removeData("diva"),P.parentObject.parent().removeAttr("style").removeAttr("class"),G("ViewerDidTerminate",P),s.Events.unsubscribeAll(P.ID)},function(){x.scrollbarWidth=r(),x.mobileWebkit=void 0!==window.orientation;var e=b();x.ID="diva-"+e+"-",x.selector="#"+P.ID,null===t.hashParamSuffix&&(t.hashParamSuffix=1===e?"":e+"");var l=o("div",k("inner",{class:"diva-inner diva-dragger"})),u=o("div",k("viewport"),l),c=o("div",k("outer"),u,o("div",k("throbber")));x.innerElement=l,x.viewportElement=u,x.outerElement=c,x.innerObject=n(l),x.viewportObject=n(u),x.outerObject=n(c),P.parentObject.append(c),x.viewport=new v(x.viewportElement,{intersectionTolerance:P.viewportMargin}),h.getAll().forEach(function(e){var t=e.pluginName[0].toUpperCase()+e.pluginName.substring(1);if(P["enable"+t]){if(!e.init(P,i))return;"function"==typeof e.handleClick&&x.pageTools.push(e),P.plugins.push(e)}}),x.innerObject.mousedown(function(){x.innerObject.addClass("diva-grabbing")}),x.innerObject.mouseup(function(){x.innerObject.removeClass("diva-grabbing")}),V(),x.viewportObject.scroll(W),n(document).on("keydown.diva",function(e){if(!x.isActiveDiva)return!0;if(P.enableSpaceScroll&&!e.shiftKey&&32===e.keyCode||P.enableKeyScroll&&34===e.keyCode)return x.viewport.top+=P.panelHeight,!1;if(P.enableSpaceScroll||32!==e.keyCode||e.preventDefault(),P.enableKeyScroll){if(e.shiftKey||e.ctrlKey||e.metaKey)return!0;switch(e.keyCode){case 33:return x.viewport.top-=P.panelHeight,!1;case 38:return x.viewport.top-=P.arrowScrollAmount,!1;case 40:return x.viewport.top+=P.arrowScrollAmount,!1;case 37:return x.viewport.left-=P.arrowScrollAmount,!1;case 39:return x.viewport.left+=P.arrowScrollAmount,!1;case 36:return x.viewport.top=0,!1;case 35:return P.verticallyOriented?x.viewport.top=1/0:x.viewport.left=1/0,!1;default:return!0}}return!0}),s.Events.subscribe("ViewerDidTerminate",function(){n(document).off("keydown.diva")},P.ID),P.blockMobileMove&&n("body").bind("touchmove",function(e){return e.originalEvent.preventDefault(),!1}),x.viewportObject.kinetic({triggerHardware:!0}),a.onPinch(x.viewportObject,function(e,t,i,n){m("Pinch %s at %s, %s",n-i,t.left,t.top),x.viewHandler.onPinch(e,t,i,n)}),a.onDoubleTap(x.viewportObject,function(e,t){m("Double tap at %s, %s",t.left,t.top),x.viewHandler.onDoubleClick(e,t)}),window.addEventListener("resize",B,!1),s.Events.subscribe("ViewerDidTerminate",function(){window.removeEventListener("resize",B,!1)},P.ID),"onorientationchange"in window&&(window.addEventListener("orientationchange",B,!1),s.Events.subscribe("ViewerDidTerminate",function(){window.removeEventListener("orientationchange",B,!1)},P.ID)),s.Events.subscribe("PanelSizeDidChange",H,P.ID),s.Events.subscribe("ViewerDidTerminate",function(){x.renderer&&x.renderer.destroy(),clearTimeout(x.resizeTimer)},P.ID),U(),x.throbberTimeoutID=setTimeout(function(){n(P.selector+"throbber").show()},P.throbberTimeout)}()};var y=[{key:"goDirectlyTo",validate:function(e,t){if(e<0||e>=t.manifest.pages.length)return 0}},{key:"minPagesPerRow",validate:function(e){return Math.max(2,e)}},{key:"maxPagesPerRow",validate:function(e,t){return Math.max(e,t.minPagesPerRow)}},{key:"pagesPerRow",validate:function(e,t){if(e<t.minPagesPerRow||e>t.maxPagesPerRow)return t.maxPagesPerRow}},{key:"maxZoomLevel",validate:function(e,t,i){if(i.suppressWarning(),e<0||e>t.manifest.maxZoom)return t.manifest.maxZoom}},{key:"minZoomLevel",validate:function(e,t,i){return e>t.manifest.maxZoom?(i.suppressWarning(),0):e<0||e>t.maxZoomLevel?0:void 0}},{key:"zoomLevel",validate:function(e,t,i){return e>t.manifest.maxZoom?(i.suppressWarning(),0):e<t.minZoomLevel||e>t.maxZoomLevel?t.minZoomLevel:void 0}}];function b(){return b.counter++}b.counter=1},function(e,t,i){var n,o,r=i(3);(n=r).fn.dragscrollable=function(e){var t=n.extend({dragSelector:">:first",acceptPropagatedEvent:!0,preventDefault:!0},e||{}),i={mouseDownHandler:function(e){return!(1!=e.which||!e.data.acceptPropagatedEvent&&e.target!=this)&&(e.data.lastCoord={left:e.clientX,top:e.clientY},n.event.add(document,"mouseup",i.mouseUpHandler,e.data),n.event.add(document,"mousemove",i.mouseMoveHandler,e.data),e.data.preventDefault?(e.preventDefault(),!1):void 0)},mouseMoveHandler:function(e){var t=e.clientX-e.data.lastCoord.left,i=e.clientY-e.data.lastCoord.top;if(e.data.scrollable.scrollLeft(e.data.scrollable.scrollLeft()-t),e.data.scrollable.scrollTop(e.data.scrollable.scrollTop()-i),e.data.lastCoord={left:e.clientX,top:e.clientY},e.data.preventDefault)return e.preventDefault(),!1},mouseUpHandler:function(e){if(n.event.remove(document,"mousemove",i.mouseMoveHandler),n.event.remove(document,"mouseup",i.mouseUpHandler),e.data.preventDefault)return e.preventDefault(),!1}};this.each(function(){var e={scrollable:n(this),acceptPropagatedEvent:t.acceptPropagatedEvent,preventDefault:t.preventDefault};n(this).find(t.dragSelector).bind("mousedown",e,i.mouseDownHandler)})},function(e){"use strict";var t="kinetic-active";window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}),e.support=e.support||{},e.extend(e.support,{touch:"ontouchend"in document});var i=function(t,i){return this.settings=i,this.el=t,this.$el=e(t),this._initElements(),this};i.DATA_KEY="kinetic",i.DEFAULTS={cursor:"move",decelerate:!0,triggerHardware:!1,threshold:0,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,invert:!1,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},i.prototype.start=function(t){this.settings=e.extend(this.settings,t),this.velocity=t.velocity||this.velocity,this.velocityY=t.velocityY||this.velocityY,this.settings.decelerate=!1,this._move()},i.prototype.end=function(){this.settings.decelerate=!0},i.prototype.stop=function(){this.velocity=0,this.velocityY=0,this.settings.decelerate=!0,e.isFunction(this.settings.stopped)&&this.settings.stopped.call(this)},i.prototype.detach=function(){this._detachListeners(),this.$el.removeClass(t).css("cursor","")},i.prototype.attach=function(){this.$el.hasClass(t)||(this._attachListeners(this.$el),this.$el.addClass(t).css("cursor",this.settings.cursor))},i.prototype._initElements=function(){this.$el.addClass(t),e.extend(this,{xpos:null,prevXPos:!1,ypos:null,prevYPos:!1,mouseDown:!1,throttleTimeout:1e3/this.settings.throttleFPS,lastMove:null,elementFocused:null}),this.velocity=0,this.velocityY=0,e(document).mouseup(e.proxy(this._resetMouse,this)).click(e.proxy(this._resetMouse,this)),this._initEvents(),this.$el.css("cursor",this.settings.cursor),this.settings.triggerHardware&&this.$el.css({"-webkit-transform":"translate3d(0,0,0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"})},i.prototype._initEvents=function(){var t=this;this.settings.events={touchStart:function(e){var i;t._useTarget(e.target,e)&&(i=e.originalEvent.touches[0],t.threshold=t._threshold(e.target,e),t._start(i.clientX,i.clientY),e.stopPropagation())},touchMove:function(e){var i;t.mouseDown&&(t._inputmove((i=e.originalEvent.touches[0]).clientX,i.clientY),e.preventDefault&&e.preventDefault())},inputDown:function(e){t._useTarget(e.target,e)&&(t.threshold=t._threshold(e.target,e),t._start(e.clientX,e.clientY),t.elementFocused=e.target,"IMG"===e.target.nodeName&&e.preventDefault(),e.stopPropagation())},inputEnd:function(e){t._useTarget(e.target,e)&&(t._end(),t.elementFocused=null,e.preventDefault&&e.preventDefault())},inputMove:function(e){t.mouseDown&&(t._inputmove(e.clientX,e.clientY),e.preventDefault&&e.preventDefault())},scroll:function(i){e.isFunction(t.settings.moved)&&t.settings.moved.call(t,t.settings),i.preventDefault&&i.preventDefault()},inputClick:function(e){if(Math.abs(t.velocity)>0)return e.preventDefault(),!1},dragStart:function(e){if(t._useTarget(e.target,e)&&t.elementFocused)return!1},selectStart:function(i){return e.isFunction(t.settings.selectStart)?t.settings.selectStart.apply(t,arguments):!t._useTarget(i.target,i)&&void 0}},this._attachListeners(this.$el,this.settings)},i.prototype._inputmove=function(t,i){var n=this.$el;if((!this.lastMove||new Date>new Date(this.lastMove.getTime()+this.throttleTimeout))&&(this.lastMove=new Date,this.mouseDown&&(this.xpos||this.ypos))){var o=t-this.xpos,r=i-this.ypos;if(this.settings.invert&&(o*=-1,r*=-1),this.threshold>0){var a=Math.sqrt(o*o+r*r);if(this.threshold>a)return;this.threshold=0}this.elementFocused&&(e(this.elementFocused).blur(),this.elementFocused=null,n.focus()),this.settings.decelerate=!1,this.velocity=this.velocityY=0;var s=this.scrollLeft(),l=this.scrollTop();this.scrollLeft(this.settings.x?s-o:s),this.scrollTop(this.settings.y?l-r:l),this.prevXPos=this.xpos,this.prevYPos=this.ypos,this.xpos=t,this.ypos=i,this._calculateVelocities(),this._setMoveClasses(this.settings.movingClass),e.isFunction(this.settings.moved)&&this.settings.moved.call(this,this.settings)}},i.prototype._calculateVelocities=function(){this.velocity=this._capVelocity(this.prevXPos-this.xpos,this.settings.maxvelocity),this.velocityY=this._capVelocity(this.prevYPos-this.ypos,this.settings.maxvelocity),this.settings.invert&&(this.velocity*=-1,this.velocityY*=-1)},i.prototype._end=function(){this.xpos&&this.prevXPos&&!1===this.settings.decelerate&&(this.settings.decelerate=!0,this._calculateVelocities(),this.xpos=this.prevXPos=this.mouseDown=!1,this._move())},i.prototype._useTarget=function(t,i){return!e.isFunction(this.settings.filterTarget)||!1!==this.settings.filterTarget.call(this,t,i)},i.prototype._threshold=function(t,i){return e.isFunction(this.settings.threshold)?this.settings.threshold.call(this,t,i):this.settings.threshold},i.prototype._start=function(e,t){this.mouseDown=!0,this.velocity=this.prevXPos=0,this.velocityY=this.prevYPos=0,this.xpos=e,this.ypos=t},i.prototype._resetMouse=function(){this.xpos=!1,this.ypos=!1,this.mouseDown=!1},i.prototype._decelerateVelocity=function(e,t){return 0===Math.floor(Math.abs(e))?0:e*t},i.prototype._capVelocity=function(e,t){var i=e;return e>0?e>t&&(i=t):e<0-t&&(i=0-t),i},i.prototype._setMoveClasses=function(e){var t=this.settings,i=this.$el;i.removeClass(t.movingClass.up).removeClass(t.movingClass.down).removeClass(t.movingClass.left).removeClass(t.movingClass.right).removeClass(t.deceleratingClass.up).removeClass(t.deceleratingClass.down).removeClass(t.deceleratingClass.left).removeClass(t.deceleratingClass.right),this.velocity>0&&i.addClass(e.right),this.velocity<0&&i.addClass(e.left),this.velocityY>0&&i.addClass(e.down),this.velocityY<0&&i.addClass(e.up)},i.prototype._move=function(){var t=this._getScroller()[0],i=this,n=i.settings;n.x&&t.scrollWidth>0?(this.scrollLeft(this.scrollLeft()+this.velocity),Math.abs(this.velocity)>0&&(this.velocity=n.decelerate?i._decelerateVelocity(this.velocity,n.slowdown):this.velocity)):this.velocity=0,n.y&&t.scrollHeight>0?(this.scrollTop(this.scrollTop()+this.velocityY),Math.abs(this.velocityY)>0&&(this.velocityY=n.decelerate?i._decelerateVelocity(this.velocityY,n.slowdown):this.velocityY)):this.velocityY=0,i._setMoveClasses(n.deceleratingClass),e.isFunction(n.moved)&&n.moved.call(this,n),Math.abs(this.velocity)>0||Math.abs(this.velocityY)>0?this.moving||(this.moving=!0,window.requestAnimationFrame(function(){i.moving=!1,i._move()})):i.stop()},i.prototype._getScroller=function(){var t=this.$el;return(this.$el.is("body")||this.$el.is("html"))&&(t=e(window)),t},i.prototype.scrollLeft=function(e){var t=this._getScroller();if("number"!=typeof e)return t.scrollLeft();t.scrollLeft(e),this.settings.scrollLeft=e},i.prototype.scrollTop=function(e){var t=this._getScroller();if("number"!=typeof e)return t.scrollTop();t.scrollTop(e),this.settings.scrollTop=e},i.prototype._attachListeners=function(){var t=this.$el,i=this.settings;e.support.touch&&t.bind("touchstart",i.events.touchStart).bind("touchend",i.events.inputEnd).bind("touchmove",i.events.touchMove),t.mousedown(i.events.inputDown).mouseup(i.events.inputEnd).mousemove(i.events.inputMove),t.click(i.events.inputClick).scroll(i.events.scroll).bind("selectstart",i.events.selectStart).bind("dragstart",i.events.dragStart)},i.prototype._detachListeners=function(){var t=this.$el,i=this.settings;e.support.touch&&t.unbind("touchstart",i.events.touchStart).unbind("touchend",i.events.inputEnd).unbind("touchmove",i.events.touchMove),t.unbind("mousedown",i.events.inputDown).unbind("mouseup",i.events.inputEnd).unbind("mousemove",i.events.inputMove),t.unbind("click",i.events.inputClick).unbind("scroll",i.events.scroll).unbind("selectstart",i.events.selectStart).unbind("dragstart",i.events.dragStart)},e.Kinetic=i,e.fn.kinetic=function(t,n){return this.each(function(){var o=e(this),r=o.data(i.DATA_KEY),a=e.extend({},i.DEFAULTS,o.data(),"object"==typeof t&&t);r||o.data(i.DATA_KEY,r=new i(this,a)),"string"==typeof t&&r[t](n)})}}(r),(o=r).Kinetic.prototype._attachListeners=function(){var e=this.$el,t=this.settings;o.support.touch&&e.bind("touchstart",t.events.touchStart).bind("touchend",t.events.inputEnd).bind("touchmove",t.events.touchMove),e.click(t.events.inputClick).scroll(t.events.scroll).bind("selectstart",t.events.selectStart).bind("dragstart",t.events.dragStart)},o.Kinetic.prototype._detachListeners=function(){var e=this.$el,t=this.settings;o.support.touch&&e.unbind("touchstart",t.events.touchStart).unbind("touchend",t.events.inputEnd).unbind("touchmove",t.events.touchMove),e.unbind("click",t.events.inputClick).unbind("scroll",t.events.scroll).unbind("selectstart",t.events.selectStart).unbind("dragstart",t.events.dragStart)}},function(e,t){e.exports=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var i=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;return i==n&&(n=t.clientWidth),document.body.removeChild(t),i-n}},function(e,t){e.exports={onDoubleClick:function(e,t){e.on("dblclick",function(e){e.ctrlKey||t(e,s(e.currentTarget,e))});var n=a(i);e.on("contextmenu",function(e){e.preventDefault(),e.ctrlKey&&(n.isTriggered()?(n.reset(),t(e,s(e.currentTarget,e))):n.trigger())})},onPinch:function(e,t){var i=0;e.on("touchstart",function(e){e.preventDefault(),2===e.originalEvent.touches.length&&(i=r(e.originalEvent.touches[0].clientX,e.originalEvent.touches[0].clientY,e.originalEvent.touches[1].clientX,e.originalEvent.touches[1].clientY))}),e.on("touchmove",function(e){if(e.preventDefault(),2===e.originalEvent.touches.length){var n=e.originalEvent.touches,o=r(n[0].clientX,n[0].clientY,n[1].clientX,n[1].clientY);Math.abs(o-i)>0&&t(e,s(e.currentTarget,{pageX:(n[0].clientX+n[1].clientX)/2,pageY:(n[0].clientY+n[1].clientY)/2}),i,o)}})},onDoubleTap:function(e,t){var i=a(o),l=null;e.on("touchend",function(e){if(e.preventDefault(),i.isTriggered()){i.reset();var o={pageX:e.originalEvent.changedTouches[0].clientX,pageY:e.originalEvent.changedTouches[0].clientY};r(l.pageX,l.pageY,o.pageX,o.pageY)<n&&t(e,s(e.currentTarget,o)),l=null}else l={pageX:e.originalEvent.changedTouches[0].clientX,pageY:e.originalEvent.changedTouches[0].clientY},i.trigger()})}};var i=500,n=50,o=250;function r(e,t,i,n){return Math.sqrt((i-e)*(i-e)+(n-t)*(n-t))}function a(e){var t=!1,i=null;return{trigger:function(){t=!0,n(),i=setTimeout(function(){t=!1,i=null},e)},isTriggered:function(){return t},reset:function(){t=!1,n()}};function n(){null!==i&&(clearTimeout(i),i=null)}}function s(e,t){var i=e.getBoundingClientRect();return{left:t.pageX-i.left,top:t.pageY-i.top}}},function(e,t,i){var n=i(19),o=i(21);function r(e){if(this._viewerCore=e,this._viewerState=e.getInternalState(),this._overlays=[],e.getPageTools().length)for(var t=e.getSettings().numPages,i=0;i<t;i++){var n=new o(i,e);this._overlays.push(n),e.addPageOverlay(n)}}e.exports=r,r.prototype.onDoubleClick=function(e,t){var i=this._viewerCore.getSettings(),n=e.ctrlKey?i.zoomLevel-1:i.zoomLevel+1,o=this._viewerCore.getPagePositionAtViewportOffset(t);this._viewerCore.zoom(n,o)},r.prototype.onPinch=function(e,t,i,n){var o=this._viewerCore.getInternalState(),r=this._viewerCore.getSettings(),a=Math.log(Math.pow(2,r.zoomLevel)*n/(i*Math.log(2)))/Math.log(2);if(a=Math.max(r.minZoomLevel,a),(a=Math.min(r.maxZoomLevel,a))!==r.zoomLevel){var s=this._viewerCore.getPagePositionAtViewportOffset(t),l=this._viewerCore.getCurrentLayout().getPageToViewportCenterOffset(s.anchorPage,o.viewport),u=1/Math.pow(2,r.zoomLevel-a);this._viewerCore.reload({zoomLevel:a,goDirectlyTo:s.anchorPage,horizontalOffset:l.x-s.offset.left+s.offset.left*u,verticalOffset:l.y-s.offset.top+s.offset.top*u})}},r.prototype.onViewWillLoad=function(){this._viewerCore.publish("DocumentWillLoad",this._viewerCore.getSettings())},r.prototype.onViewDidLoad=function(){this._handleZoomLevelChange();var e=this._viewerCore.getSettings().currentPageIndex,t=this._viewerCore.getPageName(e);this._viewerCore.publish("DocumentDidLoad",e,t)},r.prototype.onViewDidUpdate=function(e,t){var i,o,r,a,s,l,u=null!==t?t:(i=e,o=this._viewerCore.getCurrentLayout(),r=this._viewerCore.getViewport(),a=r.top+r.height/2,s=r.left+r.width/2,null!=(l=n(i,function(e){var t=o.getPageDimensions(e),i=o.getPageOffset(e,{excludePadding:!1}),n=i.top+t.width/2,r=Math.max(Math.abs(s-(i.left+t.height/2))-t.width/2,0),l=Math.max(Math.abs(a-n)-t.height/2,0);return-(r*r+l*l)}))?l:null);null!==u&&this._viewerCore.setCurrentPage(u),null!==t&&this._viewerCore.publish("ViewerDidJump",t),this._handleZoomLevelChange()},r.prototype._handleZoomLevelChange=function(){var e=this._viewerState,t=e.options.zoomLevel;e.oldZoomLevel!==t&&e.oldZoomLevel>=0&&(this._viewerCore.publish(e.oldZoomLevel<t?"ViewerDidZoomIn":"ViewerDidZoomOut",t),this._viewerCore.publish("ViewerDidZoom",t)),e.oldZoomLevel=t},r.prototype.destroy=function(){this._overlays.forEach(function(e){this._viewerCore.removePageOverlay(e)},this)}},function(e,t,i){(function(e,i){var n="Expected a function",o="__lodash_hash_undefined__",r=1,a=2,s=1/0,l=9007199254740991,u="[object Arguments]",c="[object Array]",h="[object Boolean]",d="[object Date]",p="[object Error]",f="[object Function]",g="[object GeneratorFunction]",v="[object Map]",m="[object Number]",y="[object Object]",b="[object RegExp]",w="[object Set]",_="[object String]",x="[object Symbol]",P="[object WeakMap]",j="[object ArrayBuffer]",C="[object DataView]",k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S=/^\w*$/,T=/^\./,E=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,L=/\\(\\)?/g,O=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[u]=I[c]=I[j]=I[h]=I[C]=I[d]=I[p]=I[f]=I[v]=I[m]=I[y]=I[b]=I[w]=I[_]=I[P]=!1;var A="object"==typeof e&&e&&e.Object===Object&&e,R="object"==typeof self&&self&&self.Object===Object&&self,M=A||R||Function("return this")(),F="object"==typeof t&&t&&!t.nodeType&&t,q=F&&"object"==typeof i&&i&&!i.nodeType&&i,N=q&&q.exports===F&&A.process,H=function(){try{return N&&N.binding("util")}catch(e){}}(),z=H&&H.isTypedArray;function V(e,t){for(var i=-1,n=e?e.length:0;++i<n;)if(t(e[i],i,e))return!0;return!1}function B(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function W(e){var t=-1,i=Array(e.size);return e.forEach(function(e,n){i[++t]=[n,e]}),i}function U(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}var Z,G,$,Y=Array.prototype,X=Function.prototype,K=Object.prototype,J=M["__core-js_shared__"],Q=(Z=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"",ee=X.toString,te=K.hasOwnProperty,ie=K.toString,ne=RegExp("^"+ee.call(te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oe=M.Symbol,re=M.Uint8Array,ae=K.propertyIsEnumerable,se=Y.splice,le=(G=Object.keys,$=Object,function(e){return G($(e))}),ue=Me(M,"DataView"),ce=Me(M,"Map"),he=Me(M,"Promise"),de=Me(M,"Set"),pe=Me(M,"WeakMap"),fe=Me(Object,"create"),ge=We(ue),ve=We(ce),me=We(he),ye=We(de),be=We(pe),we=oe?oe.prototype:void 0,_e=we?we.valueOf:void 0,xe=we?we.toString:void 0;function Pe(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function je(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Ce(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function ke(e){var t=-1,i=e?e.length:0;for(this.__data__=new Ce;++t<i;)this.add(e[t])}function Se(e){this.__data__=new je(e)}function Te(e,t){for(var i=e.length;i--;)if(Ze(e[i][0],t))return i;return-1}function Ee(e,t){for(var i=0,n=(t=Ne(t,e)?[t]:Ie(t)).length;null!=e&&i<n;)e=e[Be(t[i++])];return i&&i==n?e:void 0}function Le(e,t){return e>t}function Oe(e,t){return null!=e&&t in Object(e)}function De(e,t,i,n,o){return e===t||(null==e||null==t||!Je(e)&&!Qe(t)?e!=e&&t!=t:function(e,t,i,n,o,s){var l=$e(e),f=$e(t),g=c,P=c;l||(g=(g=Fe(e))==u?y:g),f||(P=(P=Fe(t))==u?y:P);var k=g==y&&!B(e),S=P==y&&!B(t),T=g==P;if(T&&!k)return s||(s=new Se),l||it(e)?Ae(e,t,i,n,o,s):function(e,t,i,n,o,s,l){switch(g){case C:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case j:return!(e.byteLength!=t.byteLength||!n(new re(e),new re(t)));case h:case d:case m:return Ze(+e,+t);case p:return e.name==t.name&&e.message==t.message;case b:case _:return e==t+"";case v:var u=W;case w:if(u||(u=U),e.size!=t.size&&!(s&a))return!1;var c=l.get(e);if(c)return c==t;s|=r,l.set(e,t);var f=Ae(u(e),u(t),n,o,s,l);return l.delete(e),f;case x:if(_e)return _e.call(e)==_e.call(t)}return!1}(e,t,0,i,n,o,s);if(!(o&a)){var E=k&&te.call(e,"__wrapped__"),L=S&&te.call(t,"__wrapped__");if(E||L){var O=E?e.value():e,D=L?t.value():t;return s||(s=new Se),i(O,D,n,o,s)}}return!!T&&(s||(s=new Se),function(e,t,i,n,o,r){var s=o&a,l=nt(e),u=l.length;if(u!=nt(t).length&&!s)return!1;for(var c=u;c--;){var h=l[c];if(!(s?h in t:te.call(t,h)))return!1}var d=r.get(e);if(d&&r.get(t))return d==t;var p=!0;r.set(e,t),r.set(t,e);for(var f=s;++c<u;){var g=e[h=l[c]],v=t[h];if(n)var m=s?n(v,g,h,t,e,r):n(g,v,h,e,t,r);if(!(void 0===m?g===v||i(g,v,n,o,r):m)){p=!1;break}f||(f="constructor"==h)}if(p&&!f){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(p=!1)}return r.delete(e),r.delete(t),p}(e,t,i,n,o,s))}(e,t,De,i,n,o))}function Ie(e){return $e(e)?e:Ve(e)}function Ae(e,t,i,n,o,s){var l=o&a,u=e.length,c=t.length;if(u!=c&&!(l&&c>u))return!1;var h=s.get(e);if(h&&s.get(t))return h==t;var d=-1,p=!0,f=o&r?new ke:void 0;for(s.set(e,t),s.set(t,e);++d<u;){var g=e[d],v=t[d];if(n)var m=l?n(v,g,d,t,e,s):n(g,v,d,e,t,s);if(void 0!==m){if(m)continue;p=!1;break}if(f){if(!V(t,function(e,t){if(!f.has(t)&&(g===e||i(g,e,n,o,s)))return f.add(t)})){p=!1;break}}else if(g!==v&&!i(g,v,n,o,s)){p=!1;break}}return s.delete(e),s.delete(t),p}function Re(e,t){var i,n,o=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?o["string"==typeof t?"string":"hash"]:o.map}function Me(e,t){var i,n,o=null==(i=e)?void 0:i[t];return!Je(n=o)||Q&&Q in n||!(Xe(n)||B(n)?ne:O).test(We(n))?void 0:o}Pe.prototype.clear=function(){this.__data__=fe?fe(null):{}},Pe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Pe.prototype.get=function(e){var t=this.__data__;if(fe){var i=t[e];return i===o?void 0:i}return te.call(t,e)?t[e]:void 0},Pe.prototype.has=function(e){var t=this.__data__;return fe?void 0!==t[e]:te.call(t,e)},Pe.prototype.set=function(e,t){return this.__data__[e]=fe&&void 0===t?o:t,this},je.prototype.clear=function(){this.__data__=[]},je.prototype.delete=function(e){var t=this.__data__,i=Te(t,e);return!(i<0||(i==t.length-1?t.pop():se.call(t,i,1),0))},je.prototype.get=function(e){var t=this.__data__,i=Te(t,e);return i<0?void 0:t[i][1]},je.prototype.has=function(e){return Te(this.__data__,e)>-1},je.prototype.set=function(e,t){var i=this.__data__,n=Te(i,e);return n<0?i.push([e,t]):i[n][1]=t,this},Ce.prototype.clear=function(){this.__data__={hash:new Pe,map:new(ce||je),string:new Pe}},Ce.prototype.delete=function(e){return Re(this,e).delete(e)},Ce.prototype.get=function(e){return Re(this,e).get(e)},Ce.prototype.has=function(e){return Re(this,e).has(e)},Ce.prototype.set=function(e,t){return Re(this,e).set(e,t),this},ke.prototype.add=ke.prototype.push=function(e){return this.__data__.set(e,o),this},ke.prototype.has=function(e){return this.__data__.has(e)},Se.prototype.clear=function(){this.__data__=new je},Se.prototype.delete=function(e){return this.__data__.delete(e)},Se.prototype.get=function(e){return this.__data__.get(e)},Se.prototype.has=function(e){return this.__data__.has(e)},Se.prototype.set=function(e,t){var i=this.__data__;if(i instanceof je){var n=i.__data__;if(!ce||n.length<199)return n.push([e,t]),this;i=this.__data__=new Ce(n)}return i.set(e,t),this};var Fe=function(e){return ie.call(e)};function qe(e,t){return!!(t=null==t?l:t)&&("number"==typeof e||D.test(e))&&e>-1&&e%1==0&&e<t}function Ne(e,t){if($e(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!et(e))||S.test(e)||!k.test(e)||null!=t&&e in Object(t)}function He(e){return e==e&&!Je(e)}function ze(e,t){return function(i){return null!=i&&i[e]===t&&(void 0!==t||e in Object(i))}}(ue&&Fe(new ue(new ArrayBuffer(1)))!=C||ce&&Fe(new ce)!=v||he&&"[object Promise]"!=Fe(he.resolve())||de&&Fe(new de)!=w||pe&&Fe(new pe)!=P)&&(Fe=function(e){var t=ie.call(e),i=t==y?e.constructor:void 0,n=i?We(i):void 0;if(n)switch(n){case ge:return C;case ve:return v;case me:return"[object Promise]";case ye:return w;case be:return P}return t});var Ve=Ue(function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(et(e))return xe?xe.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}(t);var i=[];return T.test(e)&&i.push(""),e.replace(E,function(e,t,n,o){i.push(n?o.replace(L,"$1"):t||e)}),i});function Be(e){if("string"==typeof e||et(e))return e;var t=e+"";return"0"==t&&1/e==-s?"-0":t}function We(e){if(null!=e){try{return ee.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ue(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(n);var i=function(){var n=arguments,o=t?t.apply(this,n):n[0],r=i.cache;if(r.has(o))return r.get(o);var a=e.apply(this,n);return i.cache=r.set(o,a),a};return i.cache=new(Ue.Cache||Ce),i}function Ze(e,t){return e===t||e!=e&&t!=t}function Ge(e){return Qe(t=e)&&Ye(t)&&te.call(e,"callee")&&(!ae.call(e,"callee")||ie.call(e)==u);var t}Ue.Cache=Ce;var $e=Array.isArray;function Ye(e){return null!=e&&Ke(e.length)&&!Xe(e)}function Xe(e){var t=Je(e)?ie.call(e):"";return t==f||t==g}function Ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function Je(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Qe(e){return!!e&&"object"==typeof e}function et(e){return"symbol"==typeof e||Qe(e)&&ie.call(e)==x}var tt,it=z?(tt=z,function(e){return tt(e)}):function(e){return Qe(e)&&Ke(e.length)&&!!I[ie.call(e)]};function nt(e){return Ye(e)?function(e,t){var i=$e(e)||Ge(e)?function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}(e.length,String):[],n=i.length,o=!!n;for(var r in e)!te.call(e,r)||o&&("length"==r||qe(r,n))||i.push(r);return i}(e):function(e){if((t=e)!==("function"==typeof(i=t&&t.constructor)&&i.prototype||K))return le(e);var t,i,n=[];for(var o in Object(e))te.call(e,o)&&"constructor"!=o&&n.push(o);return n}(e)}function ot(e){return e}i.exports=function(e,t){return e&&e.length?function(e,t,i){for(var n=-1,o=e.length;++n<o;){var r=e[n],a=t(r);if(null!=a&&(void 0===s?a==a&&!et(a):i(a,s)))var s=a,l=r}return l}(e,"function"==typeof(i=t)?i:null==i?ot:"object"==typeof i?$e(i)?(l=i[1],Ne(s=i[0])&&He(l)?ze(Be(s),l):function(e){var t,i,n,o=void 0===(i=null==(t=e)?void 0:Ee(t,s))?void 0:i;return void 0===o&&o===l?null!=(n=e)&&function(e,t,i){for(var n,o=-1,r=(t=Ne(t,e)?[t]:Ie(t)).length;++o<r;){var a=Be(t[o]);if(!(n=null!=e&&i(e,a)))break;e=e[a]}return n||!!(r=e?e.length:0)&&Ke(r)&&qe(a,r)&&($e(e)||Ge(e))}(n,s,Oe):De(l,o,void 0,r|a)}):1==(o=function(e){for(var t=nt(e),i=t.length;i--;){var n=t[i],o=e[n];t[i]=[n,o,He(o)]}return t}(n=i)).length&&o[0][2]?ze(o[0][0],o[0][1]):function(e){return e===n||function(e,t,i,n){var o=i.length,s=o;if(null==e)return!s;for(e=Object(e);o--;){var l=i[o];if(l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<s;){var u=(l=i[o])[0],c=e[u],h=l[1];if(l[2]){if(void 0===c&&!(u in e))return!1}else{var d=new Se;if(!De(h,c,void 0,r|a,d))return!1}}return!0}(e,0,o)}:Ne(u=i)?(h=Be(u),function(e){return null==e?void 0:e[h]}):(c=u,function(e){return Ee(e,c)}),Le):void 0;var i,n,o,s,l,u,c,h}}).call(t,function(){return this}(),i(20)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,i){var n=i(8);function o(e,t){this.page=e,this._viewerCore=t,this._innerElement=t.getSettings().innerElement,this._pageToolsElem=null}e.exports=o,o.prototype.mount=function(){if(null===this._pageToolsElem){var e=this._initializePageToolButtons();this._pageToolsElem=n("div",{class:"diva-page-tools-wrapper"},n("div",{class:"diva-page-tools"},e))}this.refresh(),this._innerElement.appendChild(this._pageToolsElem)},o.prototype._initializePageToolButtons=function(){var e=this._viewerCore.getSettings(),t=this._viewerCore.getPublicInstance(),i=this.page;return this._viewerCore.getPageTools().map(function(o){var r=o.titleText||o.pluginName[0].toUpperCase()+o.pluginName.substring(1)+" plugin",a=n("div",{class:"diva-"+o.pluginName+"-icon",title:r});return a.addEventListener("click",function(n){o.handleClick.call(this,n,e,t,i)},!1),a.addEventListener("touchend",function(n){n.preventDefault(),o.handleClick.call(this,n,e,t,i)},!1),a},this)},o.prototype.unmount=function(){this._innerElement.removeChild(this._pageToolsElem)},o.prototype.refresh=function(){var e=this._viewerCore.getPageRegion(this.page,{excludePadding:!0,incorporateViewport:!0});this._pageToolsElem.style.top=e.top+"px",this._pageToolsElem.style.left=e.left+"px"}},function(e,t,i){var n=i(19);function o(e){this._viewerCore=e}e.exports=o,o.prototype.onDoubleClick=function(e,t){var i=this._viewerCore.getPagePositionAtViewportOffset(t),n=this._viewerCore.getCurrentLayout(),o=this._viewerCore.getViewport(),r=n.getPageToViewportCenterOffset(i.anchorPage,o);this._viewerCore.reload({inGrid:!1,goDirectlyTo:i.anchorPage,horizontalOffset:r.x+i.offset.left,verticalOffset:r.y+i.offset.top})},o.prototype.onPinch=function(){this._viewerCore.reload({inGrid:!1})},o.prototype.onViewWillLoad=function(){},o.prototype.onViewDidLoad=function(){},o.prototype.onViewDidUpdate=function(e,t){if(null===t){var i=this._viewerCore.getCurrentLayout(),o=[];e.forEach(function(e){var t=i.getPageInfo(e).group;0!==o.length&&t===o[o.length-1]||o.push(t)});var r,a,s,l=this._viewerCore.getViewport();1===o.length||o[0].region.top>=l.top?r=o[0]:o[1].region.bottom<=l.bottom?r=o[1]:(s=(a=l).top+a.height/2,r=n(o,function(e){return-Math.abs(s-(e.region.top+e.dimensions.height/2))}));var u=this._viewerCore.getSettings().currentPageIndex;r.pages.some(function(e){return e.index===u})||this._viewerCore.setCurrentPage(r.pages[0].index)}else this._viewerCore.setCurrentPage(t)},o.prototype.destroy=function(){}},function(e,t){function i(){this._pages={},this._renderedPages=[],this._renderedPageMap={}}e.exports=i,i.prototype.addOverlay=function(e){(this._pages[e.page]||(this._pages[e.page]=[])).push(e),this._renderedPageMap[e.page]&&e.mount()},i.prototype.removeOverlay=function(e){var t=e.page,i=this._pages[t];if(i){var n=i.indexOf(e);-1!==n&&(this._renderedPageMap[t]&&i[n].unmount(),i.splice(n,1),0===i.length&&delete this._pages[t])}},i.prototype.updateOverlays=function(e){var t=this._renderedPages,i={};e.forEach(function(e){i[e]=!0,this._renderedPageMap[e]||(this._renderedPageMap[e]=!0,this._invokeOnOverlays(e,function(e){e.mount()}))},this),t.forEach(function(e){i[e]?this._invokeOnOverlays(e,function(e){e.refresh()}):(delete this._renderedPageMap[e],this._invokeOnOverlays(e,function(e){e.unmount()}))},this),this._renderedPages=e},i.prototype._invokeOnOverlays=function(e,t){var i=this._pages[e];i&&i.forEach(t,this)}},function(e,t,i){"use strict";var n=i(25)("diva:Renderer"),o=i(25)("diva:Renderer:paints"),r=i(8),a=i(29),s=i(30),l=i(31),u=i(32),c=i(33);function h(e,t){this._viewport=e.viewport,this._outerElement=e.outerElement,this._documentElement=e.innerElement,this._hooks=t||{},this._canvas=r("canvas",{class:"diva-viewer-canvas"}),this._ctx=this._canvas.getContext("2d"),this.layout=null,this._sourceResolver=null,this._renderedPages=null,this._config=null,this._zoomLevel=null,this._compositeImages=null,this._renderedTiles=null,this._animation=null,this._cache=new l,this._pendingRequests={}}function d(e,t){var i;return i=null===t?1:Math.pow(2,t-e.zoomLevel),{sourceZoomLevel:e.zoomLevel,scaleRatio:i,row:e.row,col:e.col,dimensions:{width:e.dimensions.width*i,height:e.dimensions.height*i},offset:{left:e.offset.left*i,top:e.offset.top*i},url:e.url}}function p(e,t){if(e===t)return{added:[],removed:[]};var i=e.filter(function(e){return-1===t.indexOf(e)});return{added:t.filter(function(t){return-1===e.indexOf(t)}),removed:i}}e.exports=h,h.getCompatibilityErrors=function(){return"undefined"!=typeof HTMLCanvasElement?null:["Your browser lacks support for the ",r("pre","canvas")," element. Please upgrade your browser."]},h.prototype.load=function(e,t,i){if(this._clearAnimation(),this._hooks.onViewWillLoad&&this._hooks.onViewWillLoad(),this._sourceResolver=i,this._config=e,this._compositeImages={},this._setLayoutToZoomLevel(t.zoomLevel),!this.layout.getPageInfo(t.anchorPage))throw new Error("invalid page: "+t.anchorPage);this._canvas.width!==this._viewport.width||this._canvas.height!==this._viewport.height?(n("Canvas dimension change: (%s, %s) -> (%s, %s)",this._canvas.width,this._canvas.height,this._viewport.width,this._viewport.height),this._canvas.width=this._viewport.width,this._canvas.height=this._viewport.height):n("Reload, no size change"),this.goto(t.anchorPage,t.verticalOffset,t.horizontalOffset),this._canvas.parentNode!==this._outerElement&&this._outerElement.insertBefore(this._canvas,this._outerElement.firstChild),this._hooks.onViewDidLoad&&this._hooks.onViewDidLoad()},h.prototype._setViewportPosition=function(e){if(e.zoomLevel!==this._zoomLevel){if(null===this._zoomLevel)throw new TypeError("The current view is not zoomable");if(null===e.zoomLevel)throw new TypeError("The current view requires a zoom level");this._setLayoutToZoomLevel(e.zoomLevel)}this._goto(e.anchorPage,e.verticalOffset,e.horizontalOffset)},h.prototype._setLayoutToZoomLevel=function(e){this.layout=new s(this._config,e),this._zoomLevel=e,r.setAttributes(this._documentElement,{style:{height:this.layout.dimensions.height+"px",width:this.layout.dimensions.width+"px"}}),this._viewport.setInnerDimensions(this.layout.dimensions)},h.prototype.adjust=function(e){this._clearAnimation(),this._render(e),this._hooks.onViewDidUpdate&&this._hooks.onViewDidUpdate(this._renderedPages.slice(),null)},h.prototype._render=function(e){var t=[];this.layout.pageGroups.forEach(function(e){if(this._viewport.intersectsRegion(e.region)){var i=e.pages.filter(function(e){return this.isPageVisible(e.index)},this).map(function(e){return e.index});t.push.apply(t,i)}},this),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._paintOutline(t),t.forEach(function(e){if(!this._compositeImages[e]){var t=this.layout.getPageInfo(e),i=this._sourceResolver.getAllZoomLevelsForPage(t),n=new a(i);n.updateFromCache(this._cache),this._compositeImages[e]=n}},this),this._initiateTileRequests(t);var i=p(this._renderedPages||[],t);i.removed.forEach(function(e){delete this._compositeImages[e]},this),this._renderedPages=t,this._paint(),this._hooks.onPageWillLoad&&i.added.forEach(function(e){this._hooks.onPageWillLoad(e)},this)},h.prototype._paint=function(){n("Repainting");var e=[];this._renderedPages.forEach(function(t){this._compositeImages[t].getTiles(this._zoomLevel).forEach(function(i){var n=d(i,this._zoomLevel);this._isTileVisible(t,n)&&(e.push(i.url),this._drawTile(t,n,this._cache.get(i.url)))},this)},this);var t=this._cache,i=p(this._renderedTiles||[],e);i.added.forEach(function(e){t.acquire(e)}),i.removed.forEach(function(e){t.release(e)}),i.removed&&this._renderedPages.forEach(function(e){this._compositeImages[e].updateFromCache(this._cache)},this),this._renderedTiles=e},h.prototype._paintOutline=function(e){e.forEach(function(e){var t=this.layout.getPageInfo(e),i=this._getImageOffset(e),n=Math.max(0,(this._viewport.width-this.layout.dimensions.width)/2),o=Math.max(0,(this._viewport.height-this.layout.dimensions.height)/2),r=i.left-this._viewport.left+n,a=i.top-this._viewport.top+o,s=r<0?-r:0,l=a<0?-a:0,u=Math.max(0,r),c=Math.max(0,a),h=t.dimensions.width-s,d=t.dimensions.height-l;this._ctx.strokeStyle="#AAA",this._ctx.strokeRect(u+.5,c+.5,h,d)},this)},h.prototype._initiateTileRequests=function(e){for(var t={},i=(function(e,i){var n=this._compositeImages[i];t[e.url]=new u({url:e.url,timeoutTime:250,load:(function(t){delete this._pendingRequests[e.url],this._cache.put(e.url,t),n===this._compositeImages[i]&&(n.updateWithLoadedUrls([e.url]),this._isTileForSourceVisible(i,e)?this._paint():o("Page %s, tile %s no longer visible on image load",i,e.url))}).bind(this),error:(function(){delete this._pendingRequests[e.url]}).bind(this)})}).bind(this),n=0;n<e.length;n++)for(var r=e[n],a=this._sourceResolver.getBestZoomLevelForPage(this.layout.getPageInfo(r)).tiles,s=0;s<a.length;s++){var l=a[s];!this._cache.has(l.url)&&this._isTileForSourceVisible(r,l)&&(this._pendingRequests[l.url]?(t[l.url]=this._pendingRequests[l.url],delete this._pendingRequests[l.url]):i(l,r))}for(var c in this._pendingRequests)this._pendingRequests[c].abort();this._pendingRequests=t},h.prototype._drawTile=function(e,t,i){var n=this._getTileToDocumentOffset(e,t),r=Math.max(0,(this._viewport.width-this.layout.dimensions.width)/2),a=Math.max(0,(this._viewport.height-this.layout.dimensions.height)/2),s=n.left-this._viewport.left+r,l=n.top-this._viewport.top+a,u=s<0?-s:0,c=l<0?-l:0,h=u/t.scaleRatio,d=c/t.scaleRatio,p=Math.max(0,s),f=Math.max(0,l),g=Math.min(t.dimensions.width,i.width*t.scaleRatio)-u,v=Math.min(t.dimensions.height,i.height*t.scaleRatio)-c,m=g/t.scaleRatio,y=v/t.scaleRatio;o.enabled&&o("Drawing page %s, tile %sx (%s, %s) from %s, %s to viewport at %s, %s, scale %s%%",e,t.sourceZoomLevel,t.row,t.col,h,d,p,f,Math.round(100*t.scaleRatio)),this._ctx.drawImage(i,h,d,m,y,p,f,g,v)},h.prototype._isTileForSourceVisible=function(e,t){return this._isTileVisible(e,d(t,this._zoomLevel))},h.prototype._isTileVisible=function(e,t){var i=this._getTileToDocumentOffset(e,t);return this._viewport.intersectsRegion({top:i.top,bottom:i.top+t.dimensions.height,left:i.left,right:i.left+t.dimensions.width})},h.prototype._getTileToDocumentOffset=function(e,t){var i=this._getImageOffset(e);return{top:i.top+t.offset.top,left:i.left+t.offset.left}},h.prototype._getImageOffset=function(e){return this.layout.getPageOffset(e,{excludePadding:!0})},h.prototype.goto=function(e,t,i){this._clearAnimation(),this._goto(e,t,i),this._hooks.onViewDidUpdate&&this._hooks.onViewDidUpdate(this._renderedPages.slice(),e)},h.prototype._goto=function(e,t,i){var n=this.layout.getPageOffset(e),o=n.top+t-parseInt(this._viewport.height/2,10),r=n.left+i-parseInt(this._viewport.width/2,10);this._viewport.top=o,this._viewport.left=r,this._render(0)},h.prototype.transitionViewportPosition=function(e){this._clearAnimation();var t=e.getPosition,i=this,n=this._hooks.onViewDidTransition;this._animation=c.animate({duration:e.duration,parameters:e.parameters,onUpdate:function(e){i._setViewportPosition(t(e)),n&&n()},onEnd:function(t){e.onEnd&&e.onEnd(t),i._hooks.onViewDidUpdate&&!t.interrupted&&i._hooks.onViewDidUpdate(i._renderedPages.slice(),null)}})},h.prototype._clearAnimation=function(){this._animation&&(this._animation.cancel(),this._animation=null)},h.prototype.preload=function(){},h.prototype.isPageVisible=function(e){return!!this.layout&&!!this.layout.getPageInfo(e)&&this._viewport.intersectsRegion(this.layout.getPageRegion(e))},h.prototype.getRenderedPages=function(){return this._renderedPages.slice()},h.prototype.destroy=function(){this._clearAnimation(),Object.keys(this._pendingRequests).forEach(function(e){var t=this._pendingRequests[e];delete this._pendingRequests[e],t.abort()},this),this._canvas.parentNode.removeChild(this._canvas)}},function(e,t,i){(function(n){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=i(27)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var i=this.useColors;if(e[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+e[0]+(i?"%c ":" ")+"+"+t.humanize(this.diff),i){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(r=++o)}),e.splice(r,0,n)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){return!("undefined"==typeof window||!window||"undefined"==typeof window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(t,i(26))},function(e,t){var i,n,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(e){i=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l,u=[],c=!1,h=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&p())}function p(){if(!c){var e=s(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];u.push(new f(e,t)),1!==u.length||c||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,i){var n;function o(e){function i(){if(i.enabled){var e=i,o=+new Date;e.diff=o-(n||o),e.prev=n,e.curr=o,n=o;for(var r=new Array(arguments.length),a=0;a<r.length;a++)r[a]=arguments[a];r[0]=t.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var s=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(i,n){if("%%"===i)return i;s++;var o=t.formatters[n];return"function"==typeof o&&(i=o.call(e,r[s]),r.splice(s,1),s--),i}),t.formatArgs.call(e,r),(i.log||t.log||console.log.bind(console)).apply(e,r)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var i,n=0;for(i in e)n=(n<<5)-n+e.charCodeAt(i),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(i),i}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var i=(e||"").split(/[\s,]+/),n=i.length,o=0;o<n;o++)i[o]&&("-"===(e=i[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var i,n;for(i=0,n=t.skips.length;i<n;i++)if(t.skips[i].test(e))return!1;for(i=0,n=t.names.length;i<n;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=i(28),t.names=[],t.skips=[],t.formatters={}},function(e,t){function i(e,t,i){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+i:Math.ceil(e/t)+" "+i+"s"}e.exports=function(e,t){t=t||{};var n,o,r=typeof e;if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var i=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return 864e5*i;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*i;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===r&&!1===isNaN(e))return t.long?i(n=e,864e5,"day")||i(n,36e5,"hour")||i(n,6e4,"minute")||i(n,1e3,"second")||n+" ms":(o=e,o>=864e5?Math.round(o/864e5)+"d":o>=36e5?Math.round(o/36e5)+"h":o>=6e4?Math.round(o/6e4)+"m":o>=1e3?Math.round(o/1e3)+"s":o+"ms");throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t){function i(e){this._levels=e;var t=this._urlsToTiles={};e.forEach(function(e){e.tiles.forEach(function(i){t[i.url]={zoomLevel:e.zoomLevel,row:i.row,col:i.col}})}),this.clear()}function n(e,t){this._rows=e,this._cols=t,this._map=o(e).map(function(){return o(t,!1)})}function o(e,t){for(var i=new Array(e),n=0;n<e;n++)i[n]=t;return i}e.exports=i,i.prototype.clear=function(){var e=this._loadedByLevel={};this._levels.forEach(function(t){e[t.zoomLevel]=new n(t.rows,t.cols)})},i.prototype.getTiles=function(e){var t,i=[],o=this._levels[0].zoomLevel,r=new n(this._levels[0].rows,this._levels[0].cols);if(null===e)t=0;else{var a=Math.ceil(e);t=function(e,t){for(var i=e.length,n=0;n<i;n++)if(o=e[n],o.zoomLevel<=a)return n;var o;return-1}(this._levels)}this._levels.slice(0,t+1).reverse().concat(this._levels.slice(t+1)).forEach(function(e){var t=this._loadedByLevel[e.zoomLevel],n=e.tiles.filter(function(e){return t.isLoaded(e.row,e.col)}),a=Math.pow(2,o-e.zoomLevel);n=n.filter(function(e){for(var t=!1,i=e.row*a,n=e.col*a,o=0;o<a;o++)for(var s=0;s<a;s++)r.isLoaded(i+o,n+s)||(t=!0,r.set(i+o,n+s,!0));return t}),i.push(n)},this),i.reverse();var s=[];return i.forEach(function(e){s.push.apply(s,e)}),s},i.prototype.updateFromCache=function(e){this.clear(),this._levels.forEach(function(t){var i=this._loadedByLevel[t.zoomLevel];t.tiles.forEach(function(t){e.has(t.url)&&i.set(t.row,t.col,!0)})},this)},i.prototype.updateWithLoadedUrls=function(e){e.forEach(function(e){var t=this._urlsToTiles[e];this._loadedByLevel[t.zoomLevel].set(t.row,t.col,!0)},this)},n.prototype.isLoaded=function(e,t){return e>=this._rows||t>=this._cols||this._map[e][t]},n.prototype.set=function(e,t,i){this._map[e][t]=i}},function(e,t){function i(e,t){var i,n,r,a,s,l,u,c,h,d,p,f,g,v,m=(n=e,d=null===t?n.pageLayouts:(c=n,h=Math.pow(2,t-c.maxZoomLevel),c.pageLayouts.map(function(e){return{dimensions:o(e.dimensions,h),pages:e.pages.map(function(e){return{index:e.index,groupOffset:{top:Math.floor(e.groupOffset.top*h),left:Math.floor(e.groupOffset.left*h)},dimensions:o(e.dimensions,h)}})}})),u=n.padding.document,n.verticallyOriented?(s="width",l=u.left+u.right):(s="height",l=u.top+u.bottom),p=l+d.reduce(function(e,t){return Math.max(t.dimensions[s],e)},0),f=n.verticallyOriented?n.padding.document.top:n.padding.document.left,g=[],v={top:n.padding.page.top,left:n.padding.page.left},d.forEach(function(e,t){var i,o;n.verticallyOriented?(i=f,o=(p-e.dimensions.width)/2):(i=(p-e.dimensions.height)/2,o=f);var r={top:i,bottom:i+v.top+e.dimensions.height,left:o,right:o+v.left+e.dimensions.width};g.push({index:t,dimensions:e.dimensions,pages:e.pages,region:r,padding:v}),f=n.verticallyOriented?r.bottom:r.right}),n.verticallyOriented?(r=f+v.top,a=p):(r=p,a=f+v.left),{dimensions:{height:r,width:a},pageGroups:g});this.dimensions=m.dimensions,this.pageGroups=m.pageGroups,this._pageLookup=(i={},m.pageGroups.forEach(function(e){e.pages.forEach(function(t){i[t.index]={index:t.index,group:e,dimensions:t.dimensions,groupOffset:t.groupOffset}})}),i)}function n(e){var t=e.groupOffset.top+e.group.region.top,i=e.groupOffset.left+e.group.region.left;return{top:t,bottom:t+e.dimensions.height,left:i,right:i+e.dimensions.width}}function o(e,t){return{height:Math.floor(e.height*t),width:Math.floor(e.width*t)}}e.exports=i,i.prototype.getPageInfo=function(e){return this._pageLookup[e]||null},i.prototype.getPageDimensions=function(e){if(!this._pageLookup||!this._pageLookup[e])return null;var t=n(this._pageLookup[e]);return{height:t.bottom-t.top,width:t.right-t.left}},i.prototype.getPageOffset=function(e,t){var i=this.getPageRegion(e,t);return i?{top:i.top,left:i.left}:null},i.prototype.getPageRegion=function(e,t){var i=this._pageLookup[e];if(!i)return null;var o=n(i);if(t&&t.excludePadding){var r=i.group.padding;return{top:o.top+r.top,left:o.left+r.left,bottom:o.bottom,right:o.right}}return o},i.prototype.getPageToViewportCenterOffset=function(e,t){var i=t.left,n=t.right-t.left,o=this.getPageOffset(e);return{x:i-o.left+parseInt(n/2,10),y:t.top-o.top+parseInt((t.bottom-t.top)/2,10)}}},function(e,t,i){"use strict";var n=i(25)("diva:ImageCache");e.exports=r;var o=100;function r(e){this.maxKeys=(e=e||{maxKeys:o}).maxKeys||o,this._held={},this._urls={},this._lru=[]}r.prototype.get=function(e){var t=this._urls[e];return t?t.img:null},r.prototype.has=function(e){return!!this._urls[e]},r.prototype.put=function(e,t){var i=this._urls[e];i?(i.img=t,this._promote(i)):(this._urls[e]=i={img:t,url:e},this._tryEvict(1),this._lru.unshift(i))},r.prototype._promote=function(e){var t=this._lru.indexOf(e);this._lru.splice(t,1),this._lru.unshift(e)},r.prototype._tryEvict=function(e){var t=this.maxKeys-e;if(!(this._lru.length<=t))for(var i=this._lru.length-1;;){var o=this._lru[i];if(!this._held[o.url]&&(n("Evicting image %s",o.url),this._lru.splice(i,1),delete this._urls[o.url],this._lru.length<=t))break;if(0===i){n.enabled&&n("Cache overfull by %s (all entries are being held)",this._lru.length-t);break}i--}},r.prototype.acquire=function(e){this._held[e]=(this._held[e]||0)+1,this._promote(this._urls[e])},r.prototype.release=function(e){this._held[e]>1?this._held[e]--:delete this._held[e],this._tryEvict(0)}},function(e,t,i){var n=i(25)("diva:ImageRequestHandler");function o(e){this._url=e.url,this._callback=e.load,this._errorCallback=e.error,this.timeoutTime=e.timeoutTime||0,this._aborted=this._complete=!1,this.timeout=setTimeout((function(){this._image=new Image,this._image.onload=this._handleLoad.bind(this),this._image.onerror=this._handleError.bind(this),this._image.src=e.url,n("Requesting image %s",e.url)}).bind(this),this.timeoutTime)}e.exports=o,o.prototype.abort=function(){n("Aborting request to %s",this._url),clearTimeout(this.timeout),this._image&&(this._image.onload=this._image.onerror=null,this._image.src=""),this._aborted=!0},o.prototype._handleLoad=function(){this._aborted?console.error("ImageRequestHandler invoked on cancelled request for "+this._url):this._complete?console.error("ImageRequestHandler invoked on completed request for "+this._url):(this._complete=!0,n("Received image %s",this._url),this._callback(this._image))},o.prototype._handleError=function(){n("Failed to load image %s",this._url),this._errorCallback(this._image)}},function(e,t){function i(e){return e}var n;e.exports={animate:function(e){var t=e.duration,o=e.parameters,r=e.onUpdate,a=e.onEnd,s=n(),l=s+t,u={},c={},h=Object.keys(o);h.forEach(function(e){var t,n,r,a=o[e];u[e]=(t=a.from,n=a.to,r=a.easing||i,function(e){return t+(n-t)*r(e)})});var d=requestAnimationFrame(function e(){var i,o=n(),a=Math.min((o-s)/t,1);i=a,h.forEach(function(e){c[e]=u[e](i)}),r(c),o<l?d=requestAnimationFrame(e):p({interrupted:!1})});return{cancel:function(){null!==d&&(cancelAnimationFrame(d),p({interrupted:!0}))}};function p(e){d=null,a&&a(e)}},easing:{linear:i}},n="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return Date.now()}},function(e,t,i){var n=i(35),o=i(37),r=i(38);function a(e,t){var i={};return t.forEach(function(t){i[t]=e[t]}),i}e.exports=function(e){if(e.inGrid)return r(a(e,["manifest","viewport","pagesPerRow","fixedHeightGrid","fixedPadding","showNonPagedPages"]));var t=a(e,["manifest","verticallyOriented","showNonPagedPages"]);return e.inBookLayout?n(t):o(t)}},function(e,t,i){var n=i(36);e.exports=function(e){return(t=e,i=t.manifest,o=[],r=null,a=[],s=function(){for(var e=0;e<a.length;e++)o.push([a[e]]);a=[]},i.pages.forEach(function(e,l){var u={index:l,dimensions:n(l,i),paged:!i.paged||e.paged};(t.showNonPagedPages||u.paged)&&(u.paged?0===l||e.facingPages?(o.push([u]),s()):null===r?r=u:(o.push([r,u]),r=null,s()):a.push(u))}),null!==r&&(o.push([r]),s()),o).map(function(t){return function(e,t){var i=e.verticallyOriented;if(2===t.length)return function(e,t,i){var n,o,r,a=e.dimensions,s=t.dimensions,l=Math.max(a.height,s.height);if(i){var u=Math.max(a.width,s.width);n=2*u,o=u-a.width,r=u}else n=a.width+s.width,o=0,r=a.width;return{dimensions:{height:l,width:n},pages:[{index:e.index,dimensions:a,groupOffset:{top:0,left:o}},{index:t.index,dimensions:s,groupOffset:{top:0,left:r}}]}}(t[0],t[1],i);var n=t[0],o=n.dimensions;return{dimensions:{height:o.height,width:i&&!e.manifest.pages[n.index].facingPages?2*o.width:o.width},pages:[{index:n.index,groupOffset:{top:0,left:n.paged?0===n.index&&i?o.width:0:i?o.width/2:0},dimensions:o}]}}(e,t)});var t,i,o,r,a,s}},function(e,t){e.exports=function(e,t){var i=t.getMaxPageDimensions(e);return{width:Math.floor(i.width),height:Math.floor(i.height)}}},function(e,t,i){var n=i(36);e.exports=function(e){var t=e.manifest,i=[];return t.pages.forEach(function(o,r){if(e.showNonPagedPages||!t.paged||o.paged){var a=n(r,t);i.push({dimensions:a,pages:[{index:r,groupOffset:{top:0,left:0},dimensions:a}]})}}),i}},function(e,t){e.exports=function(e){var t=e.viewport.width,i=e.manifest,n=e.pagesPerRow,o=e.fixedHeightGrid,r=e.fixedPadding,a=e.showNonPagedPages,s=(t-r*(n+1))/n,l=s,u=o?r+i.minRatio*s:r+i.maxRatio*s,c=[],h=[],d={height:u,width:t};return i.pages.forEach(function(e,t){if(a||!i.paged||e.paged){var s=(y=(m=(f=e).d[f.d.length-1]).h/m.w,o?(g=(u-r)/y,v=u-r):v=(g=l)*y,{width:Math.round(g),height:Math.round(v)}),p=Math.floor(h.length*(r+l)+r);o&&(p+=(l-s.width)/2),h.push({index:t,dimensions:s,groupOffset:{top:0,left:p}}),h.length===n&&(c.push({dimensions:d,pages:h}),h=[])}var f,g,v,m,y}),h.length>0&&c.push({dimensions:d,pages:h}),c}},function(e,t){e.exports=function(e){var t={};return e.forEach(function(e){var i,n;i=t,n=e,Object.keys(n).forEach(function(e){Object.defineProperty(i,e,{get:function(){return n[e]},set:function(){throw new TypeError("Cannot set settings."+e)}})})}),t}},function(e,t,i){var n=i(3).extend;function o(e){this.whitelistedKeys=e.whitelistedKeys||[],this.additionalProperties=e.additionalProperties||[],this.validations=e.validations}function r(e,t,i){var n={proxy:{},index:null},o=(function(e,t,i){return i in t?t[i]:e[i]}).bind(null,e,t),r={};return i.whitelistedKeys.forEach(function(e){r[e]={get:o.bind(null,e)}}),i.additionalProperties.forEach(function(e){r[e.key]={get:e.get}}),i.validations.forEach(function(e,t){r[e.key]={get:function(){if(t<n.index)return o(e.key);throw new TypeError("Cannot access setting "+e.key+" while validating "+i.validations[n.index].key)}}}),Object.defineProperties(n.proxy,r),n}e.exports=o,o.prototype.isValid=function(e,t,i){var n=null;if(this.validations.some(function(t,i){return t.key===e&&(n=i,!0)}),null===n)return!0;var o={};o[e]=t;var a=r(i,o,this);return!this._runValidation(n,t,a)},o.prototype.validate=function(e){this._validateOptions({},e)},o.prototype.getValidatedOptions=function(e,t){var i=n({},t);return this._validateOptions(e,i),i},o.prototype._validateOptions=function(e,t){var i=r(e,t,this);this._applyValidations(t,i)},o.prototype._applyValidations=function(e,t){this.validations.forEach(function(i,n){if(e.hasOwnProperty(i.key)){var o=e[i.key],r=this._runValidation(n,o,t);r&&(r.warningSuppressed||console.warn("Invalid value for "+i.key+": "+o+". Using "+r.value+" instead."),e[i.key]=r.value)}},this)},o.prototype._runValidation=function(e,t,i){var n=this.validations[e];i.index=e;var o=!1,r=n.validate(t,i.proxy,{suppressWarning:function(){o=!0}});return void 0===r||r===t?null:{value:r,warningSuppressed:o}}},function(e,t){function i(e,t){this.intersectionTolerance=(t=t||{}).intersectionTolerance||0,this.maxExtent=t.maxExtent||2e3,this.outer=e,this._top=this._left=this._width=this._height=this._innerDimensions=null,this.invalidate()}function n(e,t){var i="_"+e,n="scroll"+e.charAt(0).toUpperCase()+e.slice(1);return{get:function(){return this[i]},set:function(e){var o;o=this._innerDimensions?a(e,0,this._innerDimensions[t]-this[t]):s(e,0),this[i]=this.outer[n]=o}}}function o(e){return{get:function(){return this["_"+e]}}}function r(e,t,i){return e>=t&&e<=i}function a(e,t,i){return s(l(e,i),t)}function s(e,t){return Math.max(e,t)}function l(e,t){return Math.min(e,t)}e.exports=i,i.prototype.intersectsRegion=function(e){return this.hasHorizontalOverlap(e)&&this.hasVerticalOverlap(e)},i.prototype.hasVerticalOverlap=function(e){var t=this.top-this.intersectionTolerance,i=this.bottom+this.intersectionTolerance;return r(e.top,t,i)||r(e.bottom,t,i)||e.top<=t&&e.bottom>=i},i.prototype.hasHorizontalOverlap=function(e){var t=this.left-this.intersectionTolerance,i=this.right+this.intersectionTolerance;return r(e.left,t,i)||r(e.right,t,i)||e.left<=t&&e.right>=i},i.prototype.invalidate=function(){this._width=l(this.outer.clientWidth,this.maxExtent),this._height=l(this.outer.clientHeight,this.maxExtent),this._top=this.outer.scrollTop,this._left=this.outer.scrollLeft},i.prototype.setInnerDimensions=function(e){this._innerDimensions=e,e&&(this._top=a(this._top,0,e.height-this._height),this._left=a(this._left,0,e.width-this._width))},Object.defineProperties(i.prototype,{top:n("top","height"),left:n("left","width"),width:o("width"),height:o("height"),bottom:{get:function(){return this._top+this._height}},right:{get:function(){return this._left+this._width}}})},function(e,t,i){var n,o,r,a,s,l,u,c,h,d,p,f,g,v,m,y,b,w,_,x,P,j,C,k,S,T=i(3),E=i(7);i(15),n=T,e.exports=(s={},l={},u={},c={brightnessMax:150,brightnessMin:-100,brightnessStep:1,contrastMax:3,contrastMin:-1,contrastStep:.05,localStoragePrefix:"canvas-",mobileWebkitMaxZoom:2,rgbMax:50,rgbMin:-50,throbberFadeSpeed:200,throbberTimeout:100,buttons:["contrast","brightness","rotation","zoom"]},h=function(e){return e*Math.PI/180},d=function(e,t){var i=e.context,n=e.size/2,r=-e.width/2,a=-e.height/2;i.clearRect(0,0,e.size,e.size),i.save(),i.translate(n,n),i.rotate(h(t)),i.drawImage(o,r,a,e.width,e.height),i.restore(),e.data=i.getImageData(0,0,e.size,e.size)},p=function(){var e;for(e in r)if(r[e].current!==r[e].previous)return!0;return!1},f=function(){d(l,r.rotation.current),m(l)},g=function(){var e,t,i,o,a=r.rotation.current,l=r.zoom.current,c=r.zoom.previous;if(a!==r.rotation.previous||l!==c){var f=n("#diva-canvas-wrapper").scrollLeft(),g=n("#diva-canvas-wrapper").scrollTop(),v=u.viewport.width/2,y=u.viewport.height/2,b=(t=(e={x:f+v,y:g+y}).x-s.centerX,i=-(e.y-s.centerY),o=h(r.rotation.previous-a),{x:Math.cos(o)*t-Math.sin(o)*i+s.centerX,y:-(Math.sin(o)*t+Math.cos(o)*i)+s.centerY}),w=Math.pow(2,l-c),_=w*b.x-v,x=w*b.y-y;d(s,a),n("#diva-canvas-wrapper").scrollLeft(_),n("#diva-canvas-wrapper").scrollTop(x)}p()&&(m(s),function(){var e;for(e in r)r[e].previous=r[e].current}())},v=function(e){return r[e].current!==r[e].previous||r[e].current!==r[e].initial},m=function(e){var t,i,n,o,a,s,l,c,h=function(t){var i,n,o=e.data,r=e.context.createImageData(o),a=r.data;for(i=0,n=a.length;i<n;i++)a[i]=o.data[i];return r}(),d=h.data,p=r.contrast.current,f=(1+Math.min(u.brightnessMax,Math.max(u.brightnessMin,r.brightness.current))/u.brightnessMax)*p,g=128-128*p,m=r.red.current,y=r.green.current,b=r.blue.current,w=v("red"),_=v("green"),x=v("blue"),P=v("brightness"),j=v("contrast"),C=P||j;for(t=0,n=h.width;t<n;t++)for(i=0,o=h.height;i<o;i++)(s=d[a=4*(i*n+t)])+(l=d[a+1])+(c=d[a+2])>0&&(w&&s&&(s+=m),_&&l&&(l+=y),x&&c&&(c+=b),C&&(s&&(s=s*f+g),l&&(l=l*f+g),c&&(c=c*f+g)),d[a]=s,d[a+1]=l,d[a+2]=c);e.context.clearRect(0,0,n,o),e.context.putImageData(h,0,0)},y=function(){var e=n("#diva-canvas-wrapper").scrollLeft()*l.scaleFactor,t=n("#diva-canvas-wrapper").scrollTop()*l.scaleFactor,i=Math.min(Math.round(u.viewport.height*l.scaleFactor),u.mapSize)-4,o=Math.min(Math.round(u.viewport.width*l.scaleFactor),u.mapSize)-4;n("#diva-map-viewbox").height(i).width(o).css({top:t,left:e})},b=function(e,t){(o=new Image).crossOrigin="anonymous",o.onload=function(){s.size=Math.sqrt(o.width*o.width+o.height*o.height),s.canvas=document.getElementById("diva-canvas"),s.canvas.width=s.size,s.canvas.height=s.size,s.cornerX=(s.size-o.width)/2,s.cornerY=(s.size-o.height)/2,s.width=o.width,s.height=o.height,s.centerX=s.size/2,s.centerY=s.size/2,s.context=s.canvas.getContext("2d"),s.context.drawImage(o,s.cornerX,s.cornerY,s.width,s.height);try{s.data=s.context.getImageData(0,0,s.size,s.size)}catch(t){var e='<div id="diva-error" class="diva-error"><p><strong>Error</strong></p><p>'+t.message+"</p>";if("SecurityError"!==t.name)throw t;e+='<p>You may need to update your server configuration in order to use the image manipulation tools. For help, see the <a href="https://github.com/DDMAL/diva.js/wiki/The-API-and-Plugins#a-note-about-canvas-and-cross-site-data" target="_blank">canvas cross-site data documentation</a>.</p></div>',e+="</div>",n("#diva-canvas-backdrop").append(e),j()}var i;void 0===t&&(i=o,l.canvas=document.getElementById("diva-canvas-minimap"),l.size=u.mapSize,l.canvas.width=l.size,l.canvas.height=l.size,l.context=l.canvas.getContext("2d"),l.context.fillRect(0,0,l.size,l.size),l.scaleFactor=u.mapSize/s.size,l.cornerX=s.cornerX*l.scaleFactor,l.cornerY=s.cornerY*l.scaleFactor,l.width=i.width*l.scaleFactor,l.height=i.height*l.scaleFactor,l.context.drawImage(i,l.cornerX,l.cornerY,l.width,l.height),l.data=l.context.getImageData(0,0,u.mapSize,u.mapSize),n("#diva-map-viewbox").show(),y()),f(),g(),j(),"function"==typeof t&&t.call(t)},o.src=e,(o.complete||void 0===o.complete)&&(o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",o.src=e)},w=function(){var e=r[a],t=e.current,i=e.transform?e.transform(t):t;n("#diva-canvas-value").html(i)},_=function(){n("#diva-canvas-slider").val(r[a].current)},x=function(e){var t=u.zoomWidthRatio*Math.pow(2,e);return u.divaInstance.getPageImageURL(u.selectedPageIndex,{width:t})},P=function(){(r.zoom.current>0||u.mobileWebkit)&&n(u.selector+"throbber").addClass("canvas-throbber").show()},j=function(){n(u.selector+"throbber").removeClass("canvas-throbber").hide()},C=function(){var e,t={},i=!1,n=u.localStoragePrefix+u.filename;for(e in r)r[e].previous!==r[e].initial&&(t[e]=r[e].previous,i=!0);i?(u.pluginIcon.addClass("new"),S(n,t)):(u.pluginIcon.removeClass("new"),localStorage.removeItem(n))},k=function(e){switch(e.keyCode){case 38:return n("#diva-canvas-wrapper").scrollTop(document.getElementById("diva-canvas-wrapper").scrollTop-u.arrowScrollAmount),!1;case 40:return n("#diva-canvas-wrapper").scrollTop(document.getElementById("diva-canvas-wrapper").scrollTop+u.arrowScrollAmount),!1;case 37:return n("#diva-canvas-wrapper").scrollLeft(document.getElementById("diva-canvas-wrapper").scrollLeft-u.arrowScrollAmount),!1;case 39:return n("#diva-canvas-wrapper").scrollLeft(document.getElementById("diva-canvas-wrapper").scrollLeft+u.arrowScrollAmount),!1}},S=function(e,t){localStorage.setItem(e,JSON.stringify(t))},{init:function(e,t){if(!window.HTMLCanvasElement)return!1;n.extend(u,c,e.canvasPlugin),u.divaInstance=t,u.inCanvas=!1,u.iipServerURL=e.iipServerURL,u.imageDir=e.imageDir,u.selector=e.selector,u.mobileWebkit=e.mobileWebkit,u.arrowScrollAmount=e.arrowScrollAmount,r={contrast:{initial:1,min:u.contrastMin,max:u.contrastMax,step:u.contrastStep,transform:function(e){return e.toFixed(2)},title:"Change the contrast"},brightness:{initial:0,min:u.brightnessMin,max:u.brightnessMax,step:u.brightnessStep,title:"Adjust the brightness"},rotation:{initial:0,min:0,max:359,step:1,transform:function(e){return e+"&deg;"},title:"Rotate the image"},zoom:{initial:0,min:0,max:0,step:1,title:"Adjust the zoom level"},red:{initial:0,min:u.rgbMin,max:u.rgbMax,step:1,title:"Adjust the red channel"},green:{initial:0,min:u.rgbMin,max:u.rgbMax,step:1,title:"Adjust the green channel"},blue:{initial:0,min:u.rgbMin,max:u.rgbMax,step:1,title:"Adjust the blue channel"}};var i=function(){var e,t,i;for(i in r)(t=r[i]).current=e=t.initial,t.previous=e};if(i(),n("#diva-canvas-backdrop").length)return!0;var o,h,d=[];for(h in u.buttons)d.push('<div class="'+(o=u.buttons[h])+'" title="'+r[o].title+'"></div>');var v='<div id="diva-canvas-backdrop"><div id="diva-canvas-tools"><div id="diva-canvas-toolbar"><div id="diva-canvas-close" title="Return to the document viewer"></div><div id="diva-canvas-minimise" title="Minimise the toolbar"></div><span id="diva-canvas-info">Test</span></div><div id="diva-canvas-toolwindow"><div id="diva-map-viewbox"></div><canvas id="diva-canvas-minimap"></canvas><div id="diva-canvas-buttons">'+d.join("")+'</div><div id="diva-canvas-pane"><p id="diva-canvas-tooltip"><span id="diva-canvas-mode">contrast</span>: <span id="diva-canvas-value">0</span> <span id="diva-canvas-reset" class="link">(Reset)</span></p><input type="range" id="diva-canvas-slider"></input></div><br /><div class="action-buttons"><a href="#" id="diva-canvas-reset-all">Reset all</a><a href="#" id="diva-canvas-apply">Apply</a></div></div></div><div id="diva-canvas-wrapper"><canvas id="diva-canvas"></canvas></div></div>';n("body").append(v),u.mapSize=n("#diva-canvas-minimap").width(),n("#diva-canvas-buttons div").click(function(){n("#diva-canvas-buttons .clicked").removeClass("clicked"),m(n(this).attr("class"))});var m=function(e){var t=r[a=e];n("#diva-canvas-buttons ."+a).addClass("clicked"),n("#diva-canvas-mode").text(a);var i=t.current,o=t.transform?t.transform(i):i,s=document.getElementById("diva-canvas-slider");s.min=t.min,s.max=t.max,s.step=t.step,n("#diva-canvas-slider").val(i),n("#diva-canvas-value").html(o)};return m("contrast"),n("#diva-canvas-slider").on("input",function(e){r[a].current=parseFloat(this.value),w(),f()}),n("#diva-canvas-reset-all").click(function(){var e;for(e in r)r[e].current=r[e].initial;w(),_(),f()}),n("#diva-canvas-reset").click(function(){r[a].current=r[a].initial,w(),_(),f()}),n("#diva-canvas-apply").click(function(){p()&&(P(),setTimeout(function(){r.zoom.current!==r.zoom.previous?function(e,t){u.zoomLevel=e;var i=x(e);b(i,function(){l.scaleFactor=l.size/s.size,y(),C()})}(r.zoom.current):(g(),j(),C())},u.throbberTimeout))}),n("#diva-canvas-close").click(function(){n("body").removeClass("overflow-hidden"),s.context.clearRect(0,0,s.size,s.size),l.context.clearRect(0,0,l.size,l.size),n("#diva-canvas-wrapper").scrollTop(0).scrollLeft(0),n("#diva-canvas-backdrop").hide(),n("#diva-map-viewbox").hide(),j(),t.enableScrollable(),n(document).off("keydown",k),i(),w(),_(),n("#diva-canvas-buttons .clicked").removeClass("clicked"),m("contrast"),E.Events.publish("CanvasViewDidHide")}),n("#diva-canvas-minimise").click(function(){n("#diva-canvas-toolwindow").slideToggle("fast")}),n(window).resize(function(){u.viewport={height:window.innerHeight-e.scrollbarWidth,width:window.innerWidth-e.scrollbarWidth},u.inCanvas&&y()}),n("#diva-canvas-wrapper").scroll(function(){u.inCanvas&&y()}),n("#diva-canvas-minimap, #diva-map-viewbox").mouseup(function(e){var t=n("#diva-canvas-minimap").offset(),i=(e.pageX-t.left)/l.scaleFactor,o=(e.pageY-t.top)/l.scaleFactor;n("#diva-canvas-wrapper").scrollTop(o-u.viewport.height/2),n("#diva-canvas-wrapper").scrollLeft(i-u.viewport.width/2)}),n("#diva-canvas").mousedown(function(){n(this).addClass("grabbing")}).mouseup(function(){n(this).removeClass("grabbing")}),n("#diva-canvas-wrapper").kinetic(),n("#diva-canvas-wrapper").dragscrollable({acceptPropagatedEvent:!0}),E.Events.subscribe("ObjectDidLoad",this.setupHook,e.ID),E.Events.subscribe("ViewerDidTerminate",this.destroy,e.ID),E.Events.subscribe("PageDidLoad",this.onPageLoad,e.ID),!0},pluginName:"canvas",titleText:"View the image on a canvas and adjust various settings",setupHook:function(e){u.viewport={height:window.innerHeight-e.scrollbarWidth,width:window.innerWidth-e.scrollbarWidth},u.minZoomLevel=e.minZoomLevel,u.maxZoomLevel=e.maxZoomLevel,u.mobileWebkit&&(u.maxZoomLevel=Math.min(u.maxZoomLevel,u.mobileWebkitMaxZoom)),r.zoom.min=u.minZoomLevel,r.zoom.max=u.maxZoomLevel},handleClick:function(e,t,i,o){var s,l=i.getFilenames()[o],c=i.getPageDimensions(o).width-1,h=t.zoomLevel;u.zoomWidthRatio=c/Math.pow(2,h),u.pluginIcon=n(this),u.manifest=t.manifest,u.selectedPageIndex=o,u.mobileWebkit&&(h=Math.min(u.maxZoomLevel,h)),u.filename=l,r.zoom.initial=h,r.zoom.current=h;var d,p=(d=localStorage.getItem(u.localStoragePrefix+u.filename))&&JSON.parse(d);if(p)for(s in p)r[s].current=p[s],s===a&&(w(),_()),"zoom"===s&&(h=p[s]);r.zoom.previous=h,n("body").addClass("overflow-hidden"),n("#diva-canvas-backdrop").show(),i.disableScrollable(),n(document).keydown(k),u.inCanvas=!0;var f=x(h);n("#diva-canvas-info").text("Page "+(o+1)),P(),E.Events.publish("CanvasViewDidActivate",[o]),b(f)},onPageLoad:function(e,t,i){null!==localStorage.getItem(u.localStoragePrefix+t)&&n(i).find(".diva-canvas-icon").addClass("new")},destroy:function(e,t){n("#diva-canvas-backdrop").remove()}})},function(e,t,i){var n;i(3),e.exports=(n={},{init:function(e,t){return n.divaInstance=t,!0},pluginName:"download",titleText:"Download image at the given zoom level",handleClick:function(e,t,i,o){var r=i.getPageDimensions(o).width-1,a=n.divaInstance.getPageImageURL(o,{width:r});window.open(a)}})},function(e,t,i){i(3);var n=i(8),o=i(7);function r(e,t){this._divaInstance=e,this._overlays={},this._getCurrentHighlight=t}function a(e,t,i){this.page=e.page,this.highlight=e,this._highlightRegions=[],this._divaInstance=t,this._getCurrentHighlight=i}function s(e,t){return e/Math.pow(2,t)}function l(e,t){var i,n,o,r=e.getInstanceId()+"selected-highlight",a=document.getElementsByClassName(r);for(i=0;i<a.length;i++)(n=a[i]).id!==t.id&&(n.className=n.className.replace(" "+r,""),n.style.border="1px solid #555");if(e.isPageInViewport(t.page))for(o=document.querySelectorAll("*[data-highlight-id="+t.id+"]"),i=0;i<o.length;i++)(n=o[i]).className=n.className+" "+r,n.style.border="2px solid #000"}e.exports={init:function(e,t){var i,n=new r(t);e.parentObject.data("highlightManager",n),t.resetHighlights=function(){n.clear()},t.removeHighlightsOnPage=function(e){n.removeHighlightsOnPage(e)},t.highlightOnPages=function(e,i,n,o){for(var r=e.length;r--;)t.highlightOnPage(e[r],i[r],n,o)},t.highlightOnPage=function(t,i,o,r){return void 0===o&&(o="rgba(255, 0, 0, 0.2)"),r=void 0===r?e.ID+"highlight diva-highlight":e.ID+"highlight diva-highlight "+r,n.addHighlight({page:parseInt(t),regions:i,colour:o,divClass:r}),!0},t.gotoHighlight=function(e){var t=n.getHighlightByRegionId(e);return t?a(t.highlight.page,t.region):(console.warn("Diva just tried to find a highlight that doesn't exist."),!1)};var a=function(n,r){var a=parseFloat(r.uly)+parseFloat(r.height)/2,s=parseFloat(r.ulx)+parseFloat(r.width)/2,u=t.translateFromMaxZoomLevel(a),c=t.translateFromMaxZoomLevel(s);n=parseInt(n,10),t.gotoPageByIndex(n);var h=t.getSettings().viewportObject,d=h.scrollTop()+u-h.height()/2+e.verticalPadding,p=h.scrollLeft()+c-h.width()/2+e.horizontalPadding;return h.scrollTop(d),h.scrollLeft(p),o.Events.publish("SelectedHighlightChanged",[r.id,(i={region:r,page:n}).page]),l(t,i),r.id},s=function(i){return t.translateFromMaxZoomLevel(e.verticallyOriented?parseFloat(i.uly)+parseFloat(i.height)/2:parseFloat(i.ulx)+parseFloat(i.width)/2)},u=function(o){var r,l,u,c,h,d,p,f,g,v,m=!1;for(i?(u=i.page,l=s(i.region)):(l=0,u=0),h=(c=n.getHighlightRegions(u)).length,d=t.getPageDimensionsAtZoomLevel(u,t.getZoomLevel()),r=o?e.verticallyOriented?d.height:d.width:0,v=o?function(e,t,i){return e>t&&e<i}:function(e,t,i){return e<t&&e>i};h--;)v(p=s(g=c[h]),l,r)&&(m=!0,r=p,f=g);if(m)return a(u,f);var y,b=n.getHighlightedPages(),w=b.indexOf(u.toString());if(o)for(;!y||!t.isPageIndexValid(y);)y=w==b.length-1?b[0]:b[++w];else for(;!y||!t.isPageIndexValid(y);)y=0===w?b[b.length-1]:b[--w];for(h=(c=n.getHighlightRegions(y)).length,d=t.getPageDimensionsAtZoomLevel(y,t.getMaxZoomLevel()),r=o?e.verticallyOriented?d.height:d.width:0,v=o?function(e,t){return e<t}:function(e,t){return e>t};h--;)v(p=s(g=c[h]),r)&&(m=!0,r=p,f=g);return a(y,f)};return t.gotoNextHighlight=function(){return n.getHighlightCount()>0&&u(!0)},t.gotoPreviousHighlight=function(){return n.getHighlightCount()>0&&u(!1)},o.Events.subscribe("ViewerWillTerminate",this.destroy,e.ID),!0},destroy:function(e){e.parentObject.data("highlightManager").clear(),e.parentObject.removeData("highlightManager")},pluginName:"highlight",titleText:"Highlight regions of pages",HighlightManager:r},r.prototype.getHighlightCount=function(){var e=0;return Object.keys(this._overlays).forEach(function(t){e+=this._overlays[t].highlight.regions.length},this),e},r.prototype.getHighlightRegions=function(e){return this._overlays[e]?this._overlays[e].highlight.regions:[]},r.prototype.getHighlightedPages=function(){return Object.keys(this._overlays)},r.prototype.getHighlightByRegionId=function(e){for(var t in this._overlays)if(this._overlays.hasOwnProperty(t)){var i=this._overlays[t].highlight.regions;for(var n in i)if(i.hasOwnProperty(n)&&i[n].divID===e)return{highlight:this._overlays[t].highlight,region:i[n]}}return null},r.prototype.addHighlight=function(e){var t=this._overlays[e.page];t&&this._divaInstance.__removePageOverlay(t);var i=new a(e,this._divaInstance,this._getCurrentHighlight);this._overlays[e.page]=i,this._divaInstance.__addPageOverlay(i)},r.prototype.removeHighlightsOnPage=function(e){this._overlays[e]&&(this._divaInstance.__removePageOverlay(this._overlays[e]),delete this._overlays[e])},r.prototype.clear=function(){for(var e in this._overlays)this._overlays.hasOwnProperty(e)&&this._divaInstance.__removePageOverlay(this._overlays[e]);this._overlays={}},a.prototype.mount=function(){for(var e=this._divaInstance.getSettings(),t=this.highlight,i=t.regions,r=t.colour,a=t.divClass,s=i.length;s--;){var u=i[s],c=n("div",{class:a,style:{background:r,border:"1px solid #555",position:"absolute",zIndex:100}});void 0!==u.divID&&c.setAttribute("data-highlight-id",u.divID),void 0!==u.name&&c.setAttribute("data-name",u.name),this._highlightRegions.push({element:c,region:u})}this.refresh();var h=document.createDocumentFragment();this._highlightRegions.forEach(function(e){h.appendChild(e.element)}),e.innerElement.appendChild(h),this._getCurrentHighlight&&l(this._divaInstance,this._getCurrentHighlight()),o.Events.publish("HighlightCompleted",[this.page,this._divaInstance.getFilenames()[this.page]])},a.prototype.unmount=function(){var e=this._divaInstance.getSettings().innerElement;this._highlightRegions.forEach(function(t){e.removeChild(t.element)}),this._highlightRegions=[]},a.prototype.refresh=function(){var e=this._divaInstance.getMaxZoomLevel(),t=this._divaInstance.getPageDimensionsAtZoomLevel(this.page,e).width,i=this._divaInstance.getPageDimensions(this.page).width,o=Math.log(t/i)/Math.log(2),r=this._divaInstance.getPageOffset(this.page,{excludePadding:!0,incorporateViewport:!0});this._highlightRegions.forEach(function(e){var t=e.region;n.setAttributes(e.element,{style:{width:s(t.width,o)+"px",height:s(t.height,o)+"px",top:r.top+s(t.uly,o)+"px",left:r.left+s(t.ulx,o)+"px"}})})}},function(e,t,i){var n,o,r=i(3),a=i(7),s=i(44).HighlightManager;n=r,e.exports=(o={},{init:function(e,t){var i=new s(t);e.parentObject.data("highlightManager",i),o.highlightedPages=[],t.resetHighlights=function(){i.clear()},t.removeHighlightsOnPage=function(e){i.removeHighlightsOnPage(e)},t.hideHighlights=function(){o.highlightsVisible=!1,n(e.innerElement).addClass("annotations-hidden")},t.showHighlights=function(){o.highlightsVisible=!0,n(e.innerElement).removeClass("annotations-hidden")},t.highlightOnPages=function(e,i,n,o){for(var r=e.length;r--;)t.highlightOnPage(e[r],i[r],n,o)},t.highlightOnPage=function(t,n,o,r){return void 0===o&&(o="rgba(255, 0, 0, 0.2)"),i.addHighlight({page:t,regions:n,colour:o,divClass:r=void 0===r?e.ID+"highlight diva-highlight":e.ID+"highlight diva-highlight "+r}),!0},t.gotoHighlight=function(e){var t=i.getHighlightByRegionId(e);return t?r(t.highlight.page,t.region):(console.warn("Diva just tried to find a highlight that doesn't exist."),!1)};var r=function(i,n){var o=parseFloat(n.uly)+parseFloat(n.height)/2,r=parseFloat(n.ulx)+parseFloat(n.width)/2,a=t.translateFromMaxZoomLevel(o),s=t.translateFromMaxZoomLevel(r);i=parseInt(i,10),t.gotoPageByIndex(i);var l=t.getSettings().viewportObject,u=l.scrollTop()+a-l.height()/2+e.verticalPadding,c=l.scrollLeft()+s-l.width()/2+e.horizontalPadding;l.scrollTop(u),l.scrollLeft(c)},l=function(e){return function(i,n,r){for(var a=i,s=i.length,l=[],u=0;u<s;u++){var c=a[u],h=c.resource.chars,d=c.on,p=d.slice(d.indexOf("#xywh=")+6).split(","),f={ulx:parseInt(p[0],10),uly:parseInt(p[1],10),width:parseInt(p[2],10),height:parseInt(p[3],10),name:h};l.push(f)}t.highlightOnPage(e,l),o.highlightedPages.push(e)}};a.Events.subscribe("ManifestDidLoad",function(e){o.manifest=e},e.ID),a.Events.subscribe("PageWillLoad",function(e){if(o.highlightsVisible){for(var t=0;t<o.highlightedPages.length;t++)if(o.highlightedPages[t]===e)return;!function(e){var t=o.manifest.sequences[0].canvases;if(t[e].hasOwnProperty("otherContent"))for(var i=t[e].otherContent,r=0;r<i.length;r++)"sc:AnnotationList"===i[r]["@type"]&&n.ajax({url:i[r]["@id"],cache:!0,dataType:"json",success:l(e)})}(e)}},e.ID);var u=[];return e.innerObject.on("mouseenter","."+e.ID+"highlight",function(e){var t=e.target,i=t.dataset.name,n=document.createElement("div");n.style.top=t.offsetTop+t.offsetHeight-1+"px",n.style.left=t.style.left,n.style.background="#fff",n.style.border="1px solid #555",n.style.position="absolute",n.style.zIndex=101,n.className="annotation-overlay",n.textContent=i,t.parentNode.appendChild(n),u.push(n)}),e.innerObject.on("mouseleave","."+e.ID+"highlight",function(e){for(;u.length;){var t=u.pop();t.parentNode.removeChild(t)}}),a.Events.subscribe("ViewerDidLoad",function(){n("#"+e.ID+"page-nav").before('<div id="'+e.ID+'annotations-icon" class="diva-button diva-annotations-icon" title="Turn annotations on or off"></div>'),n(e.selector+"annotations-icon").addClass("annotations-icon-active"),n("#"+e.ID+"annotations-icon").on("click",function(i){o.highlightsVisible?(t.hideHighlights(),n(e.selector+"annotations-icon").removeClass("annotations-icon-active")):(t.showHighlights(),n(e.selector+"annotations-icon").addClass("annotations-icon-active"))})},e.ID),o.highlightsVisible=!0,!0},destroy:function(e,t){e.parentObject.removeData("highlights")},pluginName:"IIIFHighlight",titleText:"Highlight regions of pages"})},function(e,t,i){var n,o=i(3),r=i(7);n=o,e.exports={init:function(e,t){return r.Events.subscribe("ManifestDidLoad",function(t){var i=function(e,t){var i=(e.charAt(0).toUpperCase()+e.slice(1)).replace("_"," ");return t.match(/^https?:\/\//)&&(t='<a href="'+t+'" target="_blank">'+t+"</a>"),'<div class="metadata-row"><span class="metadata-label">'+i+':</span> <span class="metadata-value">'+t+"</span></div>"},o=function(e,t){for(var i=0;i<e.length;i++)if(e[i]["@language"]===t)return e[i]["@value"];return e[0]["@value"]||e["@value"]},r=function(e){for(var n="",r=0;r<e.length;r++){var a=e[r];if(t.hasOwnProperty(a))if(t[a].constructor===Array){var s=o(t[a],"en");n+=i(a,s)}else n+=i(a,t[a])}return n},a='<div id="'+e.ID+'metadata" class="diva-modal">';if(a+=r(["label"]),t.hasOwnProperty("metadata"))for(var s=t.metadata,l=0;l<s.length;l++)if(s[l].value.constructor===Array){var u=o(s[l].value,"en");a+=i(s[l].label,u)}else a+=i(s[l].label,s[l].value);a+=r(["description","within","see_also","license","attribution"]),e.parentObject.prepend(a+="</div>"),n(e.selector+"metadata").hide()},e.ID),e.parentObject.prepend('<div style="text-align: center; clear: both"><a href="#" id="'+e.ID+'metadata-link" class="diva-metadata-link">Details</a></div>'),n(e.selector+"metadata-link").on("click",function(t){n(e.selector+"metadata").fadeToggle("fast")}),!0},destroy:function(e,t){},pluginName:"IIIFMetadata",titleText:"Show metadata from a IIIF manifest"}}])}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(e.jQuery?e.jQuery:e.Zepto)}(this,function(e,t){e.fn.jPlayer=function(i){var n="string"==typeof i,o=Array.prototype.slice.call(arguments,1),r=this;return i=!n&&o.length?e.extend.apply(null,[!0,i].concat(o)):i,n&&"_"===i.charAt(0)?r:(this.each(n?function(){var n=e(this).data("jPlayer"),a=n&&e.isFunction(n[i])?n[i].apply(n,o):n;if(a!==n&&a!==t)return r=a,!1}:function(){var t=e(this).data("jPlayer");t?t.option(i||{}):e(this).data("jPlayer",new e.jPlayer(i,this))}),r)},e.jPlayer=function(t,i){if(arguments.length){this.element=e(i),this.options=e.extend(!0,{},this.options,t);var n=this;this.element.bind("remove.jPlayer",function(){n.destroy()}),this._init()}},"function"!=typeof e.fn.stop&&(e.fn.stop=function(){}),e.jPlayer.emulateMethods="load play pause",e.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",e.jPlayer.emulateOptions="muted volume",e.jPlayer.reservedEvent="ready flashreset resize repeat error warning",e.jPlayer.event={},e.each(["ready","setmedia","flashreset","resize","repeat","click","error","warning","loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],function(){e.jPlayer.event[this]="jPlayer_"+this}),e.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","canplay","canplaythrough"],e.jPlayer.pause=function(){e.jPlayer.prototype.destroyRemoved(),e.each(e.jPlayer.prototype.instances,function(e,t){t.data("jPlayer").status.srcSet&&t.jPlayer("pause")})},e.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var i=function(){this.init()};i.prototype={init:function(){this.options={timeFormat:e.jPlayer.timeFormat}},time:function(e){e=e&&"number"==typeof e?e:0;var t=new Date(1e3*e),i=t.getUTCHours(),n=this.options.timeFormat.showHour?t.getUTCMinutes():t.getUTCMinutes()+60*i,o=this.options.timeFormat.showMin?t.getUTCSeconds():t.getUTCSeconds()+60*n,r="";return r+=this.options.timeFormat.showHour?(this.options.timeFormat.padHour&&i<10?"0"+i:i)+this.options.timeFormat.sepHour:"",(r+=this.options.timeFormat.showMin?(this.options.timeFormat.padMin&&n<10?"0"+n:n)+this.options.timeFormat.sepMin:"")+(this.options.timeFormat.showSec?(this.options.timeFormat.padSec&&o<10?"0"+o:o)+this.options.timeFormat.sepSec:"")}};var n=new i;e.jPlayer.convertTime=function(e){return n.time(e)},e.jPlayer.uaBrowser=function(e){var t=e.toLowerCase(),i=/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(t)||[];return{browser:i[1]||"",version:i[2]||"0"}},e.jPlayer.uaPlatform=function(e){var t=e.toLowerCase(),i=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(t)||[],n=/(ipad|playbook)/.exec(t)||!/(mobile)/.exec(t)&&/(android)/.exec(t)||[];return i[1]&&(i[1]=i[1].replace(/\s/g,"_")),{platform:i[1]||"",tablet:n[1]||""}},e.jPlayer.browser={},e.jPlayer.platform={};var o=e.jPlayer.uaBrowser(navigator.userAgent);o.browser&&(e.jPlayer.browser[o.browser]=!0,e.jPlayer.browser.version=o.version);var r=e.jPlayer.uaPlatform(navigator.userAgent);r.platform&&(e.jPlayer.platform[r.platform]=!0,e.jPlayer.platform.mobile=!r.tablet,e.jPlayer.platform.tablet=!!r.tablet),e.jPlayer.getDocMode=function(){var t;return e.jPlayer.browser.msie&&(document.documentMode?t=document.documentMode:(t=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(t=7))),t},e.jPlayer.browser.documentMode=e.jPlayer.getDocMode(),e.jPlayer.nativeFeatures={init:function(){var e,t,i,n=document,o=n.createElement("video"),r={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},a=["w3c","moz","webkit","webkitVideo","ms"];for(this.fullscreen=e={support:{w3c:!!n[r.w3c[0]],moz:!!n[r.moz[0]],webkit:"function"==typeof n[r.webkit[3]],webkitVideo:"function"==typeof o[r.webkitVideo[2]],ms:"function"==typeof o[r.ms[2]]},used:{}},t=0,i=a.length;t<i;t++){var s=a[t];if(e.support[s]){e.spec=s,e.used[s]=!0;break}}if(e.spec){var l=r[e.spec];e.api={fullscreenEnabled:!0,fullscreenElement:function(e){return(e=e||n)[l[1]]},requestFullscreen:function(e){return e[l[2]]()},exitFullscreen:function(e){return(e=e||n)[l[3]]()}},e.event={fullscreenchange:l[4],fullscreenerror:l[5]}}else e.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},e.event={}}},e.jPlayer.nativeFeatures.init(),e.jPlayer.focus=null,e.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var a=function(t){var i,n=e.jPlayer.focus;n&&(e.each(e.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(e,n){if(t.target.nodeName.toUpperCase()===n.toUpperCase())return i=!0,!1}),i||e.each(n.options.keyBindings,function(i,o){if(o&&e.isFunction(o.fn)&&("number"==typeof o.key&&t.which===o.key||"string"==typeof o.key&&t.key===o.key))return t.preventDefault(),o.fn(n),!1}))};e.jPlayer.keys=function(t){e(document.documentElement).unbind("keydown.jPlayer"),t&&e(document.documentElement).bind("keydown.jPlayer",a)},e.jPlayer.keys(!0),e.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(t){t.jPlayer.options.loop?e(this).unbind(".jPlayerRepeat").bind(e.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){e(this).jPlayer("play")}):e(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(e){e.status.paused?e.play():e.pause()}},fullScreen:{key:70,fn:function(e){(e.status.video||e.options.audioFullScreen)&&e._setOption("fullScreen",!e.options.fullScreen)}},muted:{key:77,fn:function(e){e._muted(!e.options.muted)}},volumeUp:{key:190,fn:function(e){e.volume(e.options.volume+.1)}},volumeDown:{key:188,fn:function(e){e.volume(e.options.volume-.1)}},loop:{key:76,fn:function(e){e._loop(!e.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var i=this;if(this.element.empty(),this.status=e.extend({},this.status),this.internal=e.extend({},this.internal),this.options.timeFormat=e.extend({},e.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=e.jPlayer.platform.ipad||e.jPlayer.platform.iphone||e.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!e.jPlayer.focus&&(e.jPlayer.focus=this),this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN},e.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto"),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.aurora={},this.aurora.formats=[],this.aurora.properties=[],this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),e.each(this.options.supplied.toLowerCase().split(","),function(t,n){var o=n.replace(/^\s+|\s+$/g,"");if(i.format[o]){var r=!1;e.each(i.formats,function(e,t){if(o===t)return r=!0,!1}),r||i.formats.push(o)}}),e.each(this.options.solution.toLowerCase().split(","),function(t,n){var o=n.replace(/^\s+|\s+$/g,"");if(i.solution[o]){var r=!1;e.each(i.solutions,function(e,t){if(o===t)return r=!0,!1}),r||i.solutions.push(o)}}),e.each(this.options.auroraFormats.toLowerCase().split(","),function(t,n){var o=n.replace(/^\s+|\s+$/g,"");if(i.format[o]){var r=!1;e.each(i.aurora.formats,function(e,t){if(o===t)return r=!0,!1}),r||i.aurora.formats.push(o)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=e.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=e.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:t}),this.internal.video=e.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:t}),this.internal.flash=e.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:t,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")}),this.internal.poster=e.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:t}),e.each(e.jPlayer.event,function(e,n){i.options[e]!==t&&(i.element.bind(n+".jPlayer",i.options[e]),i.options[e]=t)}),this.require.audio=!1,this.require.video=!1,e.each(this.formats,function(e,t){i.require[i.format[t].media]=!0}),this.options=e.extend(!0,{},this.require.video?this.optionsVideo:this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),e.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){i.status.video&&!i.status.waitForPlay||i.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=e("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){i._trigger(e.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.aurora.canPlay={},this.flash.canPlay={},e.each(this.formats,function(t,n){i.html.canPlay[n]=i.html[i.format[n].media].available&&""!==i.htmlElement[i.format[n].media].canPlayType(i.format[n].codec),i.aurora.canPlay[n]=e.inArray(n,i.aurora.formats)>-1,i.flash.canPlay[n]=i.format[n].flashCanPlay&&i.flash.available}),this.html.desired=!1,this.aurora.desired=!1,this.flash.desired=!1,e.each(this.solutions,function(t,n){if(0===t)i[n].desired=!0;else{var o=!1,r=!1;e.each(i.formats,function(e,t){i[i.solutions[0]].canPlay[t]&&("video"===i.format[t].media?r=!0:o=!0)}),i[n].desired=i.require.audio&&!o||i.require.video&&!r}}),this.html.support={},this.aurora.support={},this.flash.support={},e.each(this.formats,function(e,t){i.html.support[t]=i.html.canPlay[t]&&i.html.desired,i.aurora.support[t]=i.aurora.canPlay[t]&&i.aurora.desired,i.flash.support[t]=i.flash.canPlay[t]&&i.flash.desired}),this.html.used=!1,this.aurora.used=!1,this.flash.used=!1,e.each(this.solutions,function(t,n){e.each(i.formats,function(e,t){if(i[n].support[t])return i[n].used=!0,!1})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:e.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SOLUTION,hint:e.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var n,o="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(e.jPlayer.browser.msie&&(Number(e.jPlayer.browser.version)<9||e.jPlayer.browser.documentMode<9)){var r=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+o+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];n=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>');for(var a=0;a<r.length;a++)n.appendChild(document.createElement(r[a]))}else{var s=function(e,t,i){var n=document.createElement("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)};(n=document.createElement("object")).setAttribute("id",this.internal.flash.id),n.setAttribute("name",this.internal.flash.id),n.setAttribute("data",this.internal.flash.swf),n.setAttribute("type","application/x-shockwave-flash"),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("tabindex","-1"),s(n,"flashvars",o),s(n,"allowscriptaccess","always"),s(n,"bgcolor",this.options.backgroundColor),s(n,"wmode",this.options.wmode)}this.element.append(n),this.internal.flash.jq=e(n)}this.status.playbackRateEnabled=!(!this.html.used||this.flash.used)&&this._testPlaybackRate("audio"),this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=e("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=e("#"+this.internal.video.id),this.internal.video.jq.css(this.status.nativeVideoControls?{width:this.status.width,height:this.status.height}:{width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){i._trigger(e.jPlayer.event.click)}))),this.options.emulateHtml&&this._emulateHtmlBridge(),!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){i.internal.ready=!0,i.version.flash="n/a",i._trigger(e.jPlayer.event.repeat),i._trigger(e.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),e.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),e.each(this.css.jq,function(e,t){t.length&&t.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===e.jPlayer.focus&&(e.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},destroyRemoved:function(){var t=this;e.each(this.instances,function(e,i){t.element!==i&&(i.data("jPlayer")||(i.jPlayer("destroy"),delete t.instances[e]))})},enable:function(){},disable:function(){},_testCanPlayType:function(e){try{return e.canPlayType(this.format.mp3.codec),!0}catch(e){return!1}},_testPlaybackRate:function(e){var t;e="string"==typeof e?e:"audio",t=document.createElement(e);try{return"playbackRate"in t&&(t.playbackRate=.5,.5===t.playbackRate)}catch(e){return!1}},_uaBlocklist:function(t){var i=navigator.userAgent.toLowerCase(),n=!1;return e.each(t,function(e,t){if(t&&t.test(i))return n=!0,!1}),n},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(t,i){var n=this;t.preload=this.options.preload,t.muted=this.options.muted,t.volume=this.options.volume,this.status.playbackRateEnabled&&(t.defaultPlaybackRate=this.options.defaultPlaybackRate,t.playbackRate=this.options.playbackRate),t.addEventListener("progress",function(){i.gate&&(n.internal.cmdsIgnored&&this.readyState>0&&(n.internal.cmdsIgnored=!1),n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.progress))},!1),t.addEventListener("loadeddata",function(){i.gate&&(n.androidFix.setMedia=!1,n.androidFix.play&&(n.androidFix.play=!1,n.play(n.androidFix.time)),n.androidFix.pause&&(n.androidFix.pause=!1,n.pause(n.androidFix.time)),n._trigger(e.jPlayer.event.loadeddata))},!1),t.addEventListener("timeupdate",function(){i.gate&&(n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.timeupdate))},!1),t.addEventListener("durationchange",function(){i.gate&&(n._getHtmlStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.durationchange))},!1),t.addEventListener("play",function(){i.gate&&(n._updateButtons(!0),n._html_checkWaitForPlay(),n._trigger(e.jPlayer.event.play))},!1),t.addEventListener("playing",function(){i.gate&&(n._updateButtons(!0),n._seeked(),n._trigger(e.jPlayer.event.playing))},!1),t.addEventListener("pause",function(){i.gate&&(n._updateButtons(!1),n._trigger(e.jPlayer.event.pause))},!1),t.addEventListener("waiting",function(){i.gate&&(n._seeking(),n._trigger(e.jPlayer.event.waiting))},!1),t.addEventListener("seeking",function(){i.gate&&(n._seeking(),n._trigger(e.jPlayer.event.seeking))},!1),t.addEventListener("seeked",function(){i.gate&&(n._seeked(),n._trigger(e.jPlayer.event.seeked))},!1),t.addEventListener("volumechange",function(){i.gate&&(n.options.volume=t.volume,n.options.muted=t.muted,n._updateMute(),n._updateVolume(),n._trigger(e.jPlayer.event.volumechange))},!1),t.addEventListener("ratechange",function(){i.gate&&(n.options.defaultPlaybackRate=t.defaultPlaybackRate,n.options.playbackRate=t.playbackRate,n._updatePlaybackRate(),n._trigger(e.jPlayer.event.ratechange))},!1),t.addEventListener("suspend",function(){i.gate&&(n._seeked(),n._trigger(e.jPlayer.event.suspend))},!1),t.addEventListener("ended",function(){i.gate&&(e.jPlayer.browser.webkit||(n.htmlElement.media.currentTime=0),n.htmlElement.media.pause(),n._updateButtons(!1),n._getHtmlStatus(t,!0),n._updateInterface(),n._trigger(e.jPlayer.event.ended))},!1),t.addEventListener("error",function(){i.gate&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(clearTimeout(n.internal.htmlDlyCmdId),n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&!n.status.nativeVideoControls&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&!n.status.nativeVideoControls&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:e.jPlayer.error.URL,context:n.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1),e.each(e.jPlayer.htmlEvent,function(o,r){t.addEventListener(this,function(){i.gate&&n._trigger(e.jPlayer.event[r])},!1)})},_addAuroraEventListeners:function(t,i){var n=this;t.volume=100*this.options.volume,t.on("progress",function(){i.gate&&(n.internal.cmdsIgnored&&this.readyState>0&&(n.internal.cmdsIgnored=!1),n._getAuroraStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.progress),t.duration>0&&n._trigger(e.jPlayer.event.timeupdate))},!1),t.on("ready",function(){i.gate&&n._trigger(e.jPlayer.event.loadeddata)},!1),t.on("duration",function(){i.gate&&(n._getAuroraStatus(t),n._updateInterface(),n._trigger(e.jPlayer.event.durationchange))},!1),t.on("end",function(){i.gate&&(n._updateButtons(!1),n._getAuroraStatus(t,!0),n._updateInterface(),n._trigger(e.jPlayer.event.ended))},!1),t.on("error",function(){i.gate&&(n._updateButtons(!1),n._seeked(),n.status.srcSet&&(n.status.waitForLoad=!0,n.status.waitForPlay=!0,n.status.video&&!n.status.nativeVideoControls&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._validString(n.status.media.poster)&&!n.status.nativeVideoControls&&n.internal.poster.jq.show(),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n._error({type:e.jPlayer.error.URL,context:n.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(e,t){var i=0,n=0,o=0,r=0;isFinite(e.duration)&&(this.status.duration=e.duration),i=e.currentTime,n=this.status.duration>0?100*i/this.status.duration:0,"object"==typeof e.seekable&&e.seekable.length>0?(o=this.status.duration>0?100*e.seekable.end(e.seekable.length-1)/this.status.duration:100,r=this.status.duration>0?100*e.currentTime/e.seekable.end(e.seekable.length-1):0):(o=100,r=n),t&&(i=0,r=0,n=0),this.status.seekPercent=o,this.status.currentPercentRelative=r,this.status.currentPercentAbsolute=n,this.status.currentTime=i,this.status.remaining=this.status.duration-this.status.currentTime,this.status.videoWidth=e.videoWidth,this.status.videoHeight=e.videoHeight,this.status.readyState=e.readyState,this.status.networkState=e.networkState,this.status.playbackRate=e.playbackRate,this.status.ended=e.ended},_getAuroraStatus:function(e,t){var i=0,n=0,o=0,r=0;this.status.duration=e.duration/1e3,i=e.currentTime/1e3,n=this.status.duration>0?100*i/this.status.duration:0,e.buffered>0?(o=this.status.duration>0?e.buffered*this.status.duration/this.status.duration:100,r=this.status.duration>0?i/(e.buffered*this.status.duration):0):(o=100,r=n),t&&(i=0,r=0,n=0),this.status.seekPercent=o,this.status.currentPercentRelative=r,this.status.currentPercentAbsolute=n,this.status.currentTime=i,this.status.remaining=this.status.duration-this.status.currentTime,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_resetStatus:function(){this.status=e.extend({},this.status,e.jPlayer.prototype.status)},_trigger:function(t,i,n){var o=e.Event(t);o.jPlayer={},o.jPlayer.version=e.extend({},this.version),o.jPlayer.options=e.extend(!0,{},this.options),o.jPlayer.status=e.extend(!0,{},this.status),o.jPlayer.html=e.extend(!0,{},this.html),o.jPlayer.aurora=e.extend(!0,{},this.aurora),o.jPlayer.flash=e.extend(!0,{},this.flash),i&&(o.jPlayer.error=e.extend({},i)),n&&(o.jPlayer.warning=e.extend({},n)),this.element.trigger(o)},jPlayerFlashEvent:function(t,i){if(t===e.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var n=this.status.currentTime,o=this.status.paused;this.setMedia(this.status.media),this.volumeWorker(this.options.volume),n>0&&(o?this.pause(n):this.play(n))}this._trigger(e.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=i.version,this.version.needFlash!==this.version.flash&&this._error({type:e.jPlayer.error.VERSION,context:this.version.flash,message:e.jPlayer.errorMsg.VERSION+this.version.flash,hint:e.jPlayer.errorHint.VERSION}),this._trigger(e.jPlayer.event.repeat),this._trigger(t);if(this.flash.gate)switch(t){case e.jPlayer.event.progress:case e.jPlayer.event.timeupdate:this._getFlashStatus(i),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(t);break;case e.jPlayer.event.pause:case e.jPlayer.event.ended:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.click:this._trigger(t);break;case e.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:e.jPlayer.error.URL,context:i.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL});break;case e.jPlayer.event.seeking:this._seeking(),this._trigger(t);break;case e.jPlayer.event.seeked:this._seeked(),this._trigger(t);break;case e.jPlayer.event.ready:break;default:this._trigger(t)}return!1},_getFlashStatus:function(e){this.status.seekPercent=e.seekPercent,this.status.currentPercentRelative=e.currentPercentRelative,this.status.currentPercentAbsolute=e.currentPercentAbsolute,this.status.currentTime=e.currentTime,this.status.duration=e.duration,this.status.remaining=e.duration-e.currentTime,this.status.videoWidth=e.videoWidth,this.status.videoHeight=e.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(e){e===t?e=!this.status.paused:this.status.paused=!e,e?this.addStateClass("playing"):this.removeStateClass("playing"),!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen"),this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped"),this.css.jq.play.length&&this.css.jq.pause.length&&(e?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%")),this.css.jq.currentTime.length&&this._convertTime(this.status.currentTime)!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime));var e="",t=this.status.duration,i=this.status.remaining;this.css.jq.duration.length&&("string"==typeof this.status.media.duration?e=this.status.media.duration:("number"==typeof this.status.media.duration&&(i=(t=this.status.media.duration)-this.status.currentTime),e=this.options.remainingDuration?(i>0?"-":"")+this._convertTime(i):this._convertTime(t)),e!==this.css.jq.duration.text()&&this.css.jq.duration.text(e))},_convertTime:i.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg"),this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg"),this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.aurora.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.aurora.active=!1,this.flash.active=!1},_escapeHtml:function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this._escapeHtml(e)+'">x</a>',t.firstChild.href},_absoluteMediaUrls:function(t){var i=this;return e.each(t,function(e,n){n&&i.format[e]&&"data:"!==n.substr(0,5)&&(t[e]=i._qualifyURL(n))}),t},addStateClass:function(e){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[e])},removeStateClass:function(e){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[e])},setMedia:function(t){var i=this,n=!1,o=this.status.media.poster!==t.poster;this._resetMedia(),this._resetGate(),this._resetActive(),this.androidFix.setMedia=!1,this.androidFix.play=!1,this.androidFix.pause=!1,t=this._absoluteMediaUrls(t),e.each(this.formats,function(o,r){var a="video"===i.format[r].media;if(e.each(i.solutions,function(o,s){if(i[s].support[r]&&i._validString(t[r])){var l="html"===s,u="aurora"===s;return a?(l?(i.html.video.gate=!0,i._html_setVideo(t),i.html.active=!0):(i.flash.gate=!0,i._flash_setVideo(t),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i.status.video=!0):(l?(i.html.audio.gate=!0,i._html_setAudio(t),i.html.active=!0,e.jPlayer.platform.android&&(i.androidFix.setMedia=!0)):u?(i.aurora.gate=!0,i._aurora_setAudio(t),i.aurora.active=!0):(i.flash.gate=!0,i._flash_setAudio(t),i.flash.active=!0),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.hide(),i.status.video=!1),n=!0,!1}}),n)return!1}),n?(this.status.nativeVideoControls&&this.html.video.gate||this._validString(t.poster)&&(o?this.htmlElement.poster.src=t.poster:this.internal.poster.jq.show()),"string"==typeof t.title&&(this.css.jq.title.length&&this.css.jq.title.html(t.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",t.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",t.title)),this.status.srcSet=!0,this.status.media=e.extend({},t),this._updateButtons(!1),this._updateInterface(),this._trigger(e.jPlayer.event.setmedia)):this._error({type:e.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SUPPORT,hint:e.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(e.jPlayer.focus=this)},play:function(e){"object"==typeof e&&this.options.useStateClassSkin&&!this.status.paused?this.pause(e):(e="number"==typeof e?e:NaN,this.status.srcSet?(this.focus(),this.html.active?this._html_play(e):this.aurora.active?this._aurora_play(e):this.flash.active&&this._flash_play(e)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(e){e="number"==typeof e?e:NaN,this.status.srcSet?this.html.active?this._html_pause(e):this.aurora.active?this._aurora_pause(e):this.flash.active&&this._flash_pause(e):this._urlNotSetError("pause")},tellOthers:function(t,i){var n=this,o="function"==typeof i,r=Array.prototype.slice.call(arguments);"string"==typeof t&&(o&&r.splice(1,1),e.jPlayer.prototype.destroyRemoved(),e.each(this.instances,function(){n.element!==this&&(o&&!i.call(this.data("jPlayer"),n)||this.jPlayer.apply(this,r))}))},pauseOthers:function(e){this.tellOthers("pause",function(){return this.status.srcSet},e)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(e){e=this._limitValue(e,0,100),this.status.srcSet?this.html.active?this._html_playHead(e):this.aurora.active?this._aurora_playHead(e):this.flash.active&&this._flash_playHead(e):this._urlNotSetError("playHead")},_muted:function(e){this.mutedWorker(e),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},e)},mutedWorker:function(t){this.options.muted=t,this.html.used&&this._html_setProperty("muted",t),this.aurora.used&&this._aurora_mute(t),this.flash.used&&this._flash_mute(t),this.html.video.gate||this.html.audio.gate||(this._updateMute(t),this._updateVolume(this.options.volume),this._trigger(e.jPlayer.event.volumechange))},mute:function(e){this._muted(!("object"==typeof e&&this.options.useStateClassSkin&&this.options.muted)&&(e=e===t||!!e))},unmute:function(e){this._muted(!(e=e===t||!!e))},_updateMute:function(e){e===t&&(e=this.options.muted),e?this.addStateClass("muted"):this.removeStateClass("muted"),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):e?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(e){this.volumeWorker(e),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},e)},volumeWorker:function(t){t=this._limitValue(t,0,1),this.options.volume=t,this.html.used&&this._html_setProperty("volume",t),this.aurora.used&&this._aurora_volume(t),this.flash.used&&this._flash_volume(t),this.html.video.gate||this.html.audio.gate||(this._updateVolume(t),this._trigger(e.jPlayer.event.volumechange))},volumeBar:function(t){if(this.css.jq.volumeBar.length){var i=e(t.currentTarget),n=i.offset(),o=t.pageX-n.left,r=i.width(),a=i.height()-t.pageY+n.top,s=i.height();this.volume(this.options.verticalVolume?a/s:o/r)}this.options.muted&&this._muted(!1)},_updateVolume:function(e){e===t&&(e=this.options.volume),e=this.options.muted?0:e,this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*e+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(t){var i=this;this.options.cssSelectorAncestor=t,this._removeUiClass(),this.ancestorJq=t?e(t):[],t&&1!==this.ancestorJq.length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),e.each(this.options.cssSelector,function(e,t){i._cssSelector(e,t)}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(t,i){var n=this;"string"==typeof i?e.jPlayer.prototype.options.cssSelector[t]?(this.css.jq[t]&&this.css.jq[t].length&&this.css.jq[t].unbind(".jPlayer"),this.options.cssSelector[t]=i,this.css.cs[t]=this.options.cssSelectorAncestor+" "+i,this.css.jq[t]=i?e(this.css.cs[t]):[],this.css.jq[t].length&&this[t]&&this.css.jq[t].bind("click.jPlayer",function(i){i.preventDefault(),n[t](i),n.options.autoBlur?e(this).blur():e(this).focus()}),i&&1!==this.css.jq[t].length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[t],message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[t].length+" found for "+t+" method.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_METHOD,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:e.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_STRING,context:i,message:e.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:e.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(e){this.options.toggleDuration&&(this.options.captureDuration&&e.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(t){if(this.css.jq.seekBar.length){var i=e(t.currentTarget),n=i.offset(),o=t.pageX-n.left,r=i.width();this.playHead(100*o/r)}},playbackRate:function(e){this._setOption("playbackRate",e)},playbackRateBar:function(t){if(this.css.jq.playbackRateBar.length){var i=e(t.currentTarget),n=i.offset(),o=t.pageX-n.left,r=i.width(),a=i.height()-t.pageY+n.top,s=i.height();this.playbackRate((this.options.verticalPlaybackRate?a/s:o/r)*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate)}},_updatePlaybackRate:function(){var e=(this.options.playbackRate-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*e+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(e){this._loop(!("object"==typeof e&&this.options.useStateClassSkin&&this.options.loop))},repeatOff:function(){this._loop(!1)},_loop:function(t){this.options.loop!==t&&(this.options.loop=t,this._updateButtons(),this._trigger(e.jPlayer.event.repeat))},option:function(i,n){var o=i;if(0===arguments.length)return e.extend(!0,{},this.options);if("string"==typeof i){var r=i.split(".");if(n===t){for(var a=e.extend(!0,{},this.options),s=0;s<r.length;s++){if(a[r[s]]===t)return this._warning({type:e.jPlayer.warning.OPTION_KEY,context:i,message:e.jPlayer.warningMsg.OPTION_KEY,hint:e.jPlayer.warningHint.OPTION_KEY}),t;a=a[r[s]]}return a}for(var l=o={},u=0;u<r.length;u++)u<r.length-1?(l[r[u]]={},l=l[r[u]]):l[r[u]]=n}return this._setOptions(o),this},_setOptions:function(t){var i=this;return e.each(t,function(e,t){i._setOption(e,t)}),this},_setOption:function(t,i){var n=this;switch(t){case"volume":this.volume(i);break;case"muted":this._muted(i);break;case"globalVolume":this.options[t]=i;break;case"cssSelectorAncestor":this._cssSelectorAncestor(i);break;case"cssSelector":e.each(i,function(e,t){n._cssSelector(e,t)});break;case"playbackRate":this.options[t]=i=this._limitValue(i,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",i),this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[t]=i=this._limitValue(i,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",i),this._updatePlaybackRate();break;case"minPlaybackRate":this.options[t]=i=this._limitValue(i,.1,this.options.maxPlaybackRate-.1),this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[t]=i=this._limitValue(i,this.options.minPlaybackRate+.1,16),this._updatePlaybackRate();break;case"fullScreen":if(this.options[t]!==i){var o=e.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!o||o&&!this.status.waitForPlay)&&(o||(this.options[t]=i),i?this._requestFullscreen():this._exitFullscreen(),o||this._setOption("fullWindow",i))}break;case"fullWindow":this.options[t]!==i&&(this._removeUiClass(),this.options[t]=i,this._refreshSize());break;case"size":this.options.fullWindow||this.options[t].cssClass===i.cssClass||this._removeUiClass(),this.options[t]=e.extend({},this.options[t],i),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[t].cssClass!==i.cssClass&&this._removeUiClass(),this.options[t]=e.extend({},this.options[t],i),this._refreshSize();break;case"autohide":this.options[t]=e.extend({},this.options[t],i),this._updateAutohide();break;case"loop":this._loop(i);break;case"remainingDuration":this.options[t]=i,this._updateInterface();break;case"toggleDuration":this.options[t]=i;break;case"nativeVideoControls":this.options[t]=e.extend({},this.options[t],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[t]=e.extend({},this.options[t],i),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[t]=e.extend({},this.options[t],i),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[t]!==i&&(this.options[t]=i,i?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[t]=e.extend({},this.options[t],i);break;case"keyEnabled":this.options[t]=i,i||this!==e.jPlayer.focus||(e.jPlayer.focus=null);break;case"keyBindings":this.options[t]=e.extend(!0,{},this.options[t],i);break;case"audioFullScreen":case"autoBlur":this.options[t]=i}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(e.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var e=this,t=".jPlayerAutohide",i="mousemove.jPlayer"+t,n=function(t){var i,n=!1;"undefined"!=typeof e.internal.mouse?(i=e.internal.mouse.y-t.pageY,n=Math.floor(e.internal.mouse.x-t.pageX)>0||Math.floor(i)>0):n=!0,e.internal.mouse={x:t.pageX,y:t.pageY},n&&e.css.jq.gui.fadeIn(e.options.autohide.fadeIn,function(){clearTimeout(e.internal.autohideId),e.internal.autohideId=setTimeout(function(){e.css.jq.gui.fadeOut(e.options.autohide.fadeOut)},e.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(t),this.css.jq.gui.unbind(t),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind(i,n),this.css.jq.gui.bind(i,n),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(e){this._setOption("fullScreen",!("object"==typeof e&&this.options.useStateClassSkin&&this.options.fullScreen))},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var t=this,i=e.jPlayer.nativeFeatures.fullscreen;i.api.fullscreenEnabled&&i.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){t._fullscreenchange()}),document.addEventListener(i.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){this.internal.fullscreenchangeHandler&&document.removeEventListener(e.jPlayer.nativeFeatures.fullscreen.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!e.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var t=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],i=e.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(t=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.requestFullscreen(t)},_exitFullscreen:function(){var t,i=e.jPlayer.nativeFeatures.fullscreen;i.used.webkitVideo&&(t=this.htmlElement.video),i.api.fullscreenEnabled&&i.api.exitFullscreen(t)},_html_initMedia:function(t){var i=e(this.htmlElement.media).empty();e.each(t.track||[],function(e,t){var n=document.createElement("track");n.setAttribute("kind",t.kind?t.kind:""),n.setAttribute("src",t.src?t.src:""),n.setAttribute("srclang",t.srclang?t.srclang:""),n.setAttribute("label",t.label?t.label:""),t.def&&n.setAttribute("default",t.def),i.append(n)}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(e.jPlayer.event.timeupdate)},_html_setFormat:function(t){var i=this;e.each(this.formats,function(e,n){if(i.html.support[n]&&t[n])return i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1})},_html_setAudio:function(e){this._html_setFormat(e),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(e)},_html_setVideo:function(e){this._html_setFormat(e),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(e.poster)?e.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(e)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(e){var t=this,i=this.htmlElement.media;if(this.androidFix.pause=!1,this._html_load(),this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=e;else if(isNaN(e))i.play();else{this.internal.cmdsIgnored&&i.play();try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=e,i.play()}catch(i){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.play(e)},250))}}this._html_checkWaitForPlay()},_html_pause:function(e){var t=this,i=this.htmlElement.media;if(this.androidFix.play=!1,e>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),i.pause(),this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=e;else if(!isNaN(e))try{if(i.seekable&&!("object"==typeof i.seekable&&i.seekable.length>0))throw 1;i.currentTime=e}catch(i){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.pause(e)},250))}e>0&&this._html_checkWaitForPlay()},_html_playHead:function(e){var t=this,i=this.htmlElement.media;this._html_load();try{if("object"==typeof i.seekable&&i.seekable.length>0)i.currentTime=e*i.seekable.end(i.seekable.length-1)/100;else{if(!(i.duration>0)||isNaN(i.duration))throw"e";i.currentTime=e*i.duration/100}}catch(i){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.playHead(e)},250))}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(e,t){this.html.audio.available&&(this.htmlElement.audio[e]=t),this.html.video.available&&(this.htmlElement.video[e]=t)},_aurora_setAudio:function(t){var i=this;e.each(this.formats,function(e,n){if(i.aurora.support[n]&&t[n])return i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1}),this.aurora.player=new AV.Player.fromURL(this.status.src),this._addAuroraEventListeners(this.aurora.player,this.aurora),"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(t){this.status.waitForLoad||isNaN(t)||this.aurora.player.seek(t),this.aurora.player.playing||this.aurora.player.play(),this.status.waitForLoad=!1,this._aurora_checkWaitForPlay(),this._updateButtons(!0),this._trigger(e.jPlayer.event.play)},_aurora_pause:function(t){isNaN(t)||this.aurora.player.seek(1e3*t),this.aurora.player.pause(),t>0&&this._aurora_checkWaitForPlay(),this._updateButtons(!1),this._trigger(e.jPlayer.event.pause)},_aurora_playHead:function(e){this.aurora.player.duration>0&&this.aurora.player.seek(e*this.aurora.player.duration/100),this.status.waitForLoad||this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(e){this.aurora.player.volume=100*e},_aurora_mute:function(e){e?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume,this.aurora.properties.muted=e},_flash_setAudio:function(t){var i=this;try{e.each(this.formats,function(e,n){if(i.flash.support[n]&&t[n]){switch(n){case"m4a":case"fla":i._getMovie().fl_setAudio_m4a(t[n]);break;case"mp3":i._getMovie().fl_setAudio_mp3(t[n]);break;case"rtmpa":i._getMovie().fl_setAudio_rtmp(t[n])}return i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(e){this._flashError(e)}},_flash_setVideo:function(t){var i=this;try{e.each(this.formats,function(e,n){if(i.flash.support[n]&&t[n]){switch(n){case"m4v":case"flv":i._getMovie().fl_setVideo_m4v(t[n]);break;case"rtmpv":i._getMovie().fl_setVideo_rtmp(t[n])}return i.status.src=t[n],i.status.format[n]=!0,i.status.formatType=n,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(e){this._flashError(e)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(e){this._flashError(e)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(e){this._flashError(e)}this.status.waitForLoad=!1},_flash_play:function(e){try{this._getMovie().fl_play(e)}catch(e){this._flashError(e)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(e){try{this._getMovie().fl_pause(e)}catch(e){this._flashError(e)}e>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(e){try{this._getMovie().fl_play_head(e)}catch(e){this._flashError(e)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(e){try{this._getMovie().fl_volume(e)}catch(e){this._flashError(e)}},_flash_mute:function(e){try{this._getMovie().fl_mute(e)}catch(e){this._flashError(e)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var e,t=0;if(window.ActiveXObject)try{if(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var i=e.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),t=parseInt(i[0],10)+"."+parseInt(i[1],10))}}catch(e){}else navigator.plugins&&navigator.mimeTypes.length>0&&(e=navigator.plugins["Shockwave Flash"])&&(t=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*t},_checkForFlash:function(e){var t=!1;return this._getFlashPluginVersion()>=e&&(t=!0),t},_validString:function(e){return e&&"string"==typeof e},_limitValue:function(e,t,i){return e<t?t:e>i?i:e},_urlNotSetError:function(t){this._error({type:e.jPlayer.error.URL_NOT_SET,context:t,message:e.jPlayer.errorMsg.URL_NOT_SET,hint:e.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(t){var i;this._error({type:e.jPlayer.error[i=this.internal.ready?"FLASH_DISABLED":"FLASH"],context:this.internal.flash.swf,message:e.jPlayer.errorMsg[i]+t.message,hint:e.jPlayer.errorHint[i]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(t){this._trigger(e.jPlayer.event.error,t),this.options.errorAlerts&&this._alert("Error!"+(t.message?"\n"+t.message:"")+(t.hint?"\n"+t.hint:"")+"\nContext: "+t.context)},_warning:function(i){this._trigger(e.jPlayer.event.warning,t,i),this.options.warningAlerts&&this._alert("Warning!"+(i.message?"\n"+i.message:"")+(i.hint?"\n"+i.hint:"")+"\nContext: "+i.context)},_alert:function(e){var t="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+e;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(t):alert(t)},_emulateHtmlBridge:function(){var t=this;e.each(e.jPlayer.emulateMethods.split(/\s+/g),function(e,i){t.internal.domNode[i]=function(e){t[i](e)}}),e.each(e.jPlayer.event,function(i,n){var o=!0;e.each(e.jPlayer.reservedEvent.split(/\s+/g),function(e,t){if(t===i)return o=!1,!1}),o&&t.element.bind(n+".jPlayer.jPlayerHtml",function(){t._emulateHtmlUpdate();var e=document.createEvent("Event");e.initEvent(i,!1,!0),t.internal.domNode.dispatchEvent(e)})})},_emulateHtmlUpdate:function(){var t=this;e.each(e.jPlayer.emulateStatus.split(/\s+/g),function(e,i){t.internal.domNode[i]=t.status[i]}),e.each(e.jPlayer.emulateOptions.split(/\s+/g),function(e,i){t.internal.domNode[i]=t.options[i]})},_destroyHtmlBridge:function(){var t=this;this.element.unbind(".jPlayerHtml"),e.each((e.jPlayer.emulateMethods+" "+e.jPlayer.emulateStatus+" "+e.jPlayer.emulateOptions).split(/\s+/g),function(e,i){delete t.internal.domNode[i]})}},e.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},e.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+e.jPlayer.prototype.version.script+" needs Jplayer.swf version "+e.jPlayer.prototype.version.needFlash+" but found "},e.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},e.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},e.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},e.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}});